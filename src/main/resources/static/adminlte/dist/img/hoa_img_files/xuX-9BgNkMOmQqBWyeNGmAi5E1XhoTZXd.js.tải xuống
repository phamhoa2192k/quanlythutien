if (self.CavalryLogger) { CavalryLogger.start_js(["vugi\/"]); }

__d("MercuryAPIArgsSource",[],(function(a,b,c,d,e,f){e.exports={CHAT:"chat",JEWEL:"jewel",MERCURY:"mercury",MERCURYSYNC:"mercury_sync",WEBMESSENGER:"web_messenger",MESSENGER:"messenger"}}),null);
__d("MercuryAudioType",[],(function(a,b,c,d,e,f){e.exports={FileAttachment:"file_attachment",AudioClip:"fb_voice_message",VoiceMessageWithTranscript:"fb_voice_message_with_transcript"}}),null);
__d("MessageLiveLocationClientSyncProtocolStopReason",[],(function(a,b,c,d,e,f){e.exports={EXPIRED:1,CANCELED:2,ARRIVED:3}}),null);
__d("PageCommItemStatus",[],(function(a,b,c,d,e,f){e.exports={FOLLOW_UP:"FOLLOW_UP",DONE:"DONE",TODO:"TODO",SPAM:"SPAM",DELETED:"DELETED"}}),null);
__d("MercurySyncHolesTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setDifference=function(a){this.$1.difference=a;return this};c.setSeqID=function(a){this.$1.seq_id=a;return this};c.setTopicType=function(a){this.$1.topic_type=a;return this};return a}();c={difference:!0,seq_id:!0,topic_type:!0};e.exports=a}),null);
__d("MessengerSharedMediaActionsLoader",["JSResource"],(function(a,b,c,d,e,f){"use strict";f.deletePhotos=a;function a(a,c){b("JSResource").loadAll([b("JSResource")("MessengerSharedMediaActions").__setRef("MessengerSharedMediaActionsLoader")],function(b){b.deletePhotos(a,c)})}}),null);
__d("MercuryMessageIDs.bs",["bs_curry","bs_js_dict","KeyedCallbackManager"],(function(a,b,c,d,e,f){"use strict";var g=new(b("KeyedCallbackManager"))();function a(a,c){var d=a.filter(function(a){return a.indexOf("id")===-1}),e=function(d){return b("bs_curry")._1(c,a.map(function(a){var c=b("bs_js_dict").get(d,a);if(c!==void 0)return c;else return a}))};return g.executeOrEnqueue(d,e)}function c(a,b){g.setResource(a,b)}f.getServerIDs=a;f.addServerID=c}),null);
__d("MessengerAttachmentTransformerForSend.bs",["MercuryAttachmentType","MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs"],(function(a,b,c,d,e,f){"use strict";function g(a,c,d,e){c=c.node;if(c==null)return{attach_type:b("MercuryAttachmentType").ERROR};if(c.__typename==="ExtensibleMessageAttachment"){var f=c.story_attachment,g=c.genie_attachment,h;if(g==null)h=null;else{g=g.genie_message;var i;if(g==null)i=null;else{g=g.story_attachment;i={story_attachment:g==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(g)}}h={genie_message:i}}g={legacy_attachment_id:c.legacy_attachment_id,story_attachment:f==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(f),genie_attachment:h}}else g=null;i=c.__typename==="Sticker"?c:null;f=c.__typename;var j;switch(f){case"MessageAnimatedImage":case"MessageAudio":case"MessageFile":case"MessageImage":case"MessageVideo":j=[c];break;default:j=null}h=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments({blob_attachments:j});f=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:g,blob_attachments:h,sticker:i},d,e);if(f.length!==0)return f[0];else return{}}function a(a,b,c,d){return b.map(function(b){return g(a,b,c,d)})}f._transform=g;f.transform=a}),null);
__d("MessengerFolders.bs",["gkx","qex","MessagingThreadType","MercuryFoldersConfig","MessengerEnvironment"],(function(a,b,c,d,e,f){"use strict";d=b("qex")._("998180")&&b("MessengerEnvironment").messengerdotcom?["inbox","pending","other","action:archived","marketplace_folder"]:["inbox","pending","other","action:archived"];var g=d.filter(function(a){if(a==="pending")return!b("MercuryFoldersConfig").hide_message_filtered;else if(a==="other")return!b("MercuryFoldersConfig").hide_message_requests;else return!0});function a(a){return[].concat(g)}function c(a){if(a.is_archived)return"action:archived";var c=a.thread_type;if(!(c==null)&&c===b("MessagingThreadType").MARKETPLACE&&b("gkx")("965951"))return"marketplace_folder";else return a.folder}f.getSupportedFolders=a;f.getFromMeta=c}),null);
__d("MercuryActionStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({UNSENT:0,SUCCESS:1,UNCONFIRMED:3,FAILED_UNKNOWN_REASON:4,UNABLE_TO_CONFIRM:5,RESENT:6,RESENDING:7,ERROR:10});e.exports=a}),null);
__d("MercuryMessageDeliveryState",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({SENDING:1,SENT:2,DELIVERED:3,ERROR:0,UNKNOWN:-1});e.exports=a}),null);
__d("MercuryPayloadSource",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:"unknown",CLIENT_CHANNEL_MESSAGE:"client_channel_message",CLIENT_SEND_MESSAGE:"client_send_message",CLIENT_CHANGE_ARCHIVED_STATUS:"client_change-archived_status",CLIENT_CHANGE_PINNED_MESSAGES:"client_change-pinned_messages",CLIENT_CHANGE_PINNED_STATUS:"client_change-pinned_status",CLIENT_CHANGE_PAGE_FOLLOW_UP_STATUS:"client_change_page_follow_up_status",CLIENT_CHANGE_FOLDER:"client_change_folder",CLIENT_CHANGE_MUTE_SETTINGS:"client_change_mute_settings",CLIENT_CHANGE_READ_STATUS:"client_change_read_status",CLIENT_CHANGE_CUSTOM_LIKE:"client_change_custom_like",CLIENT_MARK_THREAD_SEEN:"client_mark_thread_seen",CLIENT_ADD_PARTICIPANTS:"client_add_participants",CLIENT_FETCH_PARTICIPANTS:"client_fetch_participants",CLIENT_DELETE_MESSAGES:"client_delete_messages",CLIENT_DELETE_THREAD:"client_delete_thread",CLIENT_UPDATE_SNIPPET:"client_update_snippet",CLIENT_HANDLE_ERROR:"client_handle_error",CLIENT_CHANGE_FLAG:"client_change_flag",CLIENT_MOVE_PENDING_TO_INBOX:"client_move_pending_to_inbox",CLIENT_CREATE_PAGE_ADMIN_NOTE:"client_create_page_admin_note",CLIENT_UNWRAP_MESSAGE:"client_unwrap_message",CLIENT_UPDATE_COMM_STATUS:"client_update_comm_status",CLIENT_UPDATE_COMM_ITEM_OWNER:"client_update_comm_item_owner",CLIENT_CHANGE_SAVED_MESSAGE_STATUS:"client_update_saved_message_status",SERVER_INITIAL_DATA:"server_initial_data",SERVER_SEND_MESSAGE:"server_send_message",SERVER_CHANGE_ARCHIVED_STATUS:"server_change_archived_status",SERVER_CHANGE_PINNED_MESSAGES:"server_change-pinned_messages",SERVER_CHANGE_PINNED_STATUS:"server_change_pinned_status",SERVER_CHANGE_PAGE_FOLLOW_UP_STATUS:"server_change_page_follow_up_status",SERVER_CHANGE_READ_STATUS:"server_change_read_status",SERVER_MARK_FOLDER_READ:"server_mark_folder_read",SERVER_MARK_SEEN:"server_mark_seen",SERVER_FETCH_PARTICIPANTS:"server_fetch_participants",SERVER_FETCH_THREAD_INFO:"server_fetch_thread_info",SERVER_FETCH_THREADLIST_INFO:"server_fetch_threadlist_info",SERVER_STANDALONE_NOTIFICATIONS:"server_standalone_notifications",SERVER_THREAD_SYNC:"server_thread_sync",SERVER_TAB_PRESENCE:"server_tab_presence",SERVER_UNREAD_THREADS:"server_unread_threads",SERVER_UNSEEN_THREADS:"server_unseen_threads",SERVER_SEARCH:"server_search",SERVER_CHANGE_FLAG:"server_change_flag",SERVER_INVALIDATE_THREAD_STATE:"server_invalidate_thread_state",SERVER_INVALIDATE_GLOBAL_STATE:"server_invalidate_global_state"});e.exports=a}),null);
__d("MercuryViewer",["CurrentUser","MercuryAssert"],(function(a,b,c,d,e,f){"use strict";f.getID=a;f.isViewer=c;var g="fbid:"+b("CurrentUser").getID();function a(){return g}function c(a){b("MercuryAssert").isParticipantID(a);return a===g}}),null);
__d("MessengerMessage.bs",["URI","Utils.bs","bs_js_dict","bs_js_json","bs_caml_obj","bs_caml_option","MercuryViewer","bs_caml_primitive","MercuryActionType","MercuryActionStatus","MercuryPayloadSource","isMessengerDotComURI","MercuryLogMessageType","MercuryMessageDeliveryState"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,b,c,d,e,f){b={thread_id:b,thread_fbid:null,other_user_fbid:null,action_type:d,message_id:a,threading_id:null,offline_threading_id:null,author:c,author_email:"",ephemeral_ttl_mode:null,timestamp:e,is_unread:null,is_filtered_content:!1,is_filtered_content_bh:!1,is_filtered_content_account:!1,is_filtered_content_quasar:!1,is_filtered_content_invalid_app:!1,is_sponsored:!1,is_one_way_sent:!1,ad_id:null,ad_client_token:null,commerce_message_type:null,customizations:[],source:"",source_tags:[],m_suggestions:null,tags:[],is_spoof_warning:!1,folder:"inbox",platform_xmd:null,message_source:null,montage_reply_data:null,replied_to_message:null,skip_bump_thread:!1,profile_ranges:null,reactions:null,attachments:null,ranges:null,meta_ranges:null,status:null,log_message_type:null,log_message_data:null,log_message_body:null,raw_attachments:null,body:null,subject:null,has_attachment:null,creator_info:null,error_data:null,removed_timestamp:null,unsender:null,verse_group_role_xmd:null,message_unsendability_status:null,is_forwarded:!1,preview_attachments:null,sticker_id:null,mib_direct_message_data:null};return Object.assign(b,f)}function c(a){var b=a.offline_threading_id;if(b==null)return!1;else return b===a.message_id}function d(a){if(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE))return!0;a=a.log_message_type;if(a==null)return!0;else return!(b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").SUBSCRIBE)||b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").UNSUBSCRIBE)||b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").SERVER_ERROR)||b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").LIVE_LISTEN))}function e(a){var c=a.ranges;if(c==null)return;c=c.map(function(a){var c=a.entity;if(c==null)return a;var d=b("Utils.bs").isTruthy(c.external),e=c.url;if(d)return a;if(e==null)return a;d=new(g||(g=b("URI")))(e);e=b("isMessengerDotComURI")(g.getRequestURI());var f=d.getDomain();if(!e)return a;return!(f==null)&&f!==""?a:Object.assign(Object.assign({},a),{entity:Object.assign(Object.assign({},c),{url:d.setProtocol("https").setDomain("www.facebook.com").toString()})})});Object.assign(a,{ranges:c})}function h(a){if(b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").UNKNOWN)||b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").SERVER_INITIAL_DATA)||b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO))return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").SERVER_THREAD_SYNC)}function i(a){a=a.author;if(a==null)return!1;else return a===b("MercuryViewer").getID()}function j(a){a=a.author;if(a==null)return!1;else return a!==b("MercuryViewer").getID()}function k(a){a=a.status;if(a==null)return!1;else if(b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNSENT)||b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNCONFIRMED)||b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNABLE_TO_CONFIRM))return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").RESENDING)}function l(a){a=a.status;if(a==null)return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").SUCCESS)}function m(a,c){return b("bs_caml_primitive").caml_float_compare(a.timestamp,c.timestamp)}function n(a){a=a.status;if(a==null)return!1;else if(b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").FAILED_UNKNOWN_REASON)||b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNABLE_TO_CONFIRM))return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").ERROR)}function o(a){a=a.error_data;if(!(a==null))return b("bs_caml_option").nullable_to_opt(a.description)}function p(a,c){if(n(a))return b("MercuryMessageDeliveryState").ERROR;else if(k(a))return b("MercuryMessageDeliveryState").SENDING;else if(l(a))if(a.is_one_way_sent||a.timestamp>c)return b("MercuryMessageDeliveryState").SENT;else return b("MercuryMessageDeliveryState").DELIVERED;else return b("MercuryMessageDeliveryState").UNKNOWN}function q(a,b){if(n(a))return 4;else if(k(a))return 1;else if(l(a))if(a.timestamp<=b&&!a.is_one_way_sent)return 3;else return 2;else return 0}function r(a){try{a=b("bs_caml_option").some(JSON.parse(a))}catch(b){a=void 0}if(a===void 0)return;a=b("bs_js_json").classify(b("bs_caml_option").valFromOption(a));if(typeof a==="number")return;if(a.TAG!==2)return;a=b("bs_js_dict").get(a._0,"persona");if(a===void 0)return;a=b("bs_js_json").classify(b("bs_caml_option").valFromOption(a));if(typeof a==="number"||a.TAG!==2)return;else return b("bs_caml_option").some(a._0)}function s(a){if(a==null)return null;a=a.platform_xmd;if(a==null)return null;a=r(a);if(a===void 0)return null;a=b("bs_caml_option").valFromOption(a);var c=b("bs_js_dict").get(a,"id"),d=b("bs_js_dict").get(a,"name");a=b("bs_js_dict").get(a,"profile_picture_url");if(c!==void 0&&d!==void 0&&a!==void 0)return{id:b("bs_caml_option").valFromOption(c),name:b("bs_caml_option").valFromOption(d),profile_picture_url:b("bs_caml_option").valFromOption(a)};else return null}function t(a){var c=a.log_message_type;if(!(c==null)&&b("bs_caml_obj").caml_equal(c,b("MercuryLogMessageType").SERVER_ERROR))return b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").LOG_MESSAGE);else return!1}function u(a,b){var c=a.thread_fbid,d=a.other_user_fbid;a=a.is_from_iris;if(!(b==null)&&b)return!1;if(!(c==null)||!(d==null)||a)return!0;else return!1}f.makeFakeMessage=a;f.isLocalMessage=c;f.isTitanMessage=d;f.finalizeRanges=e;f.shouldSortForPayloadSource=h;f.isOutbound=i;f.isInbound=j;f.isSending=k;f.isSent=l;f.compare=m;f.hasError=n;f.getError=o;f.getDeliveryState=p;f.getGutterItemStatus=q;f.getPersonaData=r;f.getPersona=s;f.isErrorLogMessage=t;f.hasServerTimestamp=u}),null);
__d("MessengerPersonas.bs",["bs_js_dict","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";var g={};function a(a){if(a==null)return;var c=b("bs_js_dict").get(g,a.id);if(c!==void 0)return;else{g[a.id]=a;return}}function c(a){return b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(g,a))}f.personas=g;f.addPersona=a;f.getNow=c}),null);
__d("MessengerRealtimeAttachmentTransformer.bs",["MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){var e=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(c),f=c.extensible_attachment,g;if(f==null)g=null;else{var h=f.story_attachment,i=f.genie_attachment,j;if(i==null)j=null;else{i=i.genie_message;var k;if(i==null)k=null;else{i=i.story_attachment;k={story_attachment:i==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(i)}}j={genie_message:k}}g={legacy_attachment_id:f.legacy_attachment_id,story_attachment:h==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(h),genie_attachment:j}}return b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:g,blob_attachments:e,sticker:c.sticker},null,d)}f.transform=a}),null);
__d("MessengerSharedPhotosVideosBaseData.bs",["bs_js_dict"],(function(a,b,c,d,e,f){"use strict";var g={};function a(a){return b("bs_js_dict").get(g,a)}function h(a,b){g[a]=b}function c(a,c){var d=b("bs_js_dict").get(g,a);if(d===void 0)return;var e=d.actualData;if(e===void 0)return;var f=e.edges;if(f.length===0)return;f=f.filter(function(a){return!c.some(function(b){return b===a.node.legacy_attachment_id})});d=d.fetchingState;f={edges:f,newestItemCursor:e.newestItemCursor,oldestItemCursor:e.oldestItemCursor,hasNextPage:e.hasNextPage};e={fetchingState:d,actualData:f};return h(a,e)}f.data=g;f.get=a;f.set=h;f.localRemove=c}),null);
__d("MessengerThreadFetcher.bs",["Promise","bs_curry","gkx","FBIDCheck","bs_belt_Array","LogHistory","MercuryIDs","bs_caml_option","MercuryDispatcher","MercuryThreadIDMap","MercuryPayloadSource","setTimeoutAcrossTransitions","MessengerGraphQLThreadFetcher.bs"],(function(a,b,c,d,e,f){"use strict";var g=new Map();function h(a,c){var d=c.other_user_fbid;if(d==null){c=c.thread_fbid;if(c==null)throw{RE_EXN_ID:"Invalid_argument",_1:"Encountered thread with no server identifier",Error:new Error()};c=[c,b("MercuryIDs").getThreadIDFromThreadFBID(c)]}else c=[d,b("MercuryIDs").getThreadIDFromUserID(d)];d=c[1];c=c[0];a=b("MercuryThreadIDMap").getForFBID(a);var e={},f=a.getClientIDFromServerIDNow(c);if(f==null){b("gkx")("1199097")&&b("LogHistory").getInstance("MessengerThreadFetcher").debug("setServerIDToClientID",d);a.setServerIDToClientID(c,d);e[c]=d;return[d,e]}else return[f,e]}function i(a,c,d){var e=!b("FBIDCheck").isUser_deprecated(a);return b("MessengerGraphQLThreadFetcher.bs").fetchAll(a,[{id:c,limit:0,loadReadReceipts:!1,loadDeliveryReceipts:!1,timestamp:null,isCanonical:d}],e).then(function(c){c=b("bs_belt_Array").get(c,0);if(c===void 0)return b("Promise").resolve(!1);c=b("bs_caml_option").valFromOption(c).thread;if(c==null)return b("Promise").resolve(!1);var d=h(a,c);b("MercuryDispatcher").getForFBID(a).handleUpdate({threads:[Object.assign(c,{thread_id:d[0]})],pinned_thread_ids:[],newlyAddedClientIDs:d[1],actions:[],preprocessed:!0,payload_source:b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO});return b("Promise").resolve(!0)})}function j(a,c,d){return i(a,c,d).then(function(d){var e=g.get(a);if(e==null)return b("Promise").resolve(!1);var f=e.get(c);if(f==null)return b("Promise").resolve(!1);else{b("bs_belt_Array").forEach(f[1],function(a){return b("bs_curry")._1(a,d)});e["delete"](c);return b("Promise").resolve(d)}})["catch"](function(e){var f=g.get(a);if(f==null)return b("Promise").resolve(!1);e=f.get(c);if(e==null)return b("Promise").resolve(!1);var h=e[1];e=e[0];if(e<5||b("gkx")("678666")){var k=Math.imul(Math.pow(2,Math.min(e,5))|0,1e3),l=new(b("Promise"))(function(e,g){b("setTimeoutAcrossTransitions")(function(g){i(a,c,d).then(function(a){e(a);b("bs_belt_Array").forEach(h,function(c){return b("bs_curry")._1(c,a)});f["delete"](c);return b("Promise").resolve(a)})["catch"](function(b){return j(a,c,d)})},k)});f.set(c,[e+1|0,h]);return l}f["delete"](c);return b("Promise").resolve(!1)})}function a(a,b,c,d){var e=g.get(a);if(e==null){var f=new Map();f.set(b,[0,[d]]);g.set(a,f);j(a,b,c);return}f=e.get(b);f==null?(e.set(b,[0,[d]]),j(a,b,c)):f[1].push(d)}f.$$fetch=a}),null);
__d("ClientSyncProtocol_GroupsSyncAction",[],(function(a,b,c,d,e,f){a=Object.freeze({OPT_IN:0,OPT_OUT:1,UPDATE_EMOJI:2});e.exports=a}),null);
__d("IrisProtocolMessageLifetime",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TTL_OFF:0,TTL_ON_UNKNOWN:1,TTL_30SECONDS:3e4,TTL_1MINUTE:6e4,TTL_3MINUTES:18e4,TTL_5MINUTES:3e5,TTL_10MINUTES:6e5,TTL_15MINUTES:9e5,TTL_30MINUTES:18e5,TTL_1HOUR:36e5,TTL_2HOURS:72e5,TTL_4HOURS:144e5,TTL_8HOURS:288e5,TTL_12HOURS:432e5,TTL_24HOURS:864e5,TTL_36HOURS:1296e5,TTL_72HOURS:2592e5})}),null);
__d("MSuggestionDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";a=new(b("ExplicitRegistrationDispatcher"))({strict:!1});e.exports=a}),null);
__d("MSuggestionActions",["MSuggestionDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";f.saveAllSuggestions=a;f.removeAllSuggestions=c;f.removeSuggestionsByType=d;var g=b("keyMirror")({SAVE_ALL_SUGGESTIONS:null,REMOVE_ALL_SUGGESTIONS:null,REMOVE_SUGGESTIONS_BY_TYPE:null});f.Types=g;function a(a,c){b("MSuggestionDispatcher").dispatch({type:g.SAVE_ALL_SUGGESTIONS,threadID:a,suggestions:c})}function c(a){a&&b("MSuggestionDispatcher").dispatch({type:g.REMOVE_ALL_SUGGESTIONS,threadID:a})}function d(a,c){b("MSuggestionDispatcher").dispatch({type:g.REMOVE_SUGGESTIONS_BY_TYPE,threadID:a,typeID:c})}}),null);
__d("MercuryGlobalActionType",[],(function(a,b,c,d,e,f){a=Object.freeze({MARK_ALL_READ:"mga-type:mark-all-read",MARK_ALL_SEEN:"mga-type:mark-all-seen"});e.exports=a}),null);
__d("MercuryMessageCustomizations",[],(function(a,b,c,d,e,f){"use strict";f.parseCustomizations=a;function a(a){var b=JSON.parse(a),c=[];Object.keys(b).forEach(function(a){c.push({customization_type:a,customization_value:b[a]})});return c}}),null);
__d("MercuryProfileRanges",[],(function(a,b,c,d,e,f){"use strict";function g(a){return!a.id&&a.i?{id:a.i,offset:a.o,length:a.l,type:a.t}:a}e.exports={extractFromDelta:function(a){a=(a=a)!=null?(a=a.data)!=null?a.prng:a:a;if(!a)return[];var b=[];try{b=JSON.parse(a);if(b.length>0)return b.map(g)}catch(a){}return b}}}),null);
__d("MessageThreadReadState",[],(function(a,b,c,d,e,f){"use strict";a={MARK_READ:1,MARK_UNREAD:2,KEEP_AS_IS:3};b=a;e.exports=b}),null);
__d("MessageThreadReadStateEffect",["MessageThreadReadState"],(function(a,b,c,d,e,f){"use strict";f.extractThreadStateEffectFromDelta=a;function a(a,c){var d=c.messageMetadata.threadReadStateEffect;if(d!=null){var e=b("MessageThreadReadState")[d];return e===void 0&&typeof d==="number"?d:e}d=c.messageMetadata.skipBumpThread;return d===!0?b("MessageThreadReadState").KEEP_AS_IS:a!==c.messageMetadata.actorFbId?b("MessageThreadReadState").MARK_UNREAD:b("MessageThreadReadState").KEEP_AS_IS}}),null);
__d("MessagingThreadAction",[],(function(a,b,c,d,e,f){a=Object.freeze({ACTION_INVALID:"ACTION_INVALID",ACTION_ARCHIVED:"ACTION_ARCHIVED",ACTION_UNARCHIVED:"ACTION_UNARCHIVED"});e.exports=a}),null);
__d("MessengerApprovalModeTypes",[],(function(a,b,c,d,e,f){a=Object.freeze({OPEN:0,APPROVALS:1});e.exports=a}),null);
__d("MessengerApprovalQueueTypes",[],(function(a,b,c,d,e,f){a=Object.freeze({REQUESTED:"REQUESTED",REMOVED:"REMOVED"});e.exports=a}),null);
__d("MessengerGroupRequestSource",[],(function(a,b,c,d,e,f){a=Object.freeze({ADD:0,JOIN_THROUGH_LINK:1});e.exports=a}),null);
__d("MessengerWebDeltaEvents",[],(function(a,b,c,d,e,f){a=Object.freeze({DELTA_RECEIVED:"DELTA_RECEIVED",DELTA_IGNORED:"DELTA_IGNORED"});e.exports=a}),null);
__d("PagesMessagingEventType",[],(function(a,b,c,d,e,f){a=Object.freeze({FLAG:1,CREATE_ADMIN_NOTE:2,PRIORITY_UPDATE:3});e.exports=a}),null);
__d("RepliedToMessageStatusForGraphQL",[],(function(a,b,c,d,e,f){a=Object.freeze({VALID:"VALID",DELETED:"DELETED",TEMPORARILY_UNAVAILABLE:"TEMPORARILY_UNAVAILABLE"});e.exports=a}),null);
__d("MessengerDeltaTransformer.bs",["Promise","FBID.bs","bs_curry","gkx","bs_js_dict","bs_js_json","bs_caml_obj","FBIDCheck","bs_belt_Array","Bootloader","bs_caml_array","DateConsts","MercuryIDs","bs_belt_Option","bs_caml_option","MessengerState.bs","MontageActions","bs_js_null_undefined","MercuryActionType","MercuryDispatcher","MSuggestionActions","MercuryThreadIDMap","PageCommItemStatus","MercuryPayloadSource","MercuryProfileRanges","MercuryLogMessageType","MercuryServerRequests","MercurySyncDeltaTypes","MessagingThreadAction","MessageThreadReadState","MessengerThreadFetcher.bs","MercuryGlobalActionType","MessengerWebDeltaEvents","PagesMessagingEventType","MessengerGroupsSyncStatus.bs","MessengerGroupsSyncStatus","MessageUnsendabilityStatus.bs","MessengerApprovalModeTypes","MessengerMessageDFFFetcher.bs","IrisProtocolMessageLifetime","MessengerApprovalQueueTypes","MessengerGroupRequestSource","MercuryMessageCustomizations","MessageThreadReadStateEffect","MessengerParticipantsFetcher.bs","RepliedToMessageStatusForGraphQL","ClientSyncProtocol_GroupsSyncAction","MessengerRealtimeAttachmentTransformer.bs","MessageLiveLocationClientSyncProtocolStopReason"],(function(a,b,c,d,e,f){"use strict";function g(a){try{return JSON.parse(a)}catch(a){return{}}}var h=b("gkx")("780647")?0:1;function i(a,c){var d=b("bs_belt_Option").map(b("bs_caml_option").nullable_to_opt(c.otherUserFbId),function(a){return a.toString()});c=b("bs_belt_Option").map(b("bs_caml_option").nullable_to_opt(c.threadFbId),function(a){return a.toString()});a=b("MercuryThreadIDMap").getForFBID(a);d=d!==void 0?[b("bs_caml_option").some(b("MercuryIDs").getThreadIDFromUserID(b("FBID.bs").ofStringExn(d))),d]:c!==void 0?[b("bs_caml_option").some(b("MercuryIDs").getThreadIDFromThreadFBID(b("FBID.bs").ofStringExn(c))),c]:[void 0,void 0];c=d[1];d=d[0];if(c!==void 0&&d!==void 0)if(a.hasClientIDForServerID(c))return b("bs_caml_option").nullable_to_opt(a.getClientIDFromServerIDNow(c));else return b("bs_caml_option").valFromOption(d)}function j(a,b,c,d){if(!(a==null))return[a.toString(),{otherUserFbId:null,threadFbId:a}];if(b==null)return[void 0,void 0];a=c.toString()!==d?c:b;return[a.toString(),{otherUserFbId:a,threadFbId:null}]}function k(a,c){var d=parseInt(c.messageMetadata.timestamp,10),e=b("MessageThreadReadStateEffect").extractThreadStateEffectFromDelta(a,c),f={contents:c.messageMetadata.actorFbId.toString()},h=!b("FBIDCheck").isUser_deprecated(a),j=c.attachments;j=j==null?[]:b("bs_belt_Array").keepMapU(j,function(c){var d=c.mercury;if(d==null){c=c.mercuryJSON;c=c==null?null:g(c)}else c=d;if(c==null)return;d=c.extensible_attachment;var e=c.blob_attachment;c=c.sticker_attachment;c=d==null?e==null?c==null?[]:b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{extensible_attachment:null,blob_attachments:null,sticker:c},h):b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{extensible_attachment:null,blob_attachments:[e],sticker:null},h):b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{extensible_attachment:b("bs_js_null_undefined").fromOption(d==null?void 0:b("bs_caml_option").some(d)),blob_attachments:null,sticker:null},h);e=b("bs_belt_Array").get(c,0);if(e!==void 0){d=b("bs_caml_option").valFromOption(e).share;if(d==null)c=f.contents;else{d=d.target;if(d==null)c=f.contents;else{d=d.genie_id;c=d==null?f.contents:d}}}else c=f.contents;f.contents=c;return e});var k=c.messageMetadata.tags;k=k==null?void 0:b("bs_js_null_undefined").fromOption(b("bs_belt_Array").get(k,0));var l=c.data,m;if(l==null)m=null;else{var n=b("bs_js_dict").get(l,"adminSignatureCreatorID");m=n!==void 0?{creatorID:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(l,"adminSignatureCreatorID")),creatorName:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(l,"adminSignatureCreatorName")),creatorType:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(l,"adminSignatureCreatorType")),labelType:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(l,"adminSignatureLabelType")),pageID:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(l,"adminSignaturePageID")),profileURI:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(l,"adminSignatureProfileURI"))}:null}n=f.contents;l=b("bs_caml_obj").caml_equal(e,b("MessageThreadReadState").MARK_UNREAD)&&a!==n;var o=i(a,c.messageMetadata.threadKey);if(o!==void 0){var p=c.ttl,q=c.messageMetadata.threadKey.threadFbId,r=c.messageMetadata.threadKey.otherUserFbId,s=c.body,t=c.data;if(t==null){var u=c.untypedData;u=u==null?!1:b("bs_belt_Option").getWithDefault(b("bs_js_dict").get(u,"is_sponsored"),"false")==="true"}else u=b("bs_belt_Option").getWithDefault(b("bs_js_dict").get(t,"is_sponsored"),"false")==="true";t=c.data;var v=c.data,w;if(v==null)w=null;else{v=b("bs_js_dict").get(v,"customization");w=v!==void 0?b("MercuryMessageCustomizations").parseCustomizations(v):null}v=c.data;var x=c.data,y=c.data,z;if(y==null)z=null;else{y=b("bs_js_dict").get(y,"mib_direct_message_data");z=y!==void 0?g(y):null}y=c.data;var A;if(y==null)A=null;else{y=b("bs_js_dict").get(y,"message_source_data");if(y!==void 0){y=g(y);y=b("bs_js_json").classify(y);if(typeof y==="number"||y.TAG!==2)A=null;else{y=b("bs_js_dict").get(y._0,"message_source");A=y!==void 0?b("bs_js_null_undefined").fromOption(y):null}}else A=null}y=c.messageMetadata.skipBumpThread;var B=c.data,C;if(B==null)C=null;else{B=b("bs_js_dict").get(B,"montage_reply_data");C=B!==void 0?g(B):null}B=c.data;var D;if(B==null)D=null;else{B=b("bs_js_dict").get(B,"meta_ranges");D=B!==void 0?g(B):null}return{message_id:c.messageMetadata.messageId,threading_id:null,offline_threading_id:c.messageMetadata.offlineThreadingId,author:b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(n)),author_email:n+"@facebook.com",ephemeral_ttl_mode:p==null?0:b("bs_belt_Option").getWithDefault(b("bs_js_dict").get(b("IrisProtocolMessageLifetime"),p),0),timestamp:d,is_unread:l,is_filtered_content:!1,is_filtered_content_bh:!1,is_filtered_content_account:!1,is_filtered_content_quasar:!1,is_filtered_content_invalid_app:!1,is_one_way_sent:b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(c.messageMetadata.tags),[]).some(function(a){return a==="one_way_message"}),is_forwarded:b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(c.messageMetadata.tags),[]).some(function(a){if(a==="action:copy_message"||a==="copy_self_message"||a==="action:copy_attachment")return!0;else return a==="copy_self_attachment"}),source:k,tags:c.messageMetadata.tags,is_spoof_warning:!1,folder:null,thread_fbid:q==null?null:q.toString(),other_user_fbid:r==null?null:r.toString(),body:s==null?"":s,html_body:null,subject:null,has_attachment:j.length!==0,attachments:j,ranges:void 0,thread_id:o,action_type:b("MercuryActionType").USER_GENERATED_MESSAGE,is_from_iris:!0,is_sponsored:u,commerce_message_type:t==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(t,"commerce_message_type")),customizations:w,platform_xmd:v==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(v,"platform_xmd")),profile_ranges:b("MercuryProfileRanges").extractFromDelta(c),verse_group_role_xmd:x==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(x,"verse_group_role_id")),mib_direct_message_data:z,message_source:A,skip_bump_thread:y==null?!1:y,thread_read_state_effect:e,montage_reply_data:C,meta_ranges:D,creator_info:m,message_unsendability_status:b("MessageUnsendabilityStatus.bs").fromNullableString(c.messageMetadata.unsendType),comm_status:h?b("PageCommItemStatus").TODO:null}}throw{RE_EXN_ID:"Invalid_argument",_1:"invalid thread id",Error:new Error()}}function l(a,c,d,e){b("Bootloader").loadModules(["MessengerWebDeltasTypedLogger.bs"],function(f){f=b("bs_curry")._1(f.messengerWebDeltasTypedLogger,void 0);f=f.setDeltaEvent(a).setDeltaType(c).setIgnoreReason(d).setSyncSeqID(e);f.log()},"MessengerDeltaTransformer.bs")}function m(a){return l(b("MessengerWebDeltaEvents").DELTA_RECEIVED,a,null,null)}function n(a,c){return l(b("MessengerWebDeltaEvents").DELTA_IGNORED,a,c,null)}function o(a,c,d,e,f){return b("MessengerThreadFetcher.bs").$$fetch(a,c,d,function(c){if(c){b("MercuryDispatcher").getForFBID(a).handleUpdate({actions:[e],pinned_thread_ids:[],newlyAddedClientIDs:{},preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});return m(f)}else return n(f,"thread fetch failed")})}function p(a,c,d,e){var f=c.other_user_fbid;if(f==null){var g=c.thread_fbid;if(g==null)throw{RE_EXN_ID:"Invalid_argument",_1:"invalid thread id",Error:new Error()};g=[g,!1]}else g=[f,!0];f=g[1];g=g[0];var h=b("MercuryThreadIDMap").getForFBID(a);h=h.getClientIDFromServerIDNow(g);var i=h==null?null:b("MessengerState.bs").getThreadMetaNow(a,h),j=b("gkx")("1143875");if(h==null)if(e)return o(a,g,f,c,d);else return n(d,"thread not already loaded, not required to be loaded");if(i==null)if(e){if(j)return o(a,g,f,c,d);if(j)return n(d,"thread not already loaded, not required to be loaded")}else if(j)return n(d,"thread not already loaded, not required to be loaded");b("MercuryDispatcher").getForFBID(a).handleUpdate({actions:[c],pinned_thread_ids:[],newlyAddedClientIDs:{},preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});return m(d)}function q(a,c){var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_caml_option").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_caml_option").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];if(e===void 0)return;if(f===void 0)return;d=i(a,b("bs_caml_option").valFromOption(f));if(d!==void 0)return{thread_id:d,action_type:b("MercuryActionType").REACTION_UPDATE,messageId:c.messageId,offlineThreadingId:c.offlineThreadingId,reaction:c.reaction,senderId:c.senderId.toString(),thread_fbid:e.toString(),other_user_fbid:null,userId:c.userId.toString()}}function r(a){return a/Math.pow(10,8)}function s(a,c){var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_caml_option").some(d),f=c.threadKey.otherUserFbId,g=f==null?void 0:b("bs_caml_option").some(f);d=d==null?f==null?[void 0,void 0]:[g,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(g)}]:[e,{otherUserFbId:b("bs_js_null_undefined").fromOption(e),threadFbId:null}];f=d[1];g=d[0];if(g===void 0)return;if(f===void 0)return;e=i(a,b("bs_caml_option").valFromOption(f));if(e===void 0)return;if(c.messageLiveLocations.length!==1)return;d=b("bs_caml_array").get(c.messageLiveLocations,0);a=d.expirationTime;f=d.stopReason;c=f==null?Date.now()/b("DateConsts").MS_PER_SEC>a:!0;f=d.coordinate;f=f==null?null:{latitude:r(f.latitude),longitude:r(f.longitude)};var h=d.destination;h=h==null?null:{latitude:r(h.latitude),longitude:r(h.longitude),label:h.label};var j=d.stopReason;j=j==null?null:j===b("MessageLiveLocationClientSyncProtocolStopReason").EXPIRED||j===b("MessageLiveLocationClientSyncProtocolStopReason").CANCELED?"EXPIRED":j===b("MessageLiveLocationClientSyncProtocolStopReason").ARRIVED?"ARRIVED":null;return{thread_id:e,action_type:b("MercuryActionType").LIVE_LOCATION_UPDATE,thread_fbid:g.toString(),other_user_fbid:null,messageId:d.messageId,liveLocation:{live_location_id:d.id.toString(),is_expired:c,expiration_time:a,sender:{id:d.senderId.toString()},coordinate:f,location_title:d.locationTitle,sender_destination:h,stop_reason:j}}}function t(a,c){var d=c.threadKey.threadFbId;if(d==null)return;a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").EVENT_RSVP_CHANGED,actor_fbid:c.actorFbId.toString(),rsvp_status:c.rsvpStatus,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a}}function u(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return;a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").UPDATE_COMM_STATUS,comm_status:c.isFollowUp?b("PageCommItemStatus").FOLLOW_UP:b("PageCommItemStatus").TODO,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a}}function v(a,c){var d=[];c.forEach(function(a){a=b("MercuryIDs").getUserIDFromParticipantID(a);if(!(a==null)){d.push(a);return}});return b("MessengerParticipantsFetcher.bs").$$fetch({ids:d}).then(function(c){var d=[],e=[];c.forEach(function(a){var b=a.id;a.is_messenger_blocked||a.is_facebook_blocked?d.push(b):e.push(b)});b("MercuryDispatcher").getForFBID(a).handleUpdate({from_client:!0,message_blocked_ids:d,message_unblocked_ids:e});return b("Promise").resolve(void 0)})["catch"](function(a){return b("Promise").resolve(void 0)})}function w(a,c){var d=c.actorFbid.toString(),e=b("FBID.bs").ofStringExn(d);if(b("bs_caml_obj").caml_notequal(e,a))e=b("bs_caml_option").some(b("MercuryIDs").getParticipantIDFromUserID(a));else{var f=c.threadKey.otherUserFbId;if(f==null)e=void 0;else{f=b("FBID.bs").ofString(f.toString());e=f!==void 0?b("bs_caml_option").some(b("MercuryIDs").getParticipantIDFromUserID(b("bs_caml_option").valFromOption(f))):void 0}}if(e===void 0)return;f=b("bs_caml_option").valFromOption(e);e=c.threadKey.otherUserFbId;if(e==null)return;v(a,[f]);a=i(a,{otherUserFbId:e,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").BLOCK_STATUS_CHANGED,actorFbid:d,canViewerReply:c.canViewerReply,reason:c.reason,message_blocked_ids:[f],other_user_fbid:e.toString(),thread_fbid:null,thread_id:a}}function x(a,c){var d=c.threadKey.threadFbId;if(d==null){var e=c.threadKey.otherUserFbId;e=e==null?[void 0,void 0]:[e.toString(),{otherUserFbId:e,threadFbId:null}]}else e=[d.toString(),{otherUserFbId:null,threadFbId:d}];d=e[1];e=e[0];if(e===void 0)return;if(d===void 0)return;a=i(a,b("bs_caml_option").valFromOption(d));if(a!==void 0)return{action_type:b("MercuryActionType").MONTAGE_DIRECT_EXPIRE,messageId:c.messageId,timestamp:c.timestamp,thread_fbid:e,other_user_fbid:null,keep_expiry_timestamp:c.keepExpiryTimestamp,thread_id:a}}function y(a,c){var d=k(a,c.message),e=c.repliedToMessage;if(e==null)return b("bs_caml_option").some(d);a=k(a,e);e=c.status;var f;if(e==null)f=void 0;else switch(e){case 0:f=b("bs_caml_option").some(b("RepliedToMessageStatusForGraphQL").VALID);break;case 1:f=b("bs_caml_option").some(b("RepliedToMessageStatusForGraphQL").DELETED);break;case 2:f=b("bs_caml_option").some(b("RepliedToMessageStatusForGraphQL").TEMPORARILY_UNAVAILABLE);break;default:f=void 0}if(f!==void 0)return b("bs_caml_option").some(Object.assign(d,{replied_to_message:{status:b("bs_caml_option").valFromOption(f),message:a}}))}function z(a,c){var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_caml_option").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_caml_option").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];if(e===void 0)return;if(f===void 0)return;d=i(a,b("bs_caml_option").valFromOption(f));if(d!==void 0)return{action_type:b("MercuryActionType").GROUPS_SYNC_STATUS_CHANGED,thread_fbid:e.toString(),other_user_fbid:null,actor_fbid:c.actorFbid.toString(),groups_sync_status_string:b("MessengerGroupsSyncStatus.bs").fromNullableString(c.groupsSyncStatus),thread_id:d}}function A(a,c){var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_caml_option").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_caml_option").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];d=c.syncAction===b("ClientSyncProtocol_GroupsSyncAction").OPT_IN?b("bs_caml_option").some(b("MessengerGroupsSyncStatus").OPT_IN):c.syncAction===b("ClientSyncProtocol_GroupsSyncAction").OPT_OUT?b("bs_caml_option").some(b("MessengerGroupsSyncStatus").OPT_OUT):void 0;if(e===void 0)return;if(d===void 0)return;if(f===void 0)return;a=i(a,b("bs_caml_option").valFromOption(f));if(a===void 0)return;f=c.syncedFbGroupId;return{action_type:b("MercuryActionType").GROUPS_SYNC_METADATA_UPDATE,thread_fbid:e.toString(),other_user_fbid:null,actor_fbid:c.actorFbid.toString(),groups_sync_action:b("bs_caml_option").valFromOption(d),source_surface:c.sourceSurface,fb_group_id:f==null?null:f.toString(),thread_id:a,emoji_codepoints:c.emojiCodePoints}}function B(a,c){var d=c.threadKey.threadFbId;if(d==null)return;a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").DESCRIPTION_CHANGED,thread_fbid:d.toString(),other_user_fbid:null,group_thread_description_string:c.threadDescription,thread_id:a}}function C(a){return"#"+a.slice(2)}function D(a,c){var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_caml_option").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_caml_option").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];if(e===void 0)return;if(f===void 0)return;d=i(a,b("bs_caml_option").valFromOption(f));if(d===void 0)return;a=c.fallbackColor!==""?C(c.fallbackColor):"";f=c.reactionPack;var g;if(f==null)g=[void 0,void 0];else{var h=f.reactionAssets;f=f.fontAsset;g=[h==null?void 0:h.map(function(a){return{reactionName:a.reactionName,reactionEmoji:a.reactionEmoji,keyframeAssetUri:a.keyframeAssetUri}}),f==null?void 0:f.assetUri]}h=g[1];f=g[0];g=c.gradientColors;if(!(g==null)&&g.length!==0){g=b("bs_belt_Array").map(g,C);return{action_type:b("MercuryActionType").UPDATE_THREAD_THEME,thread_fbid:e.toString(),other_user_fbid:null,theme_id:c.themeId.toString(),solid_color:a,header_color:b("bs_caml_array").get(g,0),footer_color:b("bs_caml_array").get(g,g.length-1|0),gradient_colors:g,thread_id:d,reactions:f,reactionFont:h}}return{action_type:b("MercuryActionType").UPDATE_THREAD_THEME,thread_fbid:e.toString(),other_user_fbid:null,theme_id:c.themeId.toString(),solid_color:a,header_color:a,footer_color:a,gradient_colors:[],thread_id:d,reactions:f,reactionFont:h}}function E(a,c,d,e,f,g){d={action_type:b("MercuryActionType").PIN_MESSAGE,thread_fbid:d.threadFbId===null?null:c,other_user_fbid:d.otherUserFbId===null?null:c,thread_id:e,actor_fbid:f.actorFbid.toString(),pin_message_action:{message:{message_id:f.pinnedMessage.pinnedMessageId,pinning_time:f.pinnedMessage.timestamp,message:g}}};return p(a,d,"DeltaClientDelta.deltaUpdatePinnedMessage",h)}function F(a,c,d){var e=j(c.threadKey.threadFbId,c.threadKey.otherUserFbId,c.actorFbid,a),f=e[1],g=e[0];if(g===void 0){d.contents={TAG:1,_0:"DeltaClientDelta.deltaUpdatePinnedMessage",_1:"transform failed"};return}if(f===void 0){d.contents={TAG:1,_0:"DeltaClientDelta.deltaUpdatePinnedMessage",_1:"transform failed"};return}var h=b("bs_caml_option").valFromOption(f),k=i(a,h);if(k===void 0){d.contents={TAG:1,_0:"DeltaClientDelta.deltaUpdatePinnedMessage",_1:"transform failed"};return}e=c.pinnedMessage.pinnedMessageId;f=b("MessengerState.bs").getMessageFromID(a,e);if(f!==void 0)return E(a,g,h,k,c,b("bs_caml_option").valFromOption(f));else{b("MessengerMessageDFFFetcher.bs").fetch_(a,{message_id:e,thread_id:g},!1).then(function(d){E(a,g,h,k,c,d);return b("Promise").resolve(void 0)})["catch"](function(a){d.contents={TAG:1,_0:"DeltaClientDelta.deltaUpdatePinnedMessage",_1:"error on fetching pinned message payload"};return b("Promise").resolve(void 0)});return}}function G(a,c){var d=j(c.threadKey.threadFbId,c.threadKey.otherUserFbId,c.actorFbid,a),e=d[1];d=d[0];if(d===void 0)return;if(e===void 0)return;e=b("bs_caml_option").valFromOption(e);a=i(a,e);if(a!==void 0)return{action_type:b("MercuryActionType").UNPIN_MESSAGE,thread_fbid:e.threadFbId===null?null:d,other_user_fbid:e.otherUserFbId===null?null:d,thread_id:a,unpin_message_action:{message_id:c.pinnedMessage.pinnedMessageId},actor_fbid:c.actorFbid.toString()}}function H(a,c){var d=c.threadKey.threadFbId;if(d==null){var e=c.threadKey.otherUserFbId;e=e==null?[void 0,void 0]:[e.toString(),{otherUserFbId:e,threadFbId:null}]}else e=[d.toString(),{otherUserFbId:null,threadFbId:d}];d=e[1];e=e[0];if(e===void 0)return;if(d===void 0)return;a=i(a,b("bs_caml_option").valFromOption(d));if(a!==void 0)return{action_type:b("MercuryActionType").CHANGE_PINNED_STATUS,thread_fbid:e,other_user_fbid:null,is_pinned:c.isPinned,thread_id:a,thread_pin_timestamp:c.timestamp}}function I(a,c){var d=c.threadKey.threadFbId,e=c.threadKey.otherUserFbId;e=d==null?e==null?[void 0,void 0]:[e.toString(),{otherUserFbId:e,threadFbId:null}]:[d.toString(),{otherUserFbId:null,threadFbId:d}];d=e[1];e=e[0];if(e===void 0)return;if(d===void 0)return;a=i(a,b("bs_caml_option").valFromOption(d));if(a!==void 0)return{action_type:b("MercuryActionType").MUTATE_TAGS,thread_fbid:e,other_user_fbid:null,thread_id:a,messageId:c.messageId,tags_to_add:c.isSaved?["message:save"]:[],tags_to_delete:c.isSaved?[]:["message:save"]}}function J(a,c){var d=c.threadKey.threadFbId;if(d==null)return;a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").UPDATE_JOINABLE_LINK,joinable_link:c.privateGroupLink,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a}}function K(a){a=a.directives;if(a==null)return;a=b("bs_belt_Array").get(a,0);if(a===void 0)return;a=b("bs_caml_option").valFromOption(a).data;if(a==null)return;a=a.add_actions;if(a==null)return;var c=a.actions;if(c==null)return;c=b("bs_belt_Array").get(c,0);if(c===void 0)return;c=b("bs_caml_option").valFromOption(c).thread_key;if(c==null)return;var d=c.thread_fbid;c=c.other_user_fbid;if(d==null){if(c==null)return;c=c}else c=d;return{action_type:b("MercuryActionType").CREATE_OMNI_M_SUGGESTIONS,thread_fbid:b("MercuryIDs").getThreadIDFromThreadFBID(b("FBID.bs").ofStringExn(c)),other_user_fbid:null,thread_id:c,suggestions:a}}function L(a,c){var d=c.threadKey.threadFbId;if(d==null)return;a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").PROMOTE_GROUP_ADMINS,thread_fbid:d.toString(),other_user_fbid:null,promoted_admins:b("bs_belt_Array").map(c.promotedAdmins,function(a){return{admin_fbid:a.adminFbId.toString(),admin_type:a.adminType}}),thread_id:a}}function M(a,c){var d=c.threadKey.threadFbId,e=c.threadKey.otherUserFbId;if(d==null){if(e==null)return;var f=i(a,{otherUserFbId:e,threadFbId:null});if(f!==void 0)return{action_type:b("MercuryActionType").REMOVE_MESSAGE,thread_fbid:null,messageId:c.messageID,other_user_fbid:e.toString(),removed_timestamp:c.deletionTimestamp,thread_id:f,author:b("MercuryIDs").getParticipantIDFromUserID(c.senderID)};else return}e=i(a,{otherUserFbId:null,threadFbId:d});if(e!==void 0)return{action_type:b("MercuryActionType").REMOVE_MESSAGE,thread_fbid:d.toString(),messageId:c.messageID,other_user_fbid:null,removed_timestamp:c.deletionTimestamp,thread_id:e,author:b("MercuryIDs").getParticipantIDFromUserID(c.senderID)}}function N(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return;a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").UNSUBSCRIBE_STATUS_UPDATE,page_unsubscribe_status:c.unSubscribeStatus,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a}}function O(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return;a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").BLURRED_IMAGE_STATUS,blurred_image_uri:c.blurredImageUri,image_message_id:c.messageId,image_id:c.imageId,should_show:c.shouldShow,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a}}function P(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return;a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").IS_PIN_PROTECTED,thread_fbid:d.toString(),other_user_fbid:null,is_pin_protected:c.isPinProtected,thread_id:a}}function Q(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return;a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").UPDATE_CONNECTIVITY_STATUS,other_user_fbid:d.toString(),subtitle_type:c.subtitleType,thread_connectivity_status:c.threadConnectivityStatus,thread_fbid:d.toString(),thread_id:a}}function R(a,c){var d=c.threadkey.otherUserFbId;if(d==null)return;a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").ADS_CONVERSION_UPDATE,other_user_fbid:d.toString(),thread_fbid:d.toString(),thread_id:a,conversion_detection_data:{is_eligible:c.isEligible,conversion_type:c.conversionType,currency_code:c.currencyCode,currency_amount:c.currencyAmount,timestamp:c.timestamp,classifier:c.classifier,page_reply:c.pageReply,icebreaker_key:c.icebreakerKey,icebreaker_message:c.icebreakerMessage,trigger_id:c.triggerId}}}function S(a,c){var d=c.threadkey.otherUserFbId;if(d==null)return;a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").SUGGESTED_REPLY_UPDATE,other_user_fbid:d.toString(),thread_fbid:d.toString(),thread_id:a,suggested_reply_data:{suggestion_type:c.suggestionType,suggestion_content:c.suggestionContent,triggered_timestamp:c.triggeredTimestamp}}}var T=function(a){return String.fromCharCode.apply(null,a)};function U(a,c){c=JSON.parse(T(c.payload));c=b("bs_js_json").classify(c);if(typeof c==="number")return{TAG:1,_0:"DeltaClientDelta",_1:"malformed payload"};if(c.TAG!==2)return{TAG:1,_0:"DeltaClientDelta",_1:"malformed payload"};c=b("bs_js_dict").get(c._0,"deltas");if(c===void 0)return{TAG:1,_0:"DeltaClientDelta",_1:"client delta has no deltas"};c=b("bs_js_json").classify(b("bs_caml_option").valFromOption(c));if(typeof c==="number")return{TAG:1,_0:"DeltaClientDelta",_1:"delta is not an array"};if(c.TAG!==3)return{TAG:1,_0:"DeltaClientDelta",_1:"delta is not an array"};c=b("bs_belt_Array").get(c._0,0);if(c===void 0)return{TAG:1,_0:"DeltaClientDelta",_1:"client delta is missing"};c=b("bs_js_json").classify(b("bs_caml_option").valFromOption(c));if(typeof c==="number")return{TAG:1,_0:"DeltaClientDelta",_1:"client delta is not an object"};if(c.TAG!==2)return{TAG:1,_0:"DeltaClientDelta",_1:"client delta is not an object"};c=c._0;var d=!1,e={contents:0},f=b("bs_js_dict").get(c,"deltaMessageReaction");if(f!==void 0){d=!0;f=q(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaMessageReaction",h):e.contents={TAG:1,_0:"DeltaClientDelta.deltaMessageReaction",_1:"transform failed"}}f=b("bs_js_dict").get(c,"liveLocationData");if(f!==void 0&&!d){d=!0;f=s(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.liveLocationData",h):e.contents={TAG:1,_0:"DeltaClientDelta.liveLocationData",_1:"transform failed"}}f=b("bs_js_dict").get(c,"deltaUpdateGroupEventRSVPStatus");if(f!==void 0&&!d){d=!0;f=t(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdateGroupEventRSVPStatus",h):e.contents={TAG:1,_0:"DeltaClientDelta.deltaUpdateGroupEventRSVPStatus",_1:"transform failed"}}f=b("bs_js_dict").get(c,"deltaPageThreadFollowUpData");if(f!==void 0&&!d){d=!0;f=u(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaPageThreadFollowUpData",h):e.contents={TAG:1,_0:"DeltaClientDelta.deltaPageThreadFollowUpData",_1:"transform failed"}}f=b("bs_js_dict").get(c,"deltaChangeViewerStatus");if(f!==void 0&&!d){d=!0;f=w(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaChangeViewerStatus",h):e.contents={TAG:1,_0:"DeltaClientDelta.deltaChangeViewerStatus",_1:"transform failed"}}f=b("bs_js_dict").get(c,"deltaMontageDirectExpire");if(f!==void 0&&!d){d=!0;f=x(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaMontageDirectExpire",h):e.contents={TAG:1,_0:"DeltaClientDelta.deltaMontageDirectExpire",_1:"transform failed"}}f=b("bs_js_dict").get(c,"deltaMessageReply");if(f!==void 0&&!d){d=!0;f=y(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaMessageReply",h):e.contents={TAG:1,_0:"DeltaClientDelta.deltaMessageReply",_1:"transform failed"}}f=b("bs_js_dict").get(c,"deltaUpdateGroupsSyncStatus");if(f!==void 0&&!d){d=!0;f=z(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdateGroupsSyncStatus",h):e.contents={TAG:1,_0:"DeltaClientDelta.deltaUpdateGroupsSyncStatus",_1:"transform failed"}}f=b("bs_js_dict").get(c,"deltaUpdateGroupsSyncMetadata");if(f!==void 0&&!d){d=!0;f=A(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdateGroupsSyncMetadata",h):e.contents={TAG:1,_0:"DeltaClientDelta.deltaUpdateGroupsSyncMetadata",_1:"transform failed"}}f=b("bs_js_dict").get(c,"deltaGroupThreadDescription");if(f!==void 0&&!d){d=!0;f=B(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaGroupThreadDescription",h):e.contents={TAG:1,_0:"DeltaClientDelta.deltaGroupThreadDescription",_1:"transform failed"}}f=b("bs_js_dict").get(c,"deltaUpdateThreadTheme");if(f!==void 0&&!d){d=!0;f=D(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdateThreadTheme",h):e.contents={TAG:1,_0:"DeltaClientDelta.deltaUpdateThreadTheme",_1:"transform failed"}}f=b("bs_js_dict").get(c,"deltaUpdateSavedMessage");if(f!==void 0&&!d){d=!0;f=I(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdateSavedMessage",h):e.contents={TAG:1,_0:"DeltaClientDelta.deltaUpdateSavedMessage",_1:"transform failed"}}f=b("bs_js_dict").get(c,"deltaUpdatePinnedThread");if(f!==void 0&&!d){d=!0;f=H(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdatePinnedThread",h):e.contents={TAG:1,_0:"DeltaClientDelta.deltaUpdatePinnedThread",_1:"transform failed"}}f=b("bs_js_dict").get(c,"deltaUpdatePinnedMessage");if(f!==void 0&&!d){f=b("bs_caml_option").valFromOption(f);d=!0;if(f.pinnedMessageAction===0)F(a,f,e);else{f=G(a,f);f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdatePinnedMessage",h):e.contents={TAG:1,_0:"DeltaClientDelta.deltaUpdatePinnedMessage",_1:"transform failed"}}}f=b("bs_js_dict").get(c,"deltaUpdatePrivateGroupJoinableLink");if(f!==void 0&&!d){d=!0;f=J(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdatePrivateGroupJoinableLink",h):e.contents={TAG:1,_0:"DeltaClientDelta.deltaUpdatePrivateGroupJoinableLink",_1:"transform failed"}}f=b("bs_js_dict").get(c,"deltaOmniMDirectivesV2");if(f!==void 0&&!d){d=!0;f=K(b("bs_caml_option").valFromOption(f));if(f!==void 0){f=b("bs_caml_option").valFromOption(f);e.contents={TAG:0,_0:"DeltaClientDelta.deltaOmniMDirectivesV2"};b("MSuggestionActions").saveAllSuggestions(f.thread_id,f.suggestions)}else e.contents={TAG:1,_0:"DeltaClientDelta.deltaOmniMDirectivesV2",_1:"transform failed"}}f=b("bs_js_dict").get(c,"deltaPromoteGroupThreadAdmin");if(f!==void 0&&!d){d=!0;f=L(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaPromoteGroupThreadAdmin",h):e.contents={TAG:1,_0:"DeltaClientDelta.deltaPromoteGroupThreadAdmin",_1:"transform failed"}}f=b("bs_js_dict").get(c,"deltaRecallMessageData");if(f!==void 0&&!d){d=!0;f=M(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaRecallMessageData",h):e.contents={TAG:1,_0:"DeltaClientDelta.deltaRecallMessageData",_1:"transform failed"}}f=b("bs_js_dict").get(c,"deltaPageUnSubscribeStatus");if(f!==void 0&&!d){d=!0;f=N(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaPageUnSubscribeStatus",h):e.contents={TAG:1,_0:"DeltaClientDelta.deltaPageUnSubscribeStatus",_1:"transform failed"}}f=b("bs_js_dict").get(c,"deltaPageBlurredImageStatus");if(f!==void 0&&!d){d=!0;f=O(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaPageBlurredImageStatus",h):e.contents={TAG:1,_0:"DeltaClientDelta.deltaPageBlurredImageStatus",_1:"transform failed"}}f=b("bs_js_dict").get(c,"deltaPaymentPinProtectionStatusData");if(f!==void 0){if(!d){d=!0;f=P(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaPaymentPinProtectionStatusData",h):e.contents={TAG:1,_0:"DeltaClientDelta.deltaPaymentPinProtectionStatusData",_1:"transform failed"}}}else d||(e.contents={TAG:1,_0:"DeltaClientDelta",_1:"unknown delta type: "+Object.keys(c).join(",")});f=b("bs_js_dict").get(c,"deltaThreadConnectivityStatusUpdate");if(f!==void 0){if(!d){d=!0;f=Q(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaThreadConnectivityStatusUpdateData",h):e.contents={TAG:1,_0:"DeltaClientDelta.deltaThreadConnectivityStatusUpdateData",_1:"transform failed"}}}else d||(e.contents={TAG:1,_0:"DeltaClientDelta",_1:"unknown delta type: "+Object.keys(c).join(",")});f=b("bs_js_dict").get(c,"deltaMessengerAdsConversionUpdate");if(f!==void 0){if(!d){d=!0;f=R(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaMessengerAdsConversionUpdate",h):e.contents={TAG:1,_0:"DeltaClientDelta.deltaMessengerAdsConversionUpdate",_1:"transform failed"}}}else d||(e.contents={TAG:1,_0:"DeltaClientDelta",_1:"unknown delta type: "+Object.keys(c).join(",")});f=b("bs_js_dict").get(c,"deltaMessengerBusinessSuggestedReplyUpdate");if(f!==void 0){if(!d){d=!0;f=S(a,b("bs_caml_option").valFromOption(f));f!==void 0?p(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaMessengerBusinessSuggestedReplyUpdate",h):e.contents={TAG:1,_0:"DeltaClientDelta.deltaMessengerBusinessSuggestedReplyUpdate",_1:"transform failed"}}}else d||(e.contents={TAG:1,_0:"DeltaClientDelta",_1:"unknown delta type: "+Object.keys(c).join(",")});return e.contents}function V(a,c){var d=[],e=[],f=c.folders,g=0;f==null||f.length===0?g=1:b("bs_belt_Array").forEachU(f,function(a){d.push({action_type:b("MercuryGlobalActionType").MARK_ALL_READ,action_id:null,folder:b("bs_js_dict").get(b("MessengerState.bs").irisMapping,a),timestamp:parseInt(c.watermarkTimestamp,10)})});g===1&&b("bs_belt_Array").forEachU(c.threadKeys,function(d){var f=i(a,d);if(f===void 0)return;var g=parseInt(c.watermarkTimestamp,10);b("MercuryServerRequests").getForFBID(a).updateLastActionTimestamp(g);e.push({thread_id:f,action_type:b("MercuryActionType").CHANGE_READ_STATUS,other_user_fbid:d.otherUserFbId,thread_fbid:d.threadFbId,mark_as_read:!0,timestamp:g,folder:"inbox"})});return[d,e]}function W(a){if(a==null)return null;else return a.toString()}function X(a){a=a.skipBumpThread;if(!(a==null)&&a)return h;else return 1}function Y(a,c){var d;switch(c.TAG|0){case 0:var e=c._0,f=k(a,e);p(a,f,"deltaNewMessage",X(e.messageMetadata));d=0;break;case 1:f=c._0;p(a,Object.assign(k(a,f.newMessage),{action_type:b("MercuryActionType").REPLACE_MESSAGE,replaced_message_id:f.replacedMessageId}),"deltaReplaceMessage",h);d=0;break;case 2:e=c._0;f=e.threadKey.otherUserFbId;var g;if(f==null){var j=e.threadKey.threadFbId;if(j==null)g=void 0;else{var l=b("MercuryThreadIDMap").getForFBID(a);l=l.getClientIDFromServerIDNow(j.toString());g=l==null?void 0:b("bs_caml_option").some(l)}}else{j=b("FBID.bs").ofString(f.toString());g=j!==void 0?b("bs_caml_option").some(b("MercuryIDs").getThreadIDFromUserID(b("bs_caml_option").valFromOption(j))):void 0}if(g!==void 0){l={};f=parseInt(e.deliveredWatermarkTimestampMs,10);l[b("bs_caml_option").valFromOption(g)]=f;b("MercuryDispatcher").getForFBID(a).handleUpdate({delivery_receipts:l,pinned_thread_ids:[],newlyAddedClientIDs:{},actions:[],preprocessed:!0});d={TAG:0,_0:"DeltaDeliveryReceipt"}}else d={TAG:1,_0:"DeltaDeliveryReceipt",_1:"no thread id"};break;case 3:j=V(a,c._0);e=j[1];g=j[0];g.length!==0&&b("MercuryDispatcher").getForFBID(a).handleUpdate({actions:[],global_actions:g,pinned_thread_ids:[],newlyAddedClientIDs:{},preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});e.length!==0&&b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:e,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=g.length===0&&e.length===0?{TAG:1,_0:"DeltaMarkRead",_1:"no local or global action"}:{TAG:0,_0:"DeltaMarkRead"};break;case 4:var o=c._0;f=b("bs_belt_Array").keepMapU(o.threadKeys,function(c){var d=i(a,c);if(d===void 0)return;var e=parseInt(o.watermarkTimestamp,10);b("MercuryServerRequests").getForFBID(a).updateLastActionTimestamp(e);return{thread_id:d,action_type:b("MercuryActionType").CHANGE_READ_STATUS,other_user_fbid:c.otherUserFbId,thread_fbid:c.threadFbId,mark_as_read:!1,timestamp:e,folder:"inbox"}});b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:f,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d={TAG:0,_0:"DeltaMarkUnread"};break;case 5:l=c._0;p(a,Object.assign(k(a,l),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:l.messageMetadata.adminText,log_message_data:{removed_participants:[b("MercuryIDs").getParticipantIDFromUserID(l.leftParticipantFbId)]},log_message_type:b("MercuryLogMessageType").UNSUBSCRIBE}),"DeltaParticipantLeftGroupThread",X(l.messageMetadata));d=0;break;case 6:j=c._0;p(a,Object.assign(k(a,j),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:j.messageMetadata.adminText,log_message_data:{added_participants:b("bs_belt_Array").map(j.addedParticipants,function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.userFbId)})},log_message_type:b("MercuryLogMessageType").SUBSCRIBE}),"DeltaParticipantsAddedToGroupThread",X(j.messageMetadata));d=0;break;case 7:g=c._0;p(a,Object.assign(k(a,g),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:g.messageMetadata.adminText,log_message_data:{name:g.name},log_message_type:b("MercuryLogMessageType").THREAD_NAME}),"DeltaThreadName",X(g.messageMetadata));d=0;break;case 8:e=c._0;f={watermark:parseInt(e.watermarkTimestampMs,10),action:parseInt(e.actionTimestampMs,10)};l=e.threadKey.otherUserFbId;j=l==null?b("bs_caml_option").nullable_to_opt(e.actorFbId):l.toString();g=e.threadKey.otherUserFbId;if(g==null){l=e.threadKey.threadFbId;e=l==null?void 0:l.toString()}else e=g.toString();if(j!==void 0)if(e!==void 0){l=b("MercuryThreadIDMap").getForFBID(a);g=l.getClientIDFromServerIDNow(e);if(g==null)d={TAG:1,_0:"DeltaReadReceipt",_1:"No clientID for serverID: "+e};else{l={};e={};j=b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(j));e[j]=f;l[g]=e;b("MercuryDispatcher").getForFBID(a).handleUpdate({roger:l,pinned_thread_ids:[],newlyAddedClientIDs:{},actions:[],preprocessed:!0});d={TAG:0,_0:"DeltaReadReceipt"}}}else d={TAG:1,_0:"DeltaReadReceipt",_1:"serverID is invalid"};else d={TAG:1,_0:"DeltaReadReceipt",_1:"userID is invalid"};break;case 9:j=c._0;p(a,Object.assign(k(a,j),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:j.messageMetadata.adminText,log_message_data:{message_type:j.type,untypedData:j.untypedData},log_message_type:b("MercuryLogMessageType").GENERIC_ADMIN_TEXT,message_unsendability_status:b("MessageUnsendabilityStatus.bs").fromNullableString(j.messageMetadata.unsendType)}),"DeltaAdminTextMessage",X(j.messageMetadata));d=0;break;case 10:f=c._0;g=i(a,{otherUserFbId:f.threadKey.otherUserFbId,threadFbId:f.threadKey.threadFbId});e=g!==void 0?{action_type:b("MercuryActionType").DELETE_MESSAGES,message_ids:f.messageIds,other_user_fbid:W(f.threadKey.otherUserFbId),thread_fbid:W(f.threadKey.threadFbId),thread_id:g}:void 0;l=f.threadKey.threadFbId;j=f.folder;if(e!==void 0){g=b("bs_caml_option").valFromOption(e);l==null||j==null?(p(a,g,"DeltaMessageDelete",h),d=0):(j==="FOLDER_MONTAGE"?b("MontageActions").requestUpdate(l.toString()):p(a,g,"DeltaMessageDelete",h),d=0)}else d={TAG:1,_0:"DeltaMessageDelete",_1:"transform failed"};break;case 11:f=c._0;e=i(a,{otherUserFbId:f.threadKey.otherUserFbId,threadFbId:f.threadKey.threadFbId});if(e!==void 0){j=f.action;p(a,{action_type:b("MercuryActionType").CHANGE_ARCHIVED_STATUS,thread_fbid:W(f.threadKey.threadFbId),other_user_fbid:W(f.threadKey.otherUserFbId),archived:j==null?!1:j===b("MessagingThreadAction").ACTION_ARCHIVED,thread_id:e},"DeltaThreadAction",h);d=0}else d={TAG:1,_0:"DeltaThreadAction",_1:"transform failed"};break;case 12:l=b("bs_belt_Array").keepMapU(c._0.threadKeys,function(c){var d=i(a,c);if(d!==void 0)return{thread_id:d,action_type:b("MercuryActionType").DELETE_THREAD,other_user_fbid:c.otherUserFbId,thread_fbid:c.threadFbId}});b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:l,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d={TAG:0,_0:"DeltaThreadDelete"};break;case 13:g=c._0;f=i(a,{otherUserFbId:null,threadFbId:g.messageMetadata.threadKey.threadFbId});f!==void 0?(p(a,{action_type:b("MercuryActionType").REMOVE_GROUP_ADMINS,action_id:null,thread_fbid:W(g.messageMetadata.threadKey.threadFbId),other_user_fbid:null,removed_admin_ids:g.removedAdminFbIds,thread_id:f},"DeltaAdminRemovedFromGroupThread",h),d=0):d={TAG:1,_0:"DeltaAdminRemovedFromGroupThread",_1:"transform failed"};break;case 14:j=c._0;e=i(a,j.threadKey);if(e!==void 0){l=[{thread_id:e,action_type:b("MercuryActionType").CHANGE_MUTE_SETTINGS,thread_fbid:j.threadKey.threadFbId,other_user_fbid:j.threadKey.otherUserFbId,mute_until:parseInt(j.expireTime,10)}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:l,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d={TAG:0,_0:"DeltaThreadMuteSettings"}}else d={TAG:1,_0:"DeltaThreadMuteSettings",_1:"invalid thread ID"};break;case 15:g=c._0;f=g.jsonBlob;if(f==null)d={TAG:1,_0:"DeltaPagesManagerEvent",_1:"no jsonBlob"};else{try{e=JSON.parse(f)}catch(a){e={}}j=b("bs_js_json").classify(e);if(typeof j==="number"||j.TAG!==2)d={TAG:1,_0:"DeltaPagesManagerEvent",_1:"jsonBlob is not an object"};else{l=j._0;f=b("bs_js_dict").get(l,"type");if(f!==void 0){e=b("bs_js_json").classify(b("bs_caml_option").valFromOption(f));if(typeof e==="number"||e.TAG!==1)d={TAG:1,_0:"DeltaPagesManagerEvent",_1:"type is not a number"};else if(e._0===b("PagesMessagingEventType").FLAG){j=b("bs_js_dict").get(l,"flagData");if(j!==void 0){f=b("bs_js_json").classify(b("bs_caml_option").valFromOption(j));if(typeof f==="number"||f.TAG!==2)e=!1;else{l=b("bs_js_dict").get(f._0,"state");if(l!==void 0){j=b("bs_js_json").classify(b("bs_caml_option").valFromOption(l));e=typeof j==="number"?j===1:!1}else e=!1}}else e=!1;f=i(a,g.threadKey);if(f!==void 0){l=[{thread_id:f,action_type:b("MercuryActionType").CHANGE_FLAG,mark_as_flag:e,other_user_fbid:g.threadKey.otherUserFbId,thread_fbid:g.threadKey.threadFbId}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:l,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d={TAG:0,_0:"DeltaPagesManagerEvent"}}else d={TAG:1,_0:"DeltaPagesManagerEvent",_1:"threadID is invalid"}}else d={TAG:1,_0:"DeltaPagesManagerEvent",_1:"type is not pagesFlag"}}else d={TAG:1,_0:"DeltaPagesManagerEvent",_1:"no type on jsonBlob"}}}break;case 16:j=c._0;f=i(a,{otherUserFbId:null,threadFbId:j.messageMetadata.threadKey.threadFbId});f!==void 0?(p(a,{action_type:b("MercuryActionType").APPROVAL_MODE,action_id:null,thread_fbid:W(j.messageMetadata.threadKey.threadFbId),other_user_fbid:null,approval_mode:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessengerApprovalModeTypes"),j.mode)),thread_id:f},"DeltaApprovalMode",h),d=0):d={TAG:1,_0:"DeltaApprovalMode",_1:"transform failed"};break;case 17:e=c._0;g=i(a,{otherUserFbId:e.messageMetadata.threadKey.otherUserFbId,threadFbId:e.messageMetadata.threadKey.threadFbId});if(g!==void 0){l=e.inviterFbId;if(l==null){j=e.recipientFbId;if(!(j==null)){f=b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(j));p(a,{action_type:b("MercuryActionType").APPROVAL_QUEUE,action_id:null,thread_fbid:W(e.messageMetadata.threadKey.threadFbId),other_user_fbid:W(e.messageMetadata.threadKey.otherUserFbId),removed_id:e.action===b("MessengerApprovalQueueTypes").REMOVED?f:null,added_id:e.action===b("MessengerApprovalQueueTypes").REQUESTED?f:null,thread_id:g},"DeltaApprovalQueue",h)}}else{if(e.action===b("MessengerApprovalQueueTypes").REQUESTED){j=e.requestSource;var q;if(j==null)q=b("MessengerGroupRequestSource").ADD;else switch(j){case"ADD":q=b("MessengerGroupRequestSource").ADD;break;case"JOIN_THROUGH_LINK":q=b("MessengerGroupRequestSource").JOIN_THROUGH_LINK;break;default:q=b("MessengerGroupRequestSource").ADD}f={requester:{id:e.recipientFbId},inviter:{id:l},request_source:q,request_timestamp:e.requestTimestamp}}else f=null;p(a,{action_type:b("MercuryActionType").APPROVAL_QUEUE,action_id:null,thread_fbid:W(e.messageMetadata.threadKey.threadFbId),other_user_fbid:W(e.messageMetadata.threadKey.otherUserFbId),removed_group_id:e.action===b("MessengerApprovalQueueTypes").REMOVED?e.recipientFbId:null,added_group_id:f,thread_id:g},"DeltaApprovalQueue",h)}d=0}else d={TAG:1,_0:"DeltaApprovalQueue",_1:"transform failed"};break;case 18:j=c._0;p(a,k(a,j.deltaNewMessage),"DeltaGenieMessage",X(j.deltaNewMessage.messageMetadata));d=0;break;case 19:l=c._0;e=l.messageMetadata.threadKey;if(e==null)f=void 0;else{g=e.threadFbId;f=g==null?void 0:g}j=l.initiator;if(j==null)e=void 0;else{g=j.userFbId;e=g==null?void 0:g.toString()}j=i(a,{otherUserFbId:null,threadFbId:f});j!==void 0?(p(a,{action_type:b("MercuryActionType").UPDATE_RTC_CALL_DATA,thread_fbid:W(f),other_user_fbid:null,call_state:l.callState,server_info_data:l.serverInfoData,initiator_fbid:e,thread_id:j},"DeltaRTCCallData",h),d=0):d={TAG:1,_0:"DeltaRTCCallData",_1:"transform failed"};break;case 20:g=c._0;f=i(a,g.threadKey);if(f!==void 0){l=[{thread_id:f,action_type:b("MercuryActionType").CHANGE_FOLDER,other_user_fbid:g.threadKey.otherUserFbId,new_folder:b("bs_js_dict").get(b("MessengerState.bs").irisMapping,g.folder)}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:l,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d={TAG:0,_0:"DeltaThreadFolder"}}else d={TAG:1,_0:"DeltaThreadFolder",_1:"threadID is invalid"};break;case 21:e=c._0;j=i(a,e.threadKey);if(j!==void 0){f=[{thread_id:j,action_type:b("MercuryActionType").MUTATE_TAGS,messageId:e.messageId,tags_to_add:e.tagsToAdd,tags_to_delete:e.tagsToDelete}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:f,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d={TAG:0,_0:"DeltaMutateMessageTags"}}else d={TAG:1,_0:"DeltaMutateMessageTags",_1:"threadID is invalid"};break;case 22:d=U(a,c._0);break}if(typeof d==="number")return;else if(d.TAG)return n(d._0,d._1);else return m(d._0)}function a(a,c){if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").NewMessage))return Y(a,{TAG:0,_0:c});else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ReplaceMessage))return Y(a,{TAG:1,_0:c});else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").DeliveryReceipt))return Y(a,{TAG:2,_0:c});else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MarkRead))return Y(a,{TAG:3,_0:c});else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MarkUnread))return Y(a,{TAG:4,_0:c});else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ParticipantLeftGroupThread))return Y(a,{TAG:5,_0:c});else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ParticipantsAddedToGroupThread))return Y(a,{TAG:6,_0:c});else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadName))return Y(a,{TAG:7,_0:c});else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ReadReceipt))return Y(a,{TAG:8,_0:c});else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").AdminTextMessage))return Y(a,{TAG:9,_0:c});else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MessageDelete))return Y(a,{TAG:10,_0:c});else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadAction))return Y(a,{TAG:11,_0:c});else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadDelete))return Y(a,{TAG:12,_0:c});else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").AdminRemovedFromGroupThread))return Y(a,{TAG:13,_0:c});else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadMuteSettings))return Y(a,{TAG:14,_0:c});else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").PagesManagerEvent))return Y(a,{TAG:15,_0:c});else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ApprovalMode))return Y(a,{TAG:16,_0:c});else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ApprovalQueue))return Y(a,{TAG:17,_0:c});else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ClientPayload))return Y(a,{TAG:22,_0:c});else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").GenieMessage))return Y(a,{TAG:18,_0:c});else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").RtcCallData))return Y(a,{TAG:19,_0:c});else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MarkFolderSeen)){m("DeltaMarkFolderSeen");return b("MessengerState.bs").send(b("bs_caml_option").some(a),[{TAG:0,_0:{TAG:66,_0:c}}])}else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadFolder))return Y(a,{TAG:20,_0:c});else return}f.transform=a}),null);
__d("JSSet.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){return Array.from(a.values())}f.values=a}),null);
__d("MercuryTagHelper",[],(function(a,b,c,d,e,f){"use strict";f.get=a;function a(a,b){a=a.find(function(a){return a!=null?a.startsWith(b):!1});return a==null?a:a.substr(a.indexOf(":")+1)}}),null);
__d("EmojiLikeUtils",["EmojiLikeConstants","MercuryTagHelper"],(function(a,b,c,d,e,f){"use strict";f.setEmojiSize=a;f.setEmojiSource=c;f.isEmojiLike=d;f.getEmojiSize=i;function a(a,b){!a.tags?a.tags=[g(b)]:a.tags.push(g(b));return a}function g(a){var c=b("EmojiLikeConstants").TAG_PREFIX_NEW;return c+":"+a}function c(a,b){!a.tags?a.tags=[h(b)]:a.tags.push(h(b));return a}function h(a){return b("EmojiLikeConstants").SOURCE_TAG_PREFIX+":"+a}function d(a){return i(a)!=null}function i(a){if(!a.tags)return null;var c=b("MercuryTagHelper").get(a.tags,b("EmojiLikeConstants").TAG_PREFIX_NEW);return c?c:b("MercuryTagHelper").get(a.tags,b("EmojiLikeConstants").TAG_PREFIX_OLD)}}),null);
__d("MercuryAttachment",["cx","EmojiLikeUtils","MercuryAudioType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){return a===Object(a)},i="_1c_u",j=new Set(["animated_image","photo","video","third_party_sticker"]),k={getAttachIconClass:function(a){switch(a){case"attach:image":return"_y2-";case"attach:video":return"_y2_";case"attach:music":return"_y30";case"attach:voice":return"_y31";case"attach:text":return"_y32";case"attach:pdf":return"_1k9k";case"attach:richtext":return"_1k9l";case"attach:spreadsheet":return"_1k9p";case"attach:presentation":return"_1k9r";case"attach:archive":return"_1k9s";case"attach:ms:word":return"_y33";case"attach:ms:xls":return"_y34";case"attach:ms:ppt":return"_y35"}return"_y36"},getAttachIconClassByMime:function(a){return this.getAttachIconClass(this.getAttachTypeByMime(a))},getAttachTypeByMime:function(a){if(!a)return"attach:unknown";if(a.startsWith("image"))return"attach:image";else if(a.startsWith("video"))return"attach:video";else if(a.startsWith("audio"))return"attach:music";else if(a.startsWith("text/plain"))return"attach:text";else if(a=="text/pdf"||a=="application/pdf"||a=="application/vnd.pdf"||a=="application/x-pdf")return"attach:pdf";else if(a=="text/richtext"||a=="application/rtf"||a=="application/x-iwork-pages-sffkey")return"attach:richtext";else if(a=="text/csv"||a=="application/x-iwork-numbers-sffkey")return"attach:spreadsheet";else if(a=="application/x-iwork-keynote-sffkey")return"attach:presentation";else if(a=="application/vnd.ms-cab-compressed"||a=="application/x-7z-compressed"||a=="application/x-ace-compressed"||a=="application/x-apple-diskimage"||a=="application/x-compress"||a=="application/x-compressed"||a=="application/x-gzip"||a=="application/x-rar-compressed"||a=="application/x-tar"||a=="application/x-zip-compressed"||a=="application/zip")return"attach:archive";else if(a=="application/msword"||a.startsWith("application/vnd.ms-word")||a.startsWith("application/vnd.openxmlformats-officedocument.wordprocessingml"))return"attach:ms:word";else if(a.startsWith("application/vnd.ms-excel")||a.startsWith("application/vnd.openxmlformats-officedocument.spreadsheetml"))return"attach:ms:xls";else if(a.startsWith("application/vnd.ms-powerpoint")||a.startsWith("application/vnd.openxmlformats-officedocument.presentationml"))return"attach:ms:ppt";else return"attach:unknown"},convertRaw:function(a){var b=[];for(var c=0;c<a.length;c++){var d=a[c];if(d.attach_type==="photo")b.push(d);else if(d.filename){var e=k.getAttachTypeByMime(d.filetype),f={};f.attach_type="file";f.name=d.filename;f.icon_type=e;f.url="";b.push(f)}}return b},get:function(a){var c=[];a.attachments?c=a.attachments:a.raw_attachments&&(c=this.convertRaw(a.raw_attachments));var d=b("EmojiLikeUtils").getEmojiSize(a);d&&(c=c.concat([{attach_type:"emoji_like",size:d}]));if(!(a.attachments&&a.attachments.length>0)){if(a.sticker_id)return c.concat([{attach_type:"sticker"}]);if(a.preview_attachments&&a.preview_attachments.length>0)return c.concat(a.preview_attachments)}return c},resizeContain:function(a,b){var c=a.width/a.height,d=b.width/b.height;if(d<c)return{width:Math.ceil(Math.min(a.height*d,b.width)),height:Math.ceil(Math.min(a.height,b.height))};else return{width:Math.ceil(Math.min(a.width,b.width)),height:Math.ceil(Math.min(a.width/d,b.height))}},isBubblePreferred:function(a){return this.isFileAttachment(a)},isPhotoAttachment:function(a){return(this==null?void 0:this.getAttachTypeByMime)&&this.getAttachTypeByMime(a.mime_type)==="attach:pdf"?!1:!!(a.attach_type=="photo"||a.attach_type=="animated_image"||a.attach_type=="third_party_sticker"||a.attach_type=="file"&&a.preview_url)},isPhotoGroupAttachment:function(a){return j.has(a.attach_type)},isSinglePhotoGroupAttachment:function(a){return!!(a.attachments&&a.attachments.length===1&&a.attachments[0]&&this.isPhotoGroupAttachment(a.attachments[0]))},isVideoAttachment:function(a){return a.attach_type=="video"},isShareAttachment:function(a){return a.attach_type=="share"},isFileAttachment:function(a){return a.attach_type=="file"},isErrorAttachment:function(a){return a.attach_type=="error"},isStickerAttachment:function(a){return a.attach_type=="sticker"},isEmojiLikeAttachment:function(a){return a.attach_type==="emoji_like"},isVoiceAttachment:function(a){return!a.metadata?!1:a.metadata.type===b("MercuryAudioType").AudioClip||a.metadata.type===b("MercuryAudioType").VoiceMessageWithTranscript},hasAttribution:function(a){return!!a.app_attribution},isLightweightActionAttachment:function(a){return!!(k.isShareAttachment(a)&&a.share&&a.share.target!=null&&a.share.target.lwa_type!=null)},isSingleVideoAttachment:function(a){var b=this;a=this.get(a).filter(h).filter(function(a){return b.isVideoAttachment(a)});return a.length===1},isSharedVideoAttachment:function(a){a=a.attach_type==="share"&&a.share&&a.share.subattachments&&a.share.subattachments[0];return!!(a&&a.target&&a.target.video_id)},isGenieSharedVideoAttachment:function(a){return!!(a.attach_type==="share"&&a.share&&a.share.style_list.indexOf("genie_message")>-1&&a.share.target&&a.share.target.attachment&&this.isSharedVideoAttachment(a.share.target.attachment))},isSharedVideoAttachmentMessage:function(a){var b=this;a=this.get(a).filter(h).filter(function(a){return b.isSharedVideoAttachment(a)||b.isGenieSharedVideoAttachment(a)});return a.length===1},getVideoElem:function(a,b){b=b.getMessageElement(a);if(!b)return null;a=b.getElementsByClassName(i);return a&&a.length?a[0]:b}};e.exports=k}),null);
__d("MercuryDisplayTimeFilterMessageRenderer",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={renderFilteredContent:function(a){if(a.is_filtered_content_bh)return g._("Tin nh\u1eafn n\u00e0y \u0111\u00e3 b\u1ecb g\u1ee1 do ch\u1ee9a li\u00ean k\u1ebft vi ph\u1ea1m Ti\u00eau chu\u1ea9n c\u1ed9ng \u0111\u1ed3ng c\u1ee7a ch\u00fang t\u00f4i.");if(a.is_filtered_content_account)return g._("Tin nh\u1eafn n\u00e0y \u0111\u00e3 t\u1ea1m th\u1eddi b\u1ecb g\u1ee1 v\u00ec t\u00e0i kho\u1ea3n c\u1ee7a ng\u01b0\u1eddi g\u1eedi c\u1ea7n ph\u1ea3i \u0111\u01b0\u1ee3c x\u00e1c minh.");if(a.is_filtered_content_quasar)return g._("Tin nh\u1eafn n\u00e0y \u0111\u00e3 b\u1ecb g\u1ee1 v\u00ec c\u00f3 ch\u1ee9a n\u1ed9i dung b\u1ecb ch\u1eb7n ho\u1eb7c c\u00f3 h\u1ea1i.");return a.is_filtered_content_invalid_app?g._("Tin nh\u1eafn n\u00e0y \u0111\u00e3 b\u1ecb g\u1ee1 v\u00ec \u1ee9ng d\u1ee5ng g\u1eedi tin nh\u1eafn b\u1ecb ch\u1eb7n g\u1eedi tin."):g._("Tin nh\u1eafn n\u00e0y \u0111\u00e3 t\u1ea1m th\u1eddi b\u1ecb g\u1ee1 v\u00ec t\u00e0i kho\u1ea3n c\u1ee7a ng\u01b0\u1eddi g\u1eedi c\u1ea7n \u0111\u01b0\u1ee3c x\u00e1c minh ho\u1eb7c t\u00e0i kho\u1ea3n \u0111\u00f3 \u0111\u00e3 b\u1ecb x\u00e1c \u0111\u1ecbnh l\u00e0 l\u1ea1m d\u1ee5ng.")}};e.exports=a}),null);
__d("MercuryMessageClientState",[],(function(a,b,c,d,e,f){a=Object.freeze({DO_NOT_SEND_TO_SERVER:"do_not_send_to_server",SEND_TO_SERVER:"send_to_server"});b=a;e.exports=b}),null);
__d("MercurySyncEventsProxy",["Arbiter","ChannelConstants","LogHistory","MercuryMessagingLightswitch","MercurySingletonProvider","MessengerMQTTConnectionEvents"],(function(a,b,c,d,e,f){"use strict";var g=b("LogHistory").getInstance("mercury_event_proxy"),h={DELTA:"DELTA",FAKE_DFF:"FAKE_DFF",FLOW:"FLOW",FLOW_REJECT:"FLOW_REJECT",INIT:"MercurySyncDeltaHandler/initSeqID",CONNECTED:"CONNECTED",RECONNECTING:"RECONNECTING",SHUTDOWN:"SHUTDOWN",TYP:"TYP"};a=function(){a.getArbiterTypeForFBID=function(a,b){return a+"/"+b};a.getForFBID=function(a){return i.getForFBID(a)};a.get=function(){return i.get()};function a(a){this.$2=[],this.$1=a,this.init()}var c=a.prototype;c.getArbiterType=function(b){return a.getArbiterTypeForFBID(this.$1,b)};c.init=function(){var a=this,c,d;this.$2.forEach(function(a){return b("Arbiter").unsubscribe(a)});this.$2=[(c=b("Arbiter")).subscribe((d=b("MessengerMQTTConnectionEvents")).DELTA_EVENT,function(c){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.DELTA)].concat(e))}),c.subscribe(d.STREAM_CONNECT,function(c){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.CONNECTED)].concat(e))}),c.subscribe(d.STREAM_DISCONNECT,function(c){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.SHUTDOWN)].concat(e))}),c.subscribe(d.STREAM_CONNECTING,function(c){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.RECONNECTING)].concat(e))}),c.subscribe(b("ChannelConstants").getArbiterType(b("ChannelConstants").FAKE_DFF),function(c){b("MercuryMessagingLightswitch").guard(function(){g.debug("fakedff",JSON.stringify({fbid:a.$1}))});for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.FAKE_DFF)].concat(e))}),c.subscribe(d.TYP,function(c){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.TYP)].concat(e))})]};return a}();e.exports=a;a.Events=h;var i=new(b("MercurySingletonProvider"))(a)}),null);
__d("MercuryThreadInfo",["MercuryIDs"],(function(a,b,c,d,e,f){"use strict";f.canReply=a;f.getMuteSetting=g;f.isEmptyLocalThread=h;f.isMuted=c;f.areMentionsMuted=d;f.areReactionsMuted=e;f.isNewEmptyLocalThread=i;f.showSettingsMenu=j;f.isColdOpen=k;function a(a){return!!(a.is_subscribed&&(a.can_reply===void 0||a.can_reply)&&!a.has_email_participant&&!a.read_only)}function g(a){return a.mute_until==null?void 0:a.mute_until}function h(a){return b("MercuryIDs").tokenize(a.thread_id).type==="root"&&!a.timestamp}function c(a){a=g(a);return a!=null&&(a>Date.now()/1e3||a===-1)}function d(a){return a.mentions_mute_mode===1}function e(a){return a.reactions_mute_mode===1}function i(a){return!!(h(a)&&a.participants&&a.participants.length===0)}function j(a){return!!((a.can_reply||!a.cannot_reply_reason||a.cannot_reply_reason.toLowerCase()==="blocked"||a.cannot_reply_reason.toLowerCase()==="messenger_blockee")&&!a.has_email_participant&&!a.read_only&&a.is_subscribed)}function k(a){return!!(a.is_canonical_user&&(a.message_count===0||!a.timestamp))}}),null);
__d("ThreadConnectivityStatusGraphQLType.bs",[],(function(a,b,c,d,e,f){"use strict";a="UNCONNECTED";b="IMPLICIT_OR_TWO_WAY_MESSAGING";f.unconnected=a;f.implicitOrTwoWayMessaging=b}),null);
__d("ThreadConnectivityStatusGraphQLType.re",["ThreadConnectivityStatusGraphQLType.bs"],(function(a,b,c,d,e,f){a=b("ThreadConnectivityStatusGraphQLType.bs").unconnected;f.unconnected=a;c=b("ThreadConnectivityStatusGraphQLType.bs").implicitOrTwoWayMessaging;f.implicitOrTwoWayMessaging=c}),null);
__d("getPageIDFromThreadID",["FBIDCheck","MercuryIDs"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){a=b("MercuryIDs").getUserIDFromThreadID(a);return!a||b("FBIDCheck").isUser_deprecated(a)?null:a}}),null);
__d("MessageRequestUtils",["CurrentUser","MercuryIDs","MessagingTag","ThreadConnectivityStatusGraphQLType.re","getPageIDFromThreadID"],(function(a,b,c,d,e,f){"use strict";f.isMessageRequest=a;f.isFiltered=c;f.shouldShowComposerPendingActions=d;f.shouldShowUnconnectedThreadInfoText=e;f.shouldSendTypingIndicators=g;function a(a){return(a.folder===b("MessagingTag").PENDING||a.folder===b("MessagingTag").OTHER)&&a.can_reply}function c(a){return a.folder===b("MessagingTag").OTHER}function d(a){return this.isMessageRequest(a)&&(b("MercuryIDs").isGroupChat(a.thread_id)||!!b("getPageIDFromThreadID")(a.thread_id)||b("CurrentUser").isWorkUser())}function e(a){var c;return!b("CurrentUser").isWorkUser()&&b("CurrentUser").getID()!==a.other_user_fbid&&((c=a.thread_connectivity_data)==null?void 0:c.connectivity_status)===b("ThreadConnectivityStatusGraphQLType.re").unconnected&&((c=a.thread_connectivity_data)==null?void 0:c.first_sender_id)===a.other_user_fbid}function g(a){if(!a)return!1;if(this.isMessageRequest(a))return!1;return b("CurrentUser").isWorkUser()||b("MercuryIDs").isGroupChat(a.thread_id)?!0:((a=a.thread_connectivity_data)==null?void 0:a.connectivity_status)===b("ThreadConnectivityStatusGraphQLType.re").implicitOrTwoWayMessaging}}),null);
__d("MessengerJoinableModeType",[],(function(a,b,c,d,e,f){a=Object.freeze({PRIVATE:0,JOINABLE:1});e.exports=a}),null);
__d("MessengerThreadUtils.bs",["FBID.bs","bs_caml_obj","MercuryIDs","CurrentUser","ImmutableObject","MessengerParticipants.bs","MercuryParticipantTypes","MessengerJoinableModeType","MessengerObjectAssociationType","MessengerThreadCannotReplyReason"],(function(a,b,c,d,e,f){"use strict";function g(a,c){return c.filter(function(c){return b("bs_caml_obj").caml_notequal(c,a)}).length<=1}function h(a,c,d,e){var f=b("MercuryIDs").tokenize(c),h=f.type;f=f.value;var i=d.find(function(b){return b!==a});i=i!==void 0?b("MessengerParticipants.bs").getNow(i):null;var j=b("CurrentUser").isWorkUser();j=!(i==null)&&j&&i.work_foreign_entity_info==null&&i.user_type===b("MercuryParticipantTypes").USER?[!1,b("MessengerThreadCannotReplyReason").RECIPIENTS_INVALID]:[!0,null];return new(b("ImmutableObject"))({thread_id:c,participants:Array.from(d),preloaded_participants:[],admins:{},name:"",snippet:"",snippet_sender:null,unread_count:e==null?0:e,message_count:0,image_src:null,square_image_src:null,timestamp:0,other_user_fbid:h==="user"?b("FBID.bs").ofStringExn(f):null,is_canonical_user:h==="user",is_canonical:g(a,d),is_subscribed:!0,is_other_recipient_page:!1,folder:"inbox",is_archived:!1,is_page_follow_up:!1,is_page_unresponded_thread:!1,admin_model_status:null,approval_mode:0,approval_queue_ids:[],associated_object:null,can_reply:j[0],cannot_reply_reason:j[1],can_viewer_report:!1,comm_item_owners:null,comm_source_id:null,comm_status:null,comm_icon_type:[],composer_input_disabled:null,custom_like_icon:null,custom_nickname:null,customization_enabled:!1,description:null,ephemeral_ttl_mode:0,footer_color:null,game_id:null,group_approval_queue:null,work_associated_group:null,pinned_messages:null,groups_sync_status:null,group_thread_subtype:null,has_email_participant:!1,has_montage:!1,unread_mentions_count:0,header_color:null,is_canonical_neo_user:!1,is_from_weak_entry_point:!1,is_pin_protected:!1,is_pinned:!1,is_thread_queue_enabled:!1,joinable_mode:{mode:0,link:""},last_message_timestamp:0,last_message_id:null,last_message_type:null,last_read_timestamp:0,last_message_admin_text_type:null,last_message_unsendability_status:null,lightweight_event:null,lightweight_events:{},marketplace_thread_data:null,mentions_mute_mode:0,mute_until:null,object_association_type:null,page_comm_item_id:null,page_thread_info:null,page_unsubscribe_status:!1,participant_add_mode:null,participants_event_status:null,reactions_mute_mode:0,read_only:!1,recipients_loadable:!1,rtc_call_data:null,server_timestamp:0,snippet_attachments:[],solid_color:null,subtitle:null,theme_id:null,reactions:void 0,thread_connectivity_data:null,thread_fbid:null,thread_pin_timestamp:null,thread_type:null,thread_unsendability_status:null,gradient_colors:[],accessibility_label:null,reverse_gradients_for_radial:null,joinable_link:null,linked_mentorship_programs:null,is_business_page_active:!1,thread_associated_job_applications:null,thread_associated_page_admin:null,graphql_token:null,conversion_detection_data:null,suggested_reply_data:null})}function a(a,c,d,e){a=h(a,c,d,null);return b("ImmutableObject").set(a,{associated_object:e,name:e.name,joinable_mode:{mode:b("MessengerJoinableModeType").JOINABLE,link:""},object_association_type:b("MessengerObjectAssociationType").GENERAL_CHAT})}f.isCanonicalFromInitialParticipants=g;f.createNewLocalThread=h;f.createNewLocalGroupGeneralThread=a}),null);
__d("ParticipantId.bs",["bs_string","bs_belt_Id"],(function(a,b,c,d,e,f){"use strict";a=b("bs_string").compare;c=b("bs_belt_Id").MakeComparable({cmp:a});d=c.cmp;f.cmp=d}),null);
__d("RemoteAction.bs",["bs_curry"],(function(a,b,c,d,e,f){"use strict";function g(a){}function a(a){return{send:g}}function c(a,b){if(b.send===g){b.send=a;return b}}function d(a){a.send=g}function e(a,c){return b("bs_curry")._1(a.send,c)}f.create=a;f.subscribe=c;f.unsubscribe=d;f.send=e}),null);
__d("ThreadConnectivityStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({UNCONNECTED:0,IMPLICIT_OR_TWO_WAY_MESSAGING:1});e.exports=a}),null);
__d("ThreadConnectivityStatus.bs",["bs_caml_obj","ThreadConnectivityStatus","ThreadConnectivityStatusGraphQLType.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){if(b("bs_caml_obj").caml_equal(a,b("ThreadConnectivityStatus").UNCONNECTED))return b("ThreadConnectivityStatusGraphQLType.bs").unconnected;else return b("ThreadConnectivityStatusGraphQLType.bs").implicitOrTwoWayMessaging}f.toGraphQLValue=a}),null);
__d("ThreadId.bs",["bs_string","bs_belt_Id"],(function(a,b,c,d,e,f){"use strict";a=b("bs_string").compare;c=b("bs_belt_Id").MakeComparable({cmp:a});d=c.cmp;f.cmp=d}),null);
__d("TypingStates",[],(function(a,b,c,d,e,f){a=Object.freeze({INACTIVE:0,TYPING:1,QUITTING:2});e.exports=a}),null);
__d("XMercuryThreadLikeIconController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/like_icon/",{emoji:{type:"String",defaultValue:""}})}),null);
__d("bs_belt_internalAVLtree",["bs_curry","bs_caml_option","bs_belt_SortArray"],(function(a,b,c,d,e,f){"use strict";function g(a){if(a!==void 0)return a.h;else return 0}function h(a){if(a!==void 0)return{k:a.k,v:a.v,h:a.h,l:h(a.l),r:h(a.r)};else return a}function i(a,b,c,d){var e=g(a),f=g(d);return{k:b,v:c,h:e>=f?e+1|0:f+1|0,l:a,r:d}}function j(a,b){return{k:a,v:b,h:1,l:void 0,r:void 0}}function k(a,b){if(b!==void 0)if(a!==void 0)return a.h>=b.h;else return!1;else return!0}function a(a,b){if(a.v===b)return a;else return{k:a.k,v:b,h:a.h,l:a.l,r:a.r}}function l(a,b,c,d){var e=a!==void 0?a.h:0,f=d!==void 0?d.h:0;if(e>(f+2|0)){var h=a.l,j=a.r;if(g(h)>=g(j))return i(h,a.k,a.v,i(j,b,c,d));else return i(i(h,a.k,a.v,j.l),j.k,j.v,i(j.r,b,c,d))}if(f<=(e+2|0))return{k:b,v:c,h:e>=f?e+1|0:f+1|0,l:a,r:d};h=d.l;j=d.r;if(g(j)>=g(h))return i(i(a,b,c,h),d.k,d.v,j);else return i(i(a,b,c,h.l),h.k,h.v,i(h.r,d.k,d.v,j))}function m(a){while(!0){var b=a,c=b.l;if(c===void 0)return b.k;a=c;continue}}function c(a){if(a!==void 0)return b("bs_caml_option").some(m(a))}function d(a){if(a!==void 0)return m(a)}function n(a){while(!0){var b=a,c=b.r;if(c===void 0)return b.k;a=c;continue}}function e(a){if(a!==void 0)return b("bs_caml_option").some(n(a))}function o(a){if(a!==void 0)return n(a)}function p(a){while(!0){var b=a,c=b.l;if(c===void 0)return[b.k,b.v];a=c;continue}}function q(a){if(a!==void 0)return p(a)}function r(a){if(a!==void 0)return p(a)}function s(a){while(!0){var b=a,c=b.r;if(c===void 0)return[b.k,b.v];a=c;continue}}function t(a){if(a!==void 0)return s(a)}function aa(a){if(a!==void 0)return s(a)}function u(a,b,c){var d=a.l;if(d!==void 0)return l(u(d,b,c),a.k,a.v,a.r);else{b.contents=a.k;c.contents=a.v;return a.r}}function ba(a){return a===void 0}function v(a,b){while(!0){var c=b,d=a;if(d===void 0)return c;b={hd:d,tl:c};a=d.l;continue}}function w(a,b){if(a===void 0)return;var c=w(a.l,b);if(c!==void 0)return c;c=a.k;var d=a.v,e=b(c,d);if(e)return[c,d];e=w(a.r,b);if(e!==void 0)return e}function ca(a,c){return w(a,b("bs_curry").__2(c))}function x(a,b){while(!0){var c=a;if(c===void 0)return;x(c.l,b);b(c.k,c.v);a=c.r;continue}}function da(a,c){return x(a,b("bs_curry").__2(c))}function y(a,b){if(a===void 0)return;var c=y(a.l,b),d=b(a.v);b=y(a.r,b);return{k:a.k,v:d,h:a.h,l:c,r:b}}function ea(a,c){return y(a,b("bs_curry").__1(c))}function z(a,b){if(a===void 0)return;var c=a.k,d=z(a.l,b),e=b(c,a.v);b=z(a.r,b);return{k:c,v:e,h:a.h,l:d,r:b}}function fa(a,c){return z(a,b("bs_curry").__2(c))}function A(a,b,c){while(!0){var d=b,e=a;if(e===void 0)return d;var f=e.k,g=e.v,h=e.l;e=e.r;b=c(A(h,d,c),f,g);a=e;continue}}function ga(a,c,d){return A(a,c,b("bs_curry").__3(d))}function B(a,b){while(!0){var c=a;if(c===void 0)return!0;if(!b(c.k,c.v))return!1;if(!B(c.l,b))return!1;a=c.r;continue}}function ha(a,c){return B(a,b("bs_curry").__2(c))}function C(a,b){while(!0){var c=a;if(c===void 0)return!1;if(b(c.k,c.v))return!0;if(C(c.l,b))return!0;a=c.r;continue}}function ia(a,c){return C(a,b("bs_curry").__2(c))}function D(a,b,c){if(a!==void 0)return l(D(a.l,b,c),a.k,a.v,a.r);else return j(b,c)}function E(a,b,c){if(a!==void 0)return l(a.l,a.k,a.v,E(a.r,b,c));else return j(b,c)}function F(a,b,c,d){if(a===void 0)return D(d,b,c);if(d===void 0)return E(a,b,c);var e=a.k,f=a.v,g=a.h,h=a.l,j=a.r,k=d.k,m=d.v,n=d.h,o=d.l,p=d.r;if(g>(n+2|0))return l(h,e,f,F(j,b,c,d));else if(n>(g+2|0))return l(F(a,b,c,o),k,m,p);else return i(a,b,c,d)}function G(a,b){if(a===void 0)return b;if(b===void 0)return a;var c={contents:b.k},d={contents:b.v};b=u(b,c,d);return F(a,c.contents,d.contents,b)}function ja(a,c,d,e){if(d!==void 0)return F(a,c,b("bs_caml_option").valFromOption(d),e);else return G(a,e)}function H(a,b){if(a===void 0)return;var c=a.k,d=a.v,e=H(a.l,b),f=b(c,d);a=H(a.r,b);if(f)return F(e,c,d,a);else return G(e,a)}function ka(a,c){return H(a,b("bs_curry").__2(c))}function I(a,c){if(a===void 0)return;var d=a.k,e=a.v,f=I(a.l,c);e=c(d,e);a=I(a.r,c);if(e!==void 0)return F(f,d,b("bs_caml_option").valFromOption(e),a);else return G(f,a)}function la(a,c){return I(a,b("bs_curry").__2(c))}function J(a,b){if(a===void 0)return[void 0,void 0];var c=a.k,d=a.v,e=J(a.l,b),f=e[1];e=e[0];var g=b(c,d);a=J(a.r,b);b=a[1];a=a[0];if(g)return[F(e,c,d,a),G(f,b)];else return[G(e,a),F(f,c,d,b)]}function ma(a,c){return J(a,b("bs_curry").__2(c))}function K(a){var b=a.l;a=a.r;b=b!==void 0?K(b):0;a=a!==void 0?K(a):0;return(1+b|0)+a|0}function L(a){if(a!==void 0)return K(a);else return 0}function M(a,b){while(!0){var c=b,d=a;if(d===void 0)return c;var e=d.k,f=d.v,g=d.l;d=d.r;b={hd:[e,f],tl:M(d,c)};a=g;continue}}function na(a){return M(a,0)}function N(a){while(!0){var b=a;if(b===void 0)return;var c=b.l;b=b.r;var d=g(c)-g(b)|0;if(!(d<=2&&d>=-2))throw{RE_EXN_ID:"Assert_failure",_1:["belt_internalAVLtree.ml",373,4],Error:new Error()};N(c);a=b;continue}}function O(a,b,c){while(!0){var d=b,e=a,f=e.k,g=e.l;e=e.r;g=g!==void 0?O(g,d,c):d;c[g]=f;d=g+1|0;if(e===void 0)return d;b=d;a=e;continue}}function P(a,b,c){while(!0){var d=b,e=a,f=e.l,g=e.r;f=f!==void 0?P(f,d,c):d;c[f]=e.v;d=f+1|0;if(g===void 0)return d;b=d;a=g;continue}}function Q(a,b,c){while(!0){var d=b,e=a,f=e.l,g=e.k,h=e.r;f=f!==void 0?Q(f,d,c):d;c[f]=[g,e.v];d=f+1|0;if(h===void 0)return d;b=d;a=h;continue}}function oa(b){if(b===void 0)return[];var a=K(b);a=new Array(a);Q(b,0,a);return a}function pa(b){if(b===void 0)return[];var a=K(b);a=new Array(a);O(b,0,a);return a}function qa(b){if(b===void 0)return[];var a=K(b);a=new Array(a);P(b,0,a);return a}function R(a,b,c){switch(c){case 0:return;case 1:var d=a[b];return j(d[0],d[1]);case 2:d=a[b];var e=a[b-1|0];e=e;d=d;return{k:e[0],v:e[1],h:2,l:j(d[0],d[1]),r:void 0};case 3:e=a[b];d=a[b-1|0];var f=a[b-2|0];f=f;d=d;e=e;return{k:d[0],v:d[1],h:2,l:j(e[0],e[1]),r:j(f[0],f[1])};default:d=c/2|0;e=R(a,b,d);f=a[b-d|0];a=R(a,(b-d|0)-1|0,(c-d|0)-1|0);return i(e,f[0],f[1],a)}}function S(a,b,c){switch(c){case 0:return;case 1:var d=a[b];return j(d[0],d[1]);case 2:d=a[b];var e=a[b+1|0];e=e;d=d;return{k:e[0],v:e[1],h:2,l:j(d[0],d[1]),r:void 0};case 3:e=a[b];d=a[b+1|0];var f=a[b+2|0];f=f;d=d;e=e;return{k:d[0],v:d[1],h:2,l:j(e[0],e[1]),r:j(f[0],f[1])};default:d=c/2|0;e=S(a,b,d);f=a[b+d|0];a=S(a,(b+d|0)+1|0,(c-d|0)-1|0);return i(e,f[0],f[1],a)}}function ra(a){return S(a,0,a.length)}function T(a,b,c,d){var e=L(a),f=L(b);if(e===f){a=v(a,0);b=v(b,0);while(!0){var g=b,h=a;if(!h)return 0;if(!g)return 0;var i=g.hd,j=h.hd,k=c(j.k,i.k);if(k!==0)return k;k=d(j.v,i.v);if(k!==0)return k;b=v(i.r,g.tl);a=v(j.r,h.tl);continue}}else if(e<f)return-1;else return 1}function sa(a,c,d,e){return T(a,c,d,b("bs_curry").__2(e))}function U(a,b,c,d){var e=L(a),f=L(b);if(e===f){e=v(a,0);f=v(b,0);while(!0){a=f;b=e;if(!b)return!0;if(!a)return!0;var g=a.hd,h=b.hd;if(!(c(h.k,g.k)===0&&d(h.v,g.v)))return!1;f=v(g.r,a.tl);e=v(h.r,b.tl);continue}}else return!1}function ta(a,c,d,e){return U(a,c,d,b("bs_curry").__2(e))}function ua(c,d,a){while(!0){var e=c;if(e===void 0)return;var f=e.k;f=a(d,f);if(f===0)return b("bs_caml_option").some(e.v);c=f<0?e.l:e.r;continue}}function va(b,c,a){while(!0){var d=b;if(d===void 0)return;var e=d.k;e=a(c,e);if(e===0)return d.v;b=e<0?d.l:d.r;continue}}function wa(b,c,a){while(!0){var d=b;if(d!==void 0){var e=d.k;e=a(c,e);if(e===0)return d.v;b=e<0?d.l:d.r;continue}throw{RE_EXN_ID:"Not_found",Error:new Error()}}}function xa(b,c,d,a){while(!0){var e=b;if(e===void 0)return d;var f=e.k;f=a(c,f);if(f===0)return e.v;b=f<0?e.l:e.r;continue}}function ya(b,c,a){while(!0){var d=b;if(d===void 0)return!1;var e=d.k;e=a(c,e);if(e===0)return!0;b=e<0?d.l:d.r;continue}}function V(a){var b=a.l;a.l=b.r;b.r=a;var c=g(a.l),d=g(a.r);a.h=(c>d?c:d)+1|0;c=g(b.l);d=a.h;b.h=(c>d?c:d)+1|0;return b}function W(a){var b=a.r;a.r=b.l;b.l=a;var c=g(a.l),d=g(a.r);a.h=(c>d?c:d)+1|0;c=g(b.r);d=a.h;b.h=(c>d?c:d)+1|0;return b}function za(a){var b=a.l;b=W(b);a.l=b;return V(a)}function Aa(a){var b=a.r;b=V(b);a.r=b;return W(a)}function X(a){var b=g(a.l),c=g(a.r);a.h=(b>c?b:c)+1|0;return a}function Y(a){var b=a.l,c=a.r,d=g(b),e=g(c);if(d>(2+e|0)){var f=b.l;b=b.r;if(k(f,b))return X(V(a));else return X(za(a))}if(e>(2+d|0)){f=c.l;b=c.r;if(k(b,f))return X(W(a));else return X(Aa(a))}a.h=(d>e?d:e)+1|0;return a}function Z(b,c,d,a){if(b===void 0)return j(c,d);var e=b.k;e=a(c,e);if(e===0){b.v=d;return b}var f=b.l,g=b.r;if(e<0){e=Z(f,c,d,a);b.l=e}else b.r=Z(g,c,d,a);return Y(b)}function Ba(c,a){var d=c.length;if(d===0)return;var e=b("bs_belt_SortArray").strictlySortedLengthU(c,function(b,c){return a(b[0],c[0])<0}),f;e>=0?f=S(c,0,e):(e=-e|0,f=R(c,e-1|0,e));for(var e=e;e<d;++e){var g=c[e];f=Z(f,g[0],g[1],a)}return f}function $(a,b){var c=b.r,d=b.l;if(d!==void 0){b.l=$(a,d);return Y(b)}else{a.k=b.k;a.v=b.v;return c}}f.copy=h;f.create=i;f.bal=l;f.singleton=j;f.updateValue=a;f.minKey=c;f.minKeyUndefined=d;f.maxKey=e;f.maxKeyUndefined=o;f.minimum=q;f.minUndefined=r;f.maximum=t;f.maxUndefined=aa;f.removeMinAuxWithRef=u;f.isEmpty=ba;f.stackAllLeft=v;f.findFirstByU=w;f.findFirstBy=ca;f.forEachU=x;f.forEach=da;f.mapU=y;f.map=ea;f.mapWithKeyU=z;f.mapWithKey=fa;f.reduceU=A;f.reduce=ga;f.everyU=B;f.every=ha;f.someU=C;f.some=ia;f.join=F;f.concat=G;f.concatOrJoin=ja;f.keepSharedU=H;f.keepShared=ka;f.keepMapU=I;f.keepMap=la;f.partitionSharedU=J;f.partitionShared=ma;f.lengthNode=K;f.size=L;f.toList=na;f.checkInvariantInternal=N;f.fillArray=Q;f.toArray=oa;f.keysToArray=pa;f.valuesToArray=qa;f.fromSortedArrayAux=S;f.fromSortedArrayRevAux=R;f.fromSortedArrayUnsafe=ra;f.cmpU=T;f.cmp=sa;f.eqU=U;f.eq=ta;f.get=ua;f.getUndefined=va;f.getWithDefault=xa;f.getExn=wa;f.has=ya;f.fromArray=Ba;f.updateMutate=Z;f.balMutate=Y;f.removeMinAuxWithRootMutate=$}),null);
__d("bs_belt_MapDict",["bs_curry","bs_caml_option","bs_belt_internalAVLtree"],(function(a,b,c,d,e,f){"use strict";var g;function h(c,d,e,a){if(c===void 0)return b("bs_belt_internalAVLtree").singleton(d,e);var f=c.k,g=a(d,f);if(g===0)return b("bs_belt_internalAVLtree").updateValue(c,e);var i=c.l,j=c.r;c=c.v;if(g<0)return b("bs_belt_internalAVLtree").bal(h(i,d,e,a),f,c,j);else return b("bs_belt_internalAVLtree").bal(i,f,c,h(j,d,e,a))}function i(c,d,e,a){if(c!==void 0){var f=c.k,g=a(d,f);if(g===0){var h=e(b("bs_caml_option").some(c.v));if(h!==void 0)return b("bs_belt_internalAVLtree").updateValue(c,b("bs_caml_option").valFromOption(h));h=c.l;var j=c.r;if(h===void 0)return j;if(j===void 0)return h;var k={contents:j.k},l={contents:j.v};j=b("bs_belt_internalAVLtree").removeMinAuxWithRef(j,k,l);return b("bs_belt_internalAVLtree").bal(h,k.contents,l.contents,j)}h=c.l;k=c.r;l=c.v;if(g<0){j=i(h,d,e,a);if(h===j)return c;else return b("bs_belt_internalAVLtree").bal(j,f,l,k)}g=i(k,d,e,a);if(k===g)return c;else return b("bs_belt_internalAVLtree").bal(h,f,l,g)}j=e(void 0);if(j!==void 0)return b("bs_belt_internalAVLtree").singleton(d,b("bs_caml_option").valFromOption(j));else return c}function a(c,d,e,a){return i(c,d,b("bs_curry").__1(e),a)}function j(c,d,a){var e=c.k,f=c.l,g=c.r,h=a(d,e);if(h===0){if(f===void 0)return g;if(g===void 0)return f;var i={contents:g.k},k={contents:g.v},l=b("bs_belt_internalAVLtree").removeMinAuxWithRef(g,i,k);return b("bs_belt_internalAVLtree").bal(f,i.contents,k.contents,l)}if(h<0){if(f===void 0)return c;i=j(f,d,a);if(i===f)return c;else return b("bs_belt_internalAVLtree").bal(i,e,c.v,g)}if(g===void 0)return c;k=j(g,d,a);if(k===g)return c;else return b("bs_belt_internalAVLtree").bal(f,e,c.v,k)}function c(b,c,a){if(b!==void 0)return j(b,c,a)}function d(b,c,a){var d=c.length;b=b;for(var e=0;e<d;++e){var f=c[e];b=h(b,f[0],f[1],a)}return b}function k(c,d,e,a){var f=c.k,g=c.v,h=c.l,i=c.r,j=a(d,f);if(j===0){e.contents=b("bs_caml_option").some(g);return[h,i]}if(j<0){if(h===void 0)return[void 0,c];j=k(h,d,e,a);return[j[0],b("bs_belt_internalAVLtree").join(j[1],f,g,i)]}if(i===void 0)return[c,void 0];j=k(i,d,e,a);return[b("bs_belt_internalAVLtree").join(h,f,g,j[0]),j[1]]}function e(b,c,a){if(b===void 0)return[[void 0,void 0],void 0];var d={contents:void 0};b=k(b,c,d,a);return[b,d.contents]}function l(c,d,e,a){if(c===void 0)if(d!==void 0)return b("bs_belt_internalAVLtree").keepMapU(d,function(a,c){return e(a,void 0,b("bs_caml_option").some(c))});else return;if(d===void 0)return b("bs_belt_internalAVLtree").keepMapU(c,function(a,c){return e(a,b("bs_caml_option").some(c),void 0)});if(c.h>=d.h){var f=c.k,g=c.v,h=c.l,i=c.r,j={contents:void 0},m=k(d,f,j,a);j=j.contents;h=l(h,m[0],e,a);g=e(f,b("bs_caml_option").some(g),j);j=l(i,m[1],e,a);return b("bs_belt_internalAVLtree").concatOrJoin(h,f,g,j)}i=d.k;m=d.v;h=d.l;f=d.r;g={contents:void 0};j=k(c,i,g,a);d=g.contents;c=l(j[0],h,e,a);g=e(i,d,b("bs_caml_option").some(m));h=l(j[1],f,e,a);return b("bs_belt_internalAVLtree").concatOrJoin(c,i,g,h)}function m(c,d,e,a){return l(c,d,b("bs_curry").__3(e),a)}function n(b,c,a){var d=c.length;if(b!==void 0){b=b;var e=0;while(!0){var f=e,g=b;if(f>=d)return g;var h=c[f];g=j(g,h,a);if(g===void 0)return g;e=f+1|0;b=g;continue}}}var o,p=(g=b("bs_belt_internalAVLtree")).isEmpty,q=g.has,r=g.cmpU,s=g.cmp,t=g.eqU,u=g.eq,v=g.findFirstByU,w=g.findFirstBy,x=g.forEachU,y=g.forEach,z=g.reduceU,A=g.reduce,B=g.everyU,C=g.every,D=g.someU,E=g.some,F=g.size,G=g.toList,H=g.toArray,I=g.fromArray,J=g.keysToArray,K=g.valuesToArray,L=g.minKey,M=g.minKeyUndefined,N=g.maxKey,O=g.maxKeyUndefined,P=g.minimum,Q=g.minUndefined,R=g.maximum,S=g.maxUndefined,T=g.get,U=g.getUndefined,V=g.getWithDefault,W=g.getExn,X=g.checkInvariantInternal,Y=g.keepSharedU,Z=g.keepShared,$=g.partitionSharedU,aa=g.partitionShared,ba=g.mapU,ca=g.map,da=g.mapWithKeyU;g=g.mapWithKey;f.empty=o;f.isEmpty=p;f.has=q;f.cmpU=r;f.cmp=s;f.eqU=t;f.eq=u;f.findFirstByU=v;f.findFirstBy=w;f.forEachU=x;f.forEach=y;f.reduceU=z;f.reduce=A;f.everyU=B;f.every=C;f.someU=D;f.some=E;f.size=F;f.toList=G;f.toArray=H;f.fromArray=I;f.keysToArray=J;f.valuesToArray=K;f.minKey=L;f.minKeyUndefined=M;f.maxKey=N;f.maxKeyUndefined=O;f.minimum=P;f.minUndefined=Q;f.maximum=R;f.maxUndefined=S;f.get=T;f.getUndefined=U;f.getWithDefault=V;f.getExn=W;f.checkInvariantInternal=X;f.remove=c;f.removeMany=n;f.set=h;f.updateU=i;f.update=a;f.mergeU=l;f.merge=m;f.mergeMany=d;f.keepU=Y;f.keep=Z;f.partitionU=$;f.partition=aa;f.split=e;f.mapU=ba;f.map=ca;f.mapWithKeyU=da;f.mapWithKey=g}),null);
__d("bs_belt_Map",["bs_curry","bs_belt_MapDict"],(function(a,b,c,d,e,f){"use strict";function a(a,c){c=c.cmp;return{cmp:c,data:b("bs_belt_MapDict").fromArray(a,c)}}function c(c,d){var e=c.data,a=c.cmp;d=b("bs_belt_MapDict").remove(e,d,a);if(d===e)return c;else return{cmp:a,data:d}}function d(c,d){var a=c.cmp;c=b("bs_belt_MapDict").removeMany(c.data,d,a);return{cmp:a,data:c}}function e(c,d,e){var a=c.cmp;return{cmp:a,data:b("bs_belt_MapDict").set(c.data,d,e,a)}}function g(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_MapDict").mergeMany(c.data,d,a)}}function h(c,d,e){var a=c.cmp;return{cmp:a,data:b("bs_belt_MapDict").updateU(c.data,d,e,a)}}function i(a,c,d){return h(a,c,b("bs_curry").__1(d))}function j(c,d){var a=c.cmp;c=b("bs_belt_MapDict").split(c.data,d,a);d=c[0];return[[{cmp:a,data:d[0]},{cmp:a,data:d[1]}],c[1]]}function k(c,d,e){var a=c.cmp;return{cmp:a,data:b("bs_belt_MapDict").mergeU(c.data,d.data,e,a)}}function l(a,c,d){return k(a,c,b("bs_curry").__3(d))}function m(a){return{cmp:a.cmp,data:void 0}}function n(a){return b("bs_belt_MapDict").isEmpty(a.data)}function o(a,c){return b("bs_belt_MapDict").findFirstByU(a.data,c)}function p(a,c){return b("bs_belt_MapDict").findFirstByU(a.data,b("bs_curry").__2(c))}function q(a,c){return b("bs_belt_MapDict").forEachU(a.data,c)}function r(a,c){return b("bs_belt_MapDict").forEachU(a.data,b("bs_curry").__2(c))}function s(a,c,d){return b("bs_belt_MapDict").reduceU(a.data,c,d)}function t(a,c,d){return s(a,c,b("bs_curry").__3(d))}function u(a,c){return b("bs_belt_MapDict").everyU(a.data,c)}function v(a,c){return b("bs_belt_MapDict").everyU(a.data,b("bs_curry").__2(c))}function w(a,c){return b("bs_belt_MapDict").someU(a.data,c)}function x(a,c){return b("bs_belt_MapDict").someU(a.data,b("bs_curry").__2(c))}function y(a,c){return{cmp:a.cmp,data:b("bs_belt_MapDict").keepU(a.data,c)}}function z(a,c){return y(a,b("bs_curry").__2(c))}function A(c,d){var a=c.cmp;c=b("bs_belt_MapDict").partitionU(c.data,d);return[{cmp:a,data:c[0]},{cmp:a,data:c[1]}]}function B(a,c){return A(a,b("bs_curry").__2(c))}function C(a,c){return{cmp:a.cmp,data:b("bs_belt_MapDict").mapU(a.data,c)}}function D(a,c){return C(a,b("bs_curry").__1(c))}function E(a,c){return{cmp:a.cmp,data:b("bs_belt_MapDict").mapWithKeyU(a.data,c)}}function F(a,c){return E(a,b("bs_curry").__2(c))}function G(a){return b("bs_belt_MapDict").size(a.data)}function H(a){return b("bs_belt_MapDict").toList(a.data)}function I(a){return b("bs_belt_MapDict").toArray(a.data)}function J(a){return b("bs_belt_MapDict").keysToArray(a.data)}function K(a){return b("bs_belt_MapDict").valuesToArray(a.data)}function L(a){return b("bs_belt_MapDict").minKey(a.data)}function M(a){return b("bs_belt_MapDict").minKeyUndefined(a.data)}function N(a){return b("bs_belt_MapDict").maxKey(a.data)}function O(a){return b("bs_belt_MapDict").maxKeyUndefined(a.data)}function P(a){return b("bs_belt_MapDict").minimum(a.data)}function Q(a){return b("bs_belt_MapDict").minUndefined(a.data)}function R(a){return b("bs_belt_MapDict").maximum(a.data)}function S(a){return b("bs_belt_MapDict").maxUndefined(a.data)}function T(a,c){return b("bs_belt_MapDict").get(a.data,c,a.cmp)}function U(a,c){return b("bs_belt_MapDict").getUndefined(a.data,c,a.cmp)}function V(a,c,d){return b("bs_belt_MapDict").getWithDefault(a.data,c,d,a.cmp)}function W(a,c){return b("bs_belt_MapDict").getExn(a.data,c,a.cmp)}function X(a,c){return b("bs_belt_MapDict").has(a.data,c,a.cmp)}function Y(a){return b("bs_belt_MapDict").checkInvariantInternal(a.data)}function Z(a,c,d){return b("bs_belt_MapDict").eqU(a.data,c.data,a.cmp,d)}function aa(a,c,d){return Z(a,c,b("bs_curry").__2(d))}function $(a,c,d){return b("bs_belt_MapDict").cmpU(a.data,c.data,a.cmp,d)}function ba(a,c,d){return $(a,c,b("bs_curry").__2(d))}function ca(a){return a.data}function da(a){a=a.cmp;return{cmp:a}}function ea(a,b){return{cmp:a.cmp,data:b}}var fa,ga,ha;f.Int=fa;f.$$String=ga;f.Dict=ha;f.make=m;f.isEmpty=n;f.has=X;f.cmpU=$;f.cmp=ba;f.eqU=Z;f.eq=aa;f.findFirstByU=o;f.findFirstBy=p;f.forEachU=q;f.forEach=r;f.reduceU=s;f.reduce=t;f.everyU=u;f.every=v;f.someU=w;f.some=x;f.size=G;f.toArray=I;f.toList=H;f.fromArray=a;f.keysToArray=J;f.valuesToArray=K;f.minKey=L;f.minKeyUndefined=M;f.maxKey=N;f.maxKeyUndefined=O;f.minimum=P;f.minUndefined=Q;f.maximum=R;f.maxUndefined=S;f.get=T;f.getUndefined=U;f.getWithDefault=V;f.getExn=W;f.remove=c;f.removeMany=d;f.set=e;f.updateU=h;f.update=i;f.mergeMany=g;f.mergeU=k;f.merge=l;f.keepU=y;f.keep=z;f.partitionU=A;f.partition=B;f.split=j;f.mapU=C;f.map=D;f.mapWithKeyU=E;f.mapWithKey=F;f.getData=ca;f.getId=da;f.packIdData=ea;f.checkInvariantInternal=Y}),null);
__d("bs_belt_internalMapString",["bs_curry","bs_caml_option","bs_belt_SortArray","bs_caml_primitive","bs_belt_internalAVLtree"],(function(a,b,c,d,e,f){"use strict";function g(a,c,d){if(a===void 0)return b("bs_belt_internalAVLtree").singleton(c,d);var e=a.k;if(c===e)return b("bs_belt_internalAVLtree").updateValue(a,d);var f=a.v;if(c<e)return b("bs_belt_internalAVLtree").bal(g(a.l,c,d),e,f,a.r);else return b("bs_belt_internalAVLtree").bal(a.l,e,f,g(a.r,c,d))}function a(a,c){while(!0){var d=a;if(d===void 0)return;var e=d.k;if(c===e)return b("bs_caml_option").some(d.v);a=c<e?d.l:d.r;continue}}function c(a,b){while(!0){var c=a;if(c===void 0)return;var d=c.k;if(b===d)return c.v;a=b<d?c.l:c.r;continue}}function d(a,b){while(!0){var c=a;if(c!==void 0){var d=c.k;if(b===d)return c.v;a=b<d?c.l:c.r;continue}throw{RE_EXN_ID:"Not_found",Error:new Error()}}}function e(a,b,c){while(!0){var d=a;if(d===void 0)return c;var e=d.k;if(b===e)return d.v;a=b<e?d.l:d.r;continue}}function h(a,b){while(!0){var c=a;if(c===void 0)return!1;var d=c.k;if(b===d)return!0;a=b<d?c.l:c.r;continue}}function i(a,c){if(a===void 0)return a;var d=a.k,e=a.l,f=a.r;if(c!==d)if(c<d)return b("bs_belt_internalAVLtree").bal(i(e,c),d,a.v,f);else return b("bs_belt_internalAVLtree").bal(e,d,a.v,i(f,c));if(e===void 0)return f;if(f===void 0)return e;d={contents:f.k};a={contents:f.v};c=b("bs_belt_internalAVLtree").removeMinAuxWithRef(f,d,a);return b("bs_belt_internalAVLtree").bal(e,d.contents,a.contents,c)}function j(a,c){var d=c.k,e=c.v,f=c.l,g=c.r;if(a===d)return[f,b("bs_caml_option").some(e),g];if(a<d){if(f===void 0)return[void 0,void 0,c];var h=j(a,f);return[h[0],h[1],b("bs_belt_internalAVLtree").join(h[2],d,e,g)]}if(g===void 0)return[c,void 0,void 0];h=j(a,g);return[b("bs_belt_internalAVLtree").join(f,d,e,h[0]),h[1],h[2]]}function k(a,b){if(b!==void 0)return j(a,b);else return[void 0,void 0,void 0]}function l(a,c,d){if(a!==void 0){if(a.h>=(c!==void 0?c.h:0)){var e=a.k,f=a.v,g=a.l,h=a.r,i=k(e,c);return b("bs_belt_internalAVLtree").concatOrJoin(l(g,i[0],d),e,d(e,b("bs_caml_option").some(f),i[1]),l(h,i[2],d))}}else if(c===void 0)return;g=c.k;e=c.v;f=c.l;h=c.r;i=k(g,a);return b("bs_belt_internalAVLtree").concatOrJoin(l(i[0],f,d),g,d(g,i[1],b("bs_caml_option").some(e)),l(i[2],h,d))}function m(a,c,d){return l(a,c,b("bs_curry").__3(d))}function n(a,c,d){while(!0){var e=c,f=a;if(!f)return 0;if(!e)return 0;var g=e.hd,h=f.hd,i=b("bs_caml_primitive").caml_string_compare(h.k,g.k);if(i!==0)return i;i=d(h.v,g.v);if(i!==0)return i;c=b("bs_belt_internalAVLtree").stackAllLeft(g.r,e.tl);a=b("bs_belt_internalAVLtree").stackAllLeft(h.r,f.tl);continue}}function o(c,d,a){var e=b("bs_belt_internalAVLtree").size(c),f=b("bs_belt_internalAVLtree").size(d);if(e===f)return n(b("bs_belt_internalAVLtree").stackAllLeft(c,0),b("bs_belt_internalAVLtree").stackAllLeft(d,0),a);else if(e<f)return-1;else return 1}function p(a,c,d){return o(a,c,b("bs_curry").__2(d))}function q(c,d,a){while(!0){var e=d,f=c;if(!f)return!0;if(!e)return!0;var g=e.hd,h=f.hd;if(!(h.k===g.k&&a(h.v,g.v)))return!1;d=b("bs_belt_internalAVLtree").stackAllLeft(g.r,e.tl);c=b("bs_belt_internalAVLtree").stackAllLeft(h.r,f.tl);continue}}function r(c,d,a){var e=b("bs_belt_internalAVLtree").size(c),f=b("bs_belt_internalAVLtree").size(d);if(e===f)return q(b("bs_belt_internalAVLtree").stackAllLeft(c,0),b("bs_belt_internalAVLtree").stackAllLeft(d,0),a);else return!1}function s(a,c,d){return r(a,c,b("bs_curry").__2(d))}function t(a,c,d){if(a===void 0)return b("bs_belt_internalAVLtree").singleton(c,d);var e=a.k;if(c===e){a.k=c;a.v=d;return a}var f=a.l,g=a.r;if(c<e){e=t(f,c,d);a.l=e}else a.r=t(g,c,d);return b("bs_belt_internalAVLtree").balMutate(a)}function u(a){var c=a.length;if(c===0)return;var d=b("bs_belt_SortArray").strictlySortedLengthU(a,function(a,b){return a[0]<b[0]}),e;d>=0?e=b("bs_belt_internalAVLtree").fromSortedArrayAux(a,0,d):(d=-d|0,e=b("bs_belt_internalAVLtree").fromSortedArrayRevAux(a,d-1|0,d));for(var d=d;d<c;++d){var f=a[d];e=t(e,f[0],f[1])}return e}var v,w,x;f.N=v;f.A=w;f.S=x;f.add=g;f.get=a;f.getUndefined=c;f.getExn=d;f.getWithDefault=e;f.has=h;f.remove=i;f.splitAux=j;f.split=k;f.mergeU=l;f.merge=m;f.compareAux=n;f.cmpU=o;f.cmp=p;f.eqAux=q;f.eqU=r;f.eq=s;f.addMutate=t;f.fromArray=u}),null);
__d("bs_belt_MapString",["bs_curry","bs_caml_option","bs_belt_internalAVLtree","bs_belt_internalMapString"],(function(a,b,c,d,e,f){"use strict";var g,h;function i(a,c,d){if(a===void 0)return b("bs_belt_internalAVLtree").singleton(c,d);var e=a.k;if(c===e)return b("bs_belt_internalAVLtree").updateValue(a,d);var f=a.v;if(c<e)return b("bs_belt_internalAVLtree").bal(i(a.l,c,d),e,f,a.r);else return b("bs_belt_internalAVLtree").bal(a.l,e,f,i(a.r,c,d))}function j(a,c,d){if(a!==void 0){var e=a.k;if(c===e){var f=d(b("bs_caml_option").some(a.v));if(f!==void 0)return b("bs_belt_internalAVLtree").updateValue(a,b("bs_caml_option").valFromOption(f));f=a.l;var g=a.r;if(f===void 0)return g;if(g===void 0)return f;var h={contents:g.k},i={contents:g.v};g=b("bs_belt_internalAVLtree").removeMinAuxWithRef(g,h,i);return b("bs_belt_internalAVLtree").bal(f,h.contents,i.contents,g)}f=a.v;h=a.l;i=a.r;if(c<e){g=j(h,c,d);if(h===g)return a;else return b("bs_belt_internalAVLtree").bal(g,e,f,i)}g=j(i,c,d);if(i===g)return a;else return b("bs_belt_internalAVLtree").bal(h,e,f,g)}i=d(void 0);if(i!==void 0)return b("bs_belt_internalAVLtree").singleton(c,b("bs_caml_option").valFromOption(i));else return a}function a(a,c,d){return j(a,c,b("bs_curry").__1(d))}function k(a,c){var d=a.k,e=a.l,f=a.r;if(c===d){if(e===void 0)return f;if(f===void 0)return e;var g={contents:f.k},h={contents:f.v},i=b("bs_belt_internalAVLtree").removeMinAuxWithRef(f,g,h);return b("bs_belt_internalAVLtree").bal(e,g.contents,h.contents,i)}if(c<d){if(e===void 0)return a;g=k(e,c);if(g===e)return a;else return b("bs_belt_internalAVLtree").bal(g,d,a.v,f)}if(f===void 0)return a;h=k(f,c);return b("bs_belt_internalAVLtree").bal(e,d,a.v,h)}function c(a,b){if(a!==void 0)return k(a,b)}function d(a,b){var c=b.length;if(a!==void 0){a=a;var d=0;while(!0){var e=d,f=a;if(e>=c)return f;var g=b[e];f=k(f,g);if(f===void 0)return f;d=e+1|0;a=f;continue}}}function e(a,b){var c=b.length;a=a;for(var d=0;d<c;++d){var e=b[d];a=i(a,e[0],e[1])}return a}var l,m=(g=b("bs_belt_internalAVLtree")).isEmpty,n=(h=b("bs_belt_internalMapString")).has,o=h.cmpU,p=h.cmp,q=h.eqU,r=h.eq,s=g.findFirstByU,t=g.findFirstBy,u=g.forEachU,v=g.forEach,w=g.reduceU,x=g.reduce,y=g.everyU,z=g.every,A=g.someU,B=g.some,C=g.size,D=g.toList,E=g.toArray,F=h.fromArray,G=g.keysToArray,H=g.valuesToArray,I=g.minKey,J=g.minKeyUndefined,K=g.maxKey,L=g.maxKeyUndefined,M=g.minimum,N=g.minUndefined,O=g.maximum,P=g.maxUndefined,Q=h.get,R=h.getUndefined,S=h.getWithDefault,T=h.getExn,U=g.checkInvariantInternal,V=h.mergeU,W=h.merge,X=g.keepSharedU,Y=g.keepShared,Z=g.partitionSharedU,$=g.partitionShared;h=h.split;var aa=g.mapU,ba=g.map,ca=g.mapWithKeyU;g=g.mapWithKey;f.empty=l;f.isEmpty=m;f.has=n;f.cmpU=o;f.cmp=p;f.eqU=q;f.eq=r;f.findFirstByU=s;f.findFirstBy=t;f.forEachU=u;f.forEach=v;f.reduceU=w;f.reduce=x;f.everyU=y;f.every=z;f.someU=A;f.some=B;f.size=C;f.toList=D;f.toArray=E;f.fromArray=F;f.keysToArray=G;f.valuesToArray=H;f.minKey=I;f.minKeyUndefined=J;f.maxKey=K;f.maxKeyUndefined=L;f.minimum=M;f.minUndefined=N;f.maximum=O;f.maxUndefined=P;f.get=Q;f.getUndefined=R;f.getWithDefault=S;f.getExn=T;f.checkInvariantInternal=U;f.remove=c;f.removeMany=d;f.set=i;f.updateU=j;f.update=a;f.mergeU=V;f.merge=W;f.mergeMany=e;f.keepU=X;f.keep=Y;f.partitionU=Z;f.partition=$;f.split=h;f.mapU=aa;f.map=ba;f.mapWithKeyU=ca;f.mapWithKey=g}),null);
__d("MessengerState.bs",["invariant","URI","FBID.bs","bs_array","bs_curry","JSSet.bs","React","Utils.bs","FBJSON","Arbiter","gkx","bs_js_dict","qex","bs_belt_Map","bs_belt_Set","bs_caml_obj","ThreadId.bs","FBIDCheck","immutable","bs_belt_Array","bs_caml_array","ChatConfig","MercuryIDs","bs_pervasives","bs_belt_Option","bs_caml_option","CurrentUser","requireCond","AsyncRequest","MessagingTag","RemoteAction.bs","TypingStates","MercuryAssert","MercuryViewer","ParticipantId.bs","bs_belt_MapString","bs_caml_primitive","MercuryFilters.bs","ImmutableObject","MercuryLocalIDs","ChannelConstants","MessengerFolders.bs","MessengerMessage.bs","bs_js_null_undefined","MercuryActionType","MercuryAttachment","MercuryDispatcher","MercuryMessageIDs.bs","MercuryThreadInfo","MessengerPersonas.bs","MessengerWebEvent","XGroupsController","MercuryThreadIDMap","PageCommItemStatus","MercuryActionStatus","MessageRequestUtils","MessagingThreadType","MercuryPayloadSource","MessengerEnvironment","MessengerThreadUtils.bs","recoverableViolation","MercuryLogMessageType","MercuryServerRequests","MercuryThreadInformer","MercurySyncEventsProxy","unrecoverableViolation","MercuryGlobalActionType","MessageProfileRangeType","ThreadConnectivityStatus.bs","MercuryMessageClientState","MessengerGroupsSyncStatus","MercuryThreadlistConstants","MessageUnsendabilityStatus","setTimeoutAcrossTransitions","MessagingGenericAdminTextType","MessengerDesktopNotifications","ChatReliabilityInstrumentation","RemovedMessageTombstoneContent","MWChatDeleteMessageEventEmitter","MessengerThreadCannotReplyReason.bs","RepliedToMessageStatusForGraphQL","XMercuryThreadLikeIconController","MessengerSharedMediaActionsLoader","MessengerSharedPhotosVideosBaseData.bs","MercuryDisplayTimeFilterMessageRenderer","cr:1299779"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React"),j=b("MessagingTag").IRIS_MAPPING;function k(a){var c={};b("bs_belt_Map").forEach(a,function(b,a){c[b]=a});return c}function a(a){return k(a.threads)}function l(a,c){return b("bs_js_null_undefined").fromOption(b("bs_belt_Map").get(a.threads,c))}function c(a){return a.fbid}function d(a){return a.deliveryReceipts}function e(a){return a.readReceiptsPerThread}function m(a){return a.ignoredIds}function n(a){return a.blockedIds}function o(a){return a.pendingFolderUnseenCount}function aa(a){return a.typing}function p(a){return a.pendingReadStatusThreads}function q(a){return a.messages}function r(a){return a.localIDsMap}function s(a){return a.messagesWithUploadsInFlight}function ba(a){return a.threadlistOrderMap}function ca(a){return a.pinnedThreads}function t(a){return a.montage}function da(a){return a.orderedMessageLists}function ea(a){return a.unreadCounts}function fa(a){return a.initialUnreadCounts}function ga(a){return a.unseenTimestamp}function ha(a){b("ChatReliabilityInstrumentation").logMESSAGE_RECEIVED(b("FBJSON").stringify({otid:a.offline_threading_id,message_id:a.message_id,other_user_fbid:a.other_user_fbid}))}function ia(a,c,d){d=d.reduce(b("bs_belt_Set").remove,c.reduce(b("bs_belt_Set").add,a.ignoredIds));if(d===a.ignoredIds)return a;else return{fbid:a.fbid,deliveryReceipts:a.deliveryReceipts,readReceiptsPerThread:a.readReceiptsPerThread,ignoredIds:d,blockedIds:a.blockedIds,pendingFolderUnseenCount:a.pendingFolderUnseenCount,typing:a.typing,threads:a.threads,pendingReadStatusThreads:a.pendingReadStatusThreads,messages:a.messages,localIDsMap:a.localIDsMap,messagesWithUploadsInFlight:a.messagesWithUploadsInFlight,threadlistOrderMap:a.threadlistOrderMap,pinnedThreads:a.pinnedThreads,montage:a.montage,orderedMessageLists:a.orderedMessageLists,unreadCounts:a.unreadCounts,initialUnreadCounts:a.initialUnreadCounts,unseenTimestamp:a.unseenTimestamp}}var ja=function(a,b){delete a[b];return 0};function ka(a,c,d){var e=b("bs_belt_MapString").get(a,c);if(e===void 0)return a;e=b("bs_caml_option").valFromOption(e);var f=b("bs_belt_Map").get(e,d);if(f!==void 0)return b("bs_belt_MapString").set(a,c,b("bs_belt_Map").remove(e,d));else return a}function la(a,c){var d=c.thread_fbid;if(d==null){if(!(c.type==="typ"||c.type==="page_typing"))return null;c=b("FBID.bs").ofString(c.from.toString());if(c!==void 0)return b("MercuryIDs").getThreadIDFromUserID(b("bs_caml_option").valFromOption(c));else return null}c=b("MercuryThreadIDMap").getForFBID(a);return c.getClientIDFromServerIDNow(d.toString())}var ma=b("gkx")("1275193")?b("MercuryFilters.bs").getSupportedFilters(void 0).concat([b("MercuryFilters.bs").all,b("MercuryFilters.bs").groups,b("MercuryFilters.bs").named,b("MercuryFilters.bs").unnamed]):b("gkx")("1660458")?b("MercuryFilters.bs").getSupportedFilters(void 0).concat([b("MercuryFilters.bs").all,b("MercuryFilters.bs").groups,b("MercuryFilters.bs").unsyncedChat]):b("MercuryFilters.bs").getSupportedFilters(void 0).concat([b("MercuryFilters.bs").all,b("MercuryFilters.bs").groups]),na=b("MessengerFolders.bs").getSupportedFolders(void 0).concat(["spam","page_background"]);function oa(a){var b={};na.forEach(function(a){var c={};ma.forEach(function(a){c[a]={threadlist:[],reachedEnd:!1,existingIDs:new Set()}});b[a]=c});return b}function pa(a,c){a=b("MercuryThreadInformer").getForFBID(a);a.invalidatedThread(c)}function u(a,c){a=b("MercuryThreadInformer").getForFBID(a);a.updatedThread(c)}function qa(a,c){a=b("MercuryThreadInformer").getForFBID(a);a.deletedThread(c)}function ra(a,c,d,e){a=b("MercuryThreadInformer").getForFBID(a);a.changedThreadReadState(c,d,e)}function sa(a,c){var d=new Map();c.forEach(function(a,b){d.set(a,b)});return c.sort(function(c,e){var f=b("bs_belt_Map").get(a.threads,c),g=b("bs_belt_Map").get(a.threads,e);if(f!==void 0&&g!==void 0){g=b("bs_caml_option").valFromOption(g).timestamp-b("bs_caml_option").valFromOption(f).timestamp;if(g>0)return 1;else if(g<0)return-1;else return 0}f=d.get(c);g=d.get(e);return b("bs_belt_Option").getExn(f==null?void 0:b("bs_caml_option").some(f))-b("bs_belt_Option").getExn(g==null?void 0:b("bs_caml_option").some(g))|0})}function ta(a,c,d,e){a=b("bs_js_dict").get(a.threadlistOrderMap,d);if(a===void 0)return;d=b("bs_js_dict").get(b("bs_caml_option").valFromOption(a),e);if(d===void 0)return;var f=b("bs_caml_option").valFromOption(d);c.forEach(function(a){if(!f.existingIDs.has(a))return;f.existingIDs["delete"](a);a=f.threadlist.indexOf(a);f.threadlist.splice(a,1)})}function v(c,d,e,f){c=c!==void 0?c:function(a){return!0};var a=b("bs_belt_Map").get(d.threads,e);if(a===void 0)return d;a=b("bs_caml_option").valFromOption(a);if(!b("bs_curry")._1(c,a))return d;c=b("ImmutableObject").set(a,f);a=b("bs_belt_Map").set(d.threads,e,c);u(d.fbid,e);return{fbid:d.fbid,deliveryReceipts:d.deliveryReceipts,readReceiptsPerThread:d.readReceiptsPerThread,ignoredIds:d.ignoredIds,blockedIds:d.blockedIds,pendingFolderUnseenCount:d.pendingFolderUnseenCount,typing:d.typing,threads:a,pendingReadStatusThreads:d.pendingReadStatusThreads,messages:d.messages,localIDsMap:d.localIDsMap,messagesWithUploadsInFlight:d.messagesWithUploadsInFlight,threadlistOrderMap:d.threadlistOrderMap,pinnedThreads:d.pinnedThreads,montage:d.montage,orderedMessageLists:d.orderedMessageLists,unreadCounts:d.unreadCounts,initialUnreadCounts:d.initialUnreadCounts,unseenTimestamp:d.unseenTimestamp}}function ua(c,a,d){var e=new Set(a.participants);Object.assign(a,{participants:Array.from(a.participants)});d.forEach(function(d){if(!e.has(d)){a.participants.push(d);if(b("bs_caml_obj").caml_equal(d,c)){Object.assign(a,{is_subscribed:!0,can_reply:!0,cannot_reply_reason:null});return}else return}})}var va=b("XGroupsController");function w(a){var c=[b("MercuryFilters.bs").all];a.unread_count>0&&c.push(b("MercuryFilters.bs").unread);a.is_canonical||c.push(b("MercuryFilters.bs").groups);if(b("gkx")("1660458")){var d=a.groups_sync_status;!(d==null)&&b("bs_caml_obj").caml_equal(d,b("MessengerGroupsSyncStatus").OPT_IN)||c.push(b("MercuryFilters.bs").unsyncedChat)}if(b("gkx")("1275193"))if(a.name.length!==0){c.push(b("MercuryFilters.bs").named);return c}else{c.push(b("MercuryFilters.bs").unnamed);return c}else return c}function wa(a,c,d,e){na.forEach(function(b){if(b!==d)return ta(a,c,b,e)});var f=b("bs_js_dict").get(a.threadlistOrderMap,d);if(f!==void 0){f=b("bs_js_dict").get(b("bs_caml_option").valFromOption(f),e);if(f!==void 0){f=b("bs_caml_option").valFromOption(f);f=[f.threadlist,f.existingIDs]}else f=[[],new Set()]}else f=[[],new Set()];var g=f[1],h=f[0];c.forEach(function(a){if(!g.has(a)){g.add(a);h.push(a);return}});return[sa(a,h),g]}function xa(a,c,d,e){c=b("gkx")("1275193")||b("gkx")("1660458")?c.filter(function(c){c=b("bs_belt_Map").get(a.threads,c);if(c===void 0)return!1;c=w(b("bs_caml_option").valFromOption(c));return c.some(function(a){return a===e})}):c;return wa(a,c,d,e)}function ya(a,c,d){if(d===void 0)return;var e=b("bs_js_dict").get(a.unreadCounts,c);if(e!==void 0){b("bs_caml_option").valFromOption(e).add(b("bs_caml_option").valFromOption(d));e=b("MercuryThreadInformer").getForFBID(a.fbid);e.updatedUnreadState();return}d=b("MercuryServerRequests").getForFBID(a.fbid);d.fetchUnreadThreadIDs(c)}var za=b("MessengerFolders.bs").getSupportedFolders(void 0).filter(function(a){return a!=="action:archived"});function Aa(a,c,d){if(d===void 0)return;var e=b("bs_js_dict").get(a.unreadCounts,c);if(e!==void 0){b("bs_caml_option").valFromOption(e)["delete"](b("bs_caml_option").valFromOption(d));e=b("MercuryThreadInformer").getForFBID(a.fbid);e.updatedUnreadState();return}d=b("MercuryServerRequests").getForFBID(a.fbid);d.fetchUnreadThreadIDs(c)}function Ba(c,a,d){var e=b("MessengerFolders.bs").getFromMeta(a);if(d!==e){za.includes(e)&&a.unread_count>0&&ya(c,e,b("bs_caml_option").some(a.thread_id));if(za.includes(d))return Aa(c,d,b("bs_caml_option").some(a.thread_id));else return}}function Ca(a,c,d,e,f){var g=b("gkx")("1275193"),h=b("gkx")("1660458"),i=a.threadlistOrderMap[c][d],j=i.existingIDs.has(e);!f&&(g||h)?xa(a,[e],c,d):wa(a,[e],c,d);if(!(!g&&!h||i.threadlist.length!==0))return;f=b("bs_caml_array").get(i.threadlist,i.threadlist.length-1|0)===e;if(!i.reachedEnd&&!j&&f)return ta(a,[e],c,d)}function Da(a,c,d){if(na.includes(c))if((c==="inbox"||c==="action:archived"||c==="pending")&&(b("gkx")("1275193")||b("gkx")("1660458")))return Ca(a,c,b("MercuryFilters.bs").unread,d,!0);else{wa(a,[d],c,b("MercuryFilters.bs").unread);return}}function Ea(c,a){var d=b("MessengerFolders.bs").getFromMeta(a);if(na.includes(d)){ma.forEach(function(b){return Ca(c,d,b,a.thread_id,!1)});return}}function Fa(d,e,f,g){var a=b("bs_belt_Map").get(d.threads,e);if(a===void 0)return d;a=b("bs_caml_option").valFromOption(a);var h=b("MessengerFolders.bs").getFromMeta(a);if(h!==f){if(g){g=a.comm_status;g=g==null?b("ImmutableObject").set(a,{folder:f}):f==="other"?b("ImmutableObject").set(a,{folder:f,comm_status:b("PageCommItemStatus").SPAM}):f==="inbox"?b("ImmutableObject").set(a,{folder:f,comm_status:b("PageCommItemStatus").TODO}):b("ImmutableObject").set(a,{folder:f})}else g=a;var c=a.other_user_fbid;c=c==null?[]:f==="other"?[b("MercuryIDs").getParticipantIDFromUserID(c)]:[];var i=a.other_user_fbid;f=i==null?[]:f==="other"?[]:[b("MercuryIDs").getParticipantIDFromUserID(i)];i=ia(d,c,f);c=b("bs_belt_Map").set(i.threads,e,g);Ba(i,g,h);Ea(i,g);u(i.fbid,e);return{fbid:i.fbid,deliveryReceipts:i.deliveryReceipts,readReceiptsPerThread:i.readReceiptsPerThread,ignoredIds:i.ignoredIds,blockedIds:i.blockedIds,pendingFolderUnseenCount:i.pendingFolderUnseenCount,typing:i.typing,threads:c,pendingReadStatusThreads:i.pendingReadStatusThreads,messages:i.messages,localIDsMap:i.localIDsMap,messagesWithUploadsInFlight:i.messagesWithUploadsInFlight,threadlistOrderMap:i.threadlistOrderMap,pinnedThreads:i.pinnedThreads,montage:i.montage,orderedMessageLists:i.orderedMessageLists,unreadCounts:i.unreadCounts,initialUnreadCounts:i.initialUnreadCounts,unseenTimestamp:i.unseenTimestamp}}Ea(d,a);return d}function Ga(a,c,d){d=c.is_filtered_content?b("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(c):d!==void 0?d:c.body;var e=c.raw_attachments;e=!(e==null)&&e.length!==0?b("MercuryAttachment").convertRaw(e):c.attachments;var f=c.removed_timestamp;if(f==null){f=c.log_message_type;d={snippet:d,snippet_attachments:e,snippet_sender:f==null?c.author:null}}else d={snippet:b("RemovedMessageTombstoneContent").getTombstoneContentForSnippet(c.author),snippet_attachments:null,snippet_sender:null};return Object.assign(a,d)}function x(a,c,d){var e=a.event_title,f=a.event_time;a=a.event_location_name;return{creator_id:null,latitude:null,location_address:null,longitude:null,note:"",related_event:{id:""},repeat_mode:null,seconds_to_notify_before:0,status:null,track_rsvp:c.track_rsvp,title:e==null?c.title:e,event_time:f==null?c.event_time:parseInt(f,10),location_name:a==null?c.location_name:a,event_members:d!==void 0?b("bs_caml_option").valFromOption(d):c.event_members,oid:c.oid,event_type:c.event_type}}function y(b,a){var c={};Object.keys(b).forEach(function(a){c[a]=b[a]});c[a.guest_id]=a.guest_status;return c}var Ha=function(a,b){delete a[b];return 0},z=function(a,b){delete a[b];return 0};function A(a){var c={contents:-1},d={contents:null},e=Math.floor(Date.now()/1e3);b("bs_js_dict").entries(a).forEach(function(a){a=a[1];var b=a.event_time;if(b>e&&(c.contents<0||c.contents>b)){c.contents=b;d.contents=a;return}});return d.contents}var B=b("XMercuryThreadLikeIconController");function C(a,c,d){d=B.getURIBuilder().setString("emoji",d).getURI();new(b("AsyncRequest"))(d).setHandler(function(d){var e=b("MercuryDispatcher").getForFBID(a);e.handleUpdate({actions:[{action_type:b("MercuryActionType").UPDATE_CUSTOM_LIKE,thread_id:c,custom_like:d.getPayload()}],from_client:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANGE_CUSTOM_LIKE})}).send()}function Ia(d,a,c,e){c=c.log_message_data;if(c==null)return;var f=c.untypedData;if(c.message_type===b("MessagingGenericAdminTextType").CHANGE_THREAD_NICKNAME){var g=a.custom_nickname;if(!(g==null)){g=b("bs_js_dict").fromArray(b("bs_js_dict").entries(g));var h=f.nickname;h.trim().length>0?g[f.participant_id]=h:z(g,f.participant_id);Object.assign(a,{custom_nickname:g})}u(d,e)}else if(c.message_type===b("MessagingGenericAdminTextType").CHANGE_THREAD_ICON)C(d,e,f.thread_icon);else if(c.message_type===b("MessagingGenericAdminTextType").CHANGE_THREAD_THEME){if(!b("ChatConfig").get("chat_tab_has_gradients")){h=f.theme_color;if(h==null)Object.assign(a,{solid_color:null,header_color:null,footer_color:null,gradient_colors:[]});else if(h.length>0){g="#"+h.slice(2);Object.assign(a,{solid_color:g,header_color:g,footer_color:g,gradient_colors:[g]})}else Object.assign(a,{solid_color:null,header_color:null,footer_color:null,gradient_colors:[]});u(d,e)}}else if(f!==void 0)if(c.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE){var i={},j=f.event_creator_id;a.participants.forEach(function(a){a=b("MercuryIDs").getUserIDFromParticipantID(a);if(!(a==null)){i[a]=b("bs_caml_obj").caml_equal(a,j)?"GOING":"INVITED";return}});h=b("bs_js_dict").fromArray(b("bs_js_dict").entries(a.lightweight_events));g=f.event_time;g={track_rsvp:f.event_track_rsvp,title:f.event_title,event_time:g==null?0:parseInt(g,10),location_name:f.event_location_name,event_members:i,oid:f.event_id,event_type:f.event_type};Object.assign(a,{lightweight_event:g});h[f.event_id]=Object.assign({},g);Object.assign(a,{lightweight_events:h});u(d,e)}else if(c.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE||c.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME||c.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE||c.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION){g=a.lightweight_event;if(!(g==null)){h=b("bs_js_dict").fromArray(b("bs_js_dict").entries(a.lightweight_events));g.oid===f.event_id&&Object.assign(a,{lightweight_event:x(f,g,b("bs_caml_option").some(g.event_members))});g=b("bs_js_dict").get(h,f.event_id);g!==void 0&&(h[f.event_id]=x(f,b("bs_caml_option").valFromOption(g),void 0),Object.assign(a,{lightweight_events:h}))}u(d,e)}else if(c.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_RSVP){g=b("bs_js_dict").fromArray(b("bs_js_dict").entries(a.lightweight_events));h=a.lightweight_event;if(!(h==null)&&h.oid===f.event_id){var k=y(h.event_members,f);Object.assign(a,{lightweight_event:x(f,h,b("bs_caml_option").some(k))})}h=b("bs_js_dict").get(g,f.event_id);if(h!==void 0){k=b("bs_caml_option").valFromOption(h);h=y(k.event_members,f);g[f.event_id]=x(f,k,b("bs_caml_option").some(h));Object.assign(a,{lightweight_events:g})}u(d,e)}else if(c.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_DELETE||c.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY){k=b("bs_js_dict").fromArray(b("bs_js_dict").entries(a.lightweight_events));Ha(k,f.event_id);Object.assign(a,{lightweight_event:A(k),lightweight_events:k});u(d,e)}}function Ja(c,d,e){if(b("CurrentUser").isWorkUser()&&b("gkx")("1179386")){var a=b("bs_belt_Map").get(c.threads,d);if(a!==void 0){a=b("bs_caml_option").valFromOption(a);var f=a.pinned_messages;f=f==null?void 0:f.map(function(a){if(e.findIndex(function(b){return b===a.message_id})!==-1)return{message_id:a.message_id,pinning_time:a.pinning_time,message:null};else return a});if(f!==void 0){a=b("ImmutableObject").set(a,{pinned_messages:f});f=b("bs_belt_Map").set(c.threads,d,a);u(c.fbid,d);a=f}else a=c.threads}else a=c.threads;return{fbid:c.fbid,deliveryReceipts:c.deliveryReceipts,readReceiptsPerThread:c.readReceiptsPerThread,ignoredIds:c.ignoredIds,blockedIds:c.blockedIds,pendingFolderUnseenCount:c.pendingFolderUnseenCount,typing:c.typing,threads:a,pendingReadStatusThreads:c.pendingReadStatusThreads,messages:c.messages,localIDsMap:c.localIDsMap,messagesWithUploadsInFlight:c.messagesWithUploadsInFlight,threadlistOrderMap:c.threadlistOrderMap,pinnedThreads:c.pinnedThreads,montage:c.montage,orderedMessageLists:c.orderedMessageLists,unreadCounts:c.unreadCounts,initialUnreadCounts:c.initialUnreadCounts,unseenTimestamp:c.unseenTimestamp}}else return c}function Ka(a,c,d,e){a=b("MercuryThreadInformer").getForFBID(a);a.updatedMessage(c,d,b("bs_js_null_undefined").fromOption(e))}function La(c,a){c=b("MercuryThreadInformer").getForFBID(c);c.receivedMessage(a)}function Ma(a,c,d){a=b("MercuryThreadInformer").getForFBID(a);a.reorderedMessages(c,d)}function Na(a,c,d,e,f){a=b("MercuryThreadInformer").getForFBID(a);f=b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(f==null?void 0:b("bs_caml_option").some(f),function(a){return b("bs_belt_Array").keepMap(a,function(a){return b("bs_caml_option").nullable_to_opt(a.message_file_fbid)})}),[]);b("MWChatDeleteMessageEventEmitter").emit(d);a.deletedMessage(c,d,b("bs_js_null_undefined").fromOption(e),f)}function Oa(a,c,d,e){a=b("MercuryThreadInformer").getForFBID(a);a.deletedMessage(c,d,b("bs_js_null_undefined").fromOption(e),null)}var Pa=function(a,b){delete a[b];return 0};function D(c,a){var d=c.localIDsMap.get(a);return b("bs_caml_option").nullable_to_opt(c.messages.get(b("bs_belt_Option").getWithDefault(d==null?void 0:b("bs_caml_option").some(d),a)))}function E(a,c,d){a=a!==void 0?a:!1;d=b("bs_belt_Array").keepMap(d,function(a){return D(c,a)});if(a)return d.slice().reverse();else return d}function Qa(a,c){return b("bs_belt_Array").keepMap(c,function(b){return D(a,b)}).sort(function(a,c){return b("MessengerMessage.bs").compare(c,a)}).map(function(a){return a.message_id})}function F(a,b){return{fbid:a.fbid,deliveryReceipts:a.deliveryReceipts,readReceiptsPerThread:a.readReceiptsPerThread,ignoredIds:a.ignoredIds,blockedIds:a.blockedIds,pendingFolderUnseenCount:a.pendingFolderUnseenCount,typing:a.typing,threads:a.threads,pendingReadStatusThreads:a.pendingReadStatusThreads,messages:a.messages.set(b[0],b[1]),localIDsMap:a.localIDsMap,messagesWithUploadsInFlight:a.messagesWithUploadsInFlight,threadlistOrderMap:a.threadlistOrderMap,pinnedThreads:a.pinnedThreads,montage:a.montage,orderedMessageLists:a.orderedMessageLists,unreadCounts:a.unreadCounts,initialUnreadCounts:a.initialUnreadCounts,unseenTimestamp:a.unseenTimestamp}}function G(b,a){b.localIDsMap.set(a.message_id,a.message_id);return{fbid:b.fbid,deliveryReceipts:b.deliveryReceipts,readReceiptsPerThread:b.readReceiptsPerThread,ignoredIds:b.ignoredIds,blockedIds:b.blockedIds,pendingFolderUnseenCount:b.pendingFolderUnseenCount,typing:b.typing,threads:b.threads,pendingReadStatusThreads:b.pendingReadStatusThreads,messages:b.messages,localIDsMap:b.localIDsMap,messagesWithUploadsInFlight:b.messagesWithUploadsInFlight,threadlistOrderMap:b.threadlistOrderMap,pinnedThreads:b.pinnedThreads,montage:b.montage,orderedMessageLists:b.orderedMessageLists,unreadCounts:b.unreadCounts,initialUnreadCounts:b.initialUnreadCounts,unseenTimestamp:b.unseenTimestamp}}var H=function(a,b){delete a[b];return 0};function I(c,d){var a=c.orderedMessageLists;Object.keys(d).forEach(function(e){var f=b("bs_js_dict").get(d,e);if(f===void 0)return;var g=f[0],h=g.limit,i=g.offset;g=a.get(g.threadID);if(g==null)return;g=g.messageIDs;if(g.length>=(i+h|0)){H(d,e);return b("bs_curry")._1(f[1],E(!0,c,g.slice(i,i+h|0)))}})}function Ra(d,c,e){var a=e[1],f=e[0];b("MessengerMessage.bs").finalizeRanges(a);var g=a.offline_threading_id;if(!(g==null)&&g!==a.message_id){d.localIDsMap.set(g,a.message_id);b("MercuryMessageIDs.bs").addServerID(g,a.message_id);g=a.threading_id;g==null||b("MercuryMessageIDs.bs").addServerID(g,a.message_id)}g=d.messages.has(f);var h=d.fbid,i=d.deliveryReceipts,j=d.readReceiptsPerThread,k=d.ignoredIds,l=d.blockedIds,m=d.pendingFolderUnseenCount,n=d.typing,o=d.threads,aa=d.pendingReadStatusThreads,p=d.messages.set(f,a),q=d.localIDsMap,r=d.messagesWithUploadsInFlight,s=d.threadlistOrderMap,ba=d.pinnedThreads,ca=d.montage,t=d.orderedMessageLists,da=d.unreadCounts,ea=d.initialUnreadCounts;d=d.unseenTimestamp;h={fbid:h,deliveryReceipts:i,readReceiptsPerThread:j,ignoredIds:k,blockedIds:l,pendingFolderUnseenCount:m,typing:n,threads:o,pendingReadStatusThreads:aa,messages:p,localIDsMap:q,messagesWithUploadsInFlight:r,threadlistOrderMap:s,pinnedThreads:ba,montage:ca,orderedMessageLists:t,unreadCounts:da,initialUnreadCounts:ea,unseenTimestamp:d};if(!g&&e[2]===1){i=b("bs_belt_Option").getWithDefault(b("bs_belt_Option").flatMap(b("bs_caml_option").nullable_to_opt(a.thread_id),function(a){return b("bs_caml_option").nullable_to_opt(t.get(a))}),{messageLoadingState:b("MercuryIDs").isLocalThread(a.thread_id)?1:0,messageIDs:[]});j=a.thread_id;if(!(j==null)){k=Qa(h,[f].concat(i.messageIDs.filter(function(c){return b("bs_caml_obj").caml_notequal(c,a.offline_threading_id)})));t.set(j,{messageLoadingState:i.messageLoadingState,messageIDs:k})}I(h,c.messageCallbacks.contents)}return h}function J(b,c,a){b.messagesWithUploadsInFlight.set(c,a);return{fbid:b.fbid,deliveryReceipts:b.deliveryReceipts,readReceiptsPerThread:b.readReceiptsPerThread,ignoredIds:b.ignoredIds,blockedIds:b.blockedIds,pendingFolderUnseenCount:b.pendingFolderUnseenCount,typing:b.typing,threads:b.threads,pendingReadStatusThreads:b.pendingReadStatusThreads,messages:b.messages,localIDsMap:b.localIDsMap,messagesWithUploadsInFlight:b.messagesWithUploadsInFlight,threadlistOrderMap:b.threadlistOrderMap,pinnedThreads:b.pinnedThreads,montage:b.montage,orderedMessageLists:b.orderedMessageLists,unreadCounts:b.unreadCounts,initialUnreadCounts:b.initialUnreadCounts,unseenTimestamp:b.unseenTimestamp}}function Sa(a,c){var d=c[1];c=c[0];var e=a.messagesWithUploadsInFlight.get(c);b("bs_belt_Option").isSome(e==null?void 0:b("bs_caml_option").some(e))||g(0,1777);a.messagesWithUploadsInFlight["delete"](c);if(e==null)return b("bs_pervasives").failwith("Message must exist to update");else return Object.assign(e,{image_ids:d.image_ids,file_ids:d.file_ids,audio_ids:d.audio_ids,gif_ids:d.gif_ids,video_ids:d.video_ids,client_state:b("MercuryMessageClientState").SEND_TO_SERVER})}function Ta(a,c){var d=c[1],e=c[0],f=a.orderedMessageLists.get(e);if(f==null)return a;var g=b("bs_belt_Array").keepMap(d,function(b){return D(a,b)}).map(function(a){return a.message_id}),h=Qa(a,f.messageIDs.filter(function(a){return g.indexOf(a)===-1}));a.orderedMessageLists.set(e,{messageLoadingState:f.messageLoadingState,messageIDs:h});Ma(a.fbid,e,b("bs_js_null_undefined").fromOption(c[2]));f=Ja(a,e,d);return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp}}function Ua(c,d){var e={snippet:"...",snippet_attachments:null,snippet_sender:null};d=b("bs_belt_Option").flatMap(b("bs_caml_option").nullable_to_opt(c.orderedMessageLists.get(d)),function(a){return b("bs_belt_Array").get(E(void 0,c,a.messageIDs),0)});if(d!==void 0){var a=b("bs_caml_option").valFromOption(d);a=a.is_filtered_content?b("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(a):a.body}else a=null;if(d===void 0)return e;d=b("bs_caml_option").valFromOption(d);var f=d.removed_timestamp;if(!(f==null))return{snippet:b("RemovedMessageTombstoneContent").getTombstoneContentForSnippet(d.author),snippet_attachments:null,snippet_sender:null};if(a==null)return e;f=d.log_message_type;return{snippet:a,snippet_attachments:d.attachments,snippet_sender:f==null?d.author:null}}function Va(c,a){var d=a.attachments;if(d==null)return;var e=b("bs_belt_Array").keepMap(d,function(a){if(!(b("MercuryAttachment").isPhotoAttachment(a)||b("MercuryAttachment").isVideoAttachment(a)))return;a=a.metadata;if(!(a==null))return b("bs_caml_option").nullable_to_opt(a.fbid)});b("MessengerSharedMediaActionsLoader").deletePhotos(b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id),e);if(c!==void 0)return b("MessengerSharedPhotosVideosBaseData.bs").localRemove(b("bs_caml_option").valFromOption(c),b("bs_belt_Array").keepMap(d,function(a){if(!(b("MercuryAttachment").isPhotoAttachment(a)||b("MercuryAttachment").isVideoAttachment(a)))return;a=a.metadata;if(!(a==null))return b("bs_caml_option").nullable_to_opt(a.fbid)}))}function Wa(a,c,d){d=a.orderedMessageLists.get(d);if(d==null)return a;d=d.messageIDs;var e={contents:!0};return b("bs_belt_Array").reduce(d,a,function(d,a){if(!e.contents)return d;var f=d.localIDsMap.get(a);f=b("bs_belt_Option").getWithDefault(f==null?void 0:b("bs_caml_option").some(f),a);if(f===c){e.contents=!1;return d}a=D(d,f);if(a===void 0)return d;a=b("bs_caml_option").valFromOption(a);var g=a.replied_to_message,h;if(g==null)h=void 0;else{g=g.message;if(g==null)h=void 0;else{var i=d.localIDsMap.get(g.message_id);h=b("bs_belt_Option").getWithDefault(i==null?void 0:b("bs_caml_option").some(i),g.message_id)}}if(h===void 0)return d;if(h!==c)return d;i={status:b("RepliedToMessageStatusForGraphQL").DELETED,message:null};g=Object.assign(Object.assign({},a),{replied_to_message:i});return F(d,[f,g])})}function Xa(a,c){if(a==null)return 0;if(a.length===0)return 0;a=b("bs_array").map(function(a){var d=a.type;if(b("bs_caml_obj").caml_equal(d,b("MessageProfileRangeType").THREAD_ACTIVE)||b("bs_caml_obj").caml_equal(d,b("MessageProfileRangeType").THREAD))return b("gkx")("678578");d=a.id;if(d==null)return!1;else return b("bs_caml_obj").caml_equal(b("FBID.bs").ofStringExn(d),c)},a);return b("bs_array").fold_left(function(a,b){if(b)return a+1|0;else return a},0,a)}function Ya(a,c,d){if(b("cr:1299779")==null)return;var e=b("MercuryIDs").getThreadFBIDFromThreadID(a);return b("bs_curry")._1(b("cr:1299779").log,{event_name:b("MessengerWebEvent").SENT_MSG,mid:c,offline_threading_id:d,other_user_fbid:b("MercuryIDs").isCanonical(a)?e:null,thread_fbid:b("MercuryIDs").isGroupChat(a)?e:null})}function Za(d,c,e,f){var g=e.client_message_id,h;if(g==null)h=d;else{var i=D(d,g);if(i!==void 0){i=b("bs_caml_option").valFromOption(i);var j=e.message_id,k=e.status;if(b("bs_caml_obj").caml_equal(i.status,b("MercuryActionStatus").SUCCESS))h=d;else if(d.messages.has(j)){var a=Object.assign(Object.assign({},i),e);Ka(d.fbid,a.thread_id,a.message_id,f);h=F(d,[j,a])}else{a=b("bs_caml_obj").caml_equal(e.status,b("MercuryActionStatus").SUCCESS)?e.error_data:null;b("MercuryMessageIDs.bs").addServerID(g,j);d.localIDsMap.set(g,j);i=Object.assign(Object.assign({},i),{status:k,error_data:a,timestamp:e.timestamp,log_message_data:e.log_message_data,ranges:e.ranges,attachments:e.attachments,has_attachment:e.has_attachment,is_one_way_sent:e.is_one_way_sent,is_forwarded:e.is_forwarded});b("MessengerMessage.bs").finalizeRanges(i);k=F(d,[j,i]);k.messages.set(g,{});k.messages["delete"](g);a=i.thread_id;var l=k.orderedMessageLists.get(a);if(!(l==null)){var m=Qa(k,l.messageIDs);k.orderedMessageLists.set(a,{messageLoadingState:l.messageLoadingState,messageIDs:m})}Ka(k.fbid,i.thread_id,i.message_id,f);a=b("MessengerMessage.bs").isTitanMessage(i);l=c.localTitanMessageCount.get(i.thread_id);a&&!(l==null)&&c.localTitanMessageCount.set(i.thread_id,l-1|0);h={fbid:k.fbid,deliveryReceipts:k.deliveryReceipts,readReceiptsPerThread:k.readReceiptsPerThread,ignoredIds:k.ignoredIds,blockedIds:k.blockedIds,pendingFolderUnseenCount:k.pendingFolderUnseenCount,typing:k.typing,threads:k.threads,pendingReadStatusThreads:k.pendingReadStatusThreads,messages:k.messages,localIDsMap:k.localIDsMap.set(g,j),messagesWithUploadsInFlight:k.messagesWithUploadsInFlight,threadlistOrderMap:k.threadlistOrderMap,pinnedThreads:k.pinnedThreads,montage:k.montage,orderedMessageLists:k.orderedMessageLists,unreadCounts:k.unreadCounts,initialUnreadCounts:k.initialUnreadCounts,unseenTimestamp:k.unseenTimestamp}}}else h=d}m={};f=e.log_message_type;if(f==null)Object.assign(m,{snippet_attachments:e.attachments});else{if(b("bs_caml_obj").caml_equal(f,b("MercuryLogMessageType").THREAD_IMAGE)){a=e.log_message_data;if(a==null)c=null;else{i=a.image;c=i==null?null:i.preview_url}Object.assign(m,{image_src:c});u(h.fbid,e.thread_id)}b("bs_caml_obj").caml_notequal(f,b("MercuryLogMessageType").SUBSCRIBE)&&b("bs_caml_obj").caml_notequal(f,b("MercuryLogMessageType").UNSUBSCRIBE)&&Object.assign(m,{snippet_attachments:e.attachments})}Ya(e.thread_id,e.message_id,e.offline_threading_id);return v(void 0,h,e.thread_id,m)}function $a(c,a,d,e){if(b("bs_caml_obj").caml_equal(d.action_type,b("MercuryActionType").SEND_MESSAGE))return Za(c,a,d,e);var f=d.offline_threading_id;f=b("bs_belt_Option").flatMap(f==null?void 0:b("bs_caml_option").some(f),function(a){return b("bs_caml_option").nullable_to_opt(c.localIDsMap.get(a))});var g=D(c,d.message_id);if(f!==void 0){if(g===void 0)return c;f=b("bs_caml_option").valFromOption(g);if(b("bs_caml_option").nullable_to_opt(f.sticker_id)===void 0)return c;var h=Object.assign(f,{attachments:d.attachments});return F(c,[f.message_id,h])}if(g!==void 0)return c;f=b("bs_caml_obj").caml_equal(e,b("bs_caml_option").some(b("MercuryPayloadSource").CLIENT_SEND_MESSAGE))?G(c,d):c;h=b("bs_caml_obj").caml_equal(d.client_state,b("MercuryMessageClientState").DO_NOT_SEND_TO_SERVER);g=d.upload_id;e=h&&!(g==null)?J(f,g,d):f;h=b("MessengerMessage.bs").isErrorLogMessage(d);g=d.thread_id;h&&!(g==null)&&(a.failedHistoryFetchThreads.contents[g]=!0);f=d.manual_retry_cnt;h=d.thread_id;!(f==null)&&!(h==null)&&f>0&&Ma(e.fbid,h,b("MercuryPayloadSource").CLIENT_SEND_MESSAGE);g=Ra(e,a,[d.message_id,d,1]);La(g.fbid,d);return g}function ab(a,c,d,e){if(c===void 0)return;c=b("bs_caml_obj").caml_equal(b("bs_caml_option").valFromOption(c),b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE);var f=d.thread_id;if(!c){!(f==null);return}if(f==null)return;c=b("MercuryThreadInformer").getForFBID(a);return b("bs_curry")._3(e,c,f,d)}function bb(a,b){var c=a.participants.indexOf(b);if(c>0){Object.assign(a,{participants:[b].concat(a.participants.slice(0,c),a.participants.slice(c+1|0))});return}}function cb(c,d,e,f){var g=d.thread_id;if(g==null)return c;var a=b("bs_belt_Map").get(c.threads,g);if(a===void 0)return c;a=b("bs_caml_option").valFromOption(a);var h={};if(!d.skip_bump_thread&&b("bs_caml_obj").caml_notequal(e,b("bs_caml_option").some(b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO))){Ga(h,d,b("bs_caml_option").nullable_to_opt(d.log_message_body));if(d.timestamp>a.timestamp){Object.assign(h,{timestamp:d.timestamp});if(d.is_unread){Object.assign(h,{unread_count:a.unread_count+1|0});e=Xa(d.profile_ranges,c.fbid);e>0&&Object.assign(h,{unread_mentions_count:a.unread_mentions_count+e|0})}}Object.assign(h,{message_count:a.message_count+1|0,is_archived:!1})}f!==!0&&d.timestamp>h.server_timestamp&&Object.assign(h,{server_timestamp:d.timestamp});if(b("bs_caml_obj").caml_notequal(h,{}))return v(void 0,c,g,h);else return c}function db(b,a,c){var d=new Set(c);Object.assign(a,{participants:a.participants.filter(function(a){return!d.has(a)})});if(d.has(b)){Object.assign(a,{can_reply:!1,is_subscribed:!1});return}}function K(c,a,d){a=a.specific_to_list;if(!(a==null))return a;a=b("MercuryIDs").tokenize(d);if(a.type!=="user"||a.value.length===0)return[c];else return[b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(a.value)),c]}function L(c,a,d){var e=b("MercuryIDs").tokenize(d),f=e.type==="user",g=a.specific_to_list;g=f?!0:g==null?!1:b("MessengerThreadUtils.bs").isCanonicalFromInitialParticipants(c,g);if(g||f)c=K(c,a,d);else{var h=a.specific_to_list;c=h==null?[]:h}return new(b("ImmutableObject"))({admins:{},admin_model_status:null,approval_mode:0,approval_queue_ids:[],associated_object:null,can_reply:!0,cannot_reply_reason:null,can_viewer_report:!1,comm_item_owners:null,comm_source_id:null,comm_status:null,comm_icon_type:[],composer_input_disabled:null,custom_like_icon:null,custom_nickname:null,customization_enabled:!1,description:null,ephemeral_ttl_mode:0,footer_color:null,game_id:null,gradient_colors:[],accessibility_label:null,reverse_gradients_for_radial:null,group_approval_queue:null,group_thread_subtype:null,work_associated_group:null,pinned_messages:null,groups_sync_status:null,has_email_participant:!1,has_montage:!1,unread_mentions_count:0,header_color:null,is_canonical_neo_user:!1,is_from_weak_entry_point:!1,is_pin_protected:!1,is_pinned:!1,is_thread_queue_enabled:!1,joinable_mode:{link:"",mode:0},last_message_timestamp:0,last_message_type:null,last_message_admin_text_type:null,last_message_unsendability_status:null,last_message_id:null,last_read_timestamp:0,lightweight_event:null,lightweight_events:{},marketplace_thread_data:null,mentions_mute_mode:0,mute_until:null,page_comm_item_id:null,page_thread_info:null,page_unsubscribe_status:!1,participant_add_mode:null,participants_event_status:null,reactions_mute_mode:0,read_only:!1,recipients_loadable:!0,rtc_call_data:null,server_timestamp:0,solid_color:null,subtitle:null,theme_id:null,reactions:void 0,thread_associated_job_applications:null,thread_associated_page_admin:null,thread_connectivity_data:null,thread_fbid:null,thread_type:null,thread_pin_timestamp:null,thread_id:d,participants:c,preloaded_participants:[],name:"",snippet:a.body,snippet_attachments:[],snippet_sender:a.author,unread_count:0,message_count:0,image_src:null,square_image_src:null,timestamp:a.timestamp,other_user_fbid:f?b("FBID.bs").ofStringExn(e.value):null,is_canonical_user:f,is_other_recipient_page:!1,is_canonical:g,is_subscribed:!0,folder:"inbox",is_archived:!1,is_page_follow_up:!1,is_page_unresponded_thread:!1,object_association_type:null,joinable_link:null,linked_mentorship_programs:null,thread_unsendability_status:null,is_business_page_active:!1,graphql_token:null,conversion_detection_data:null,suggested_reply_data:null})}function eb(c,d,a,e){e=b("MessengerMessage.bs").hasServerTimestamp(a,e);var f=a.thread_id;if(f==null)return;b("MercuryAssert").isThreadID(f);d=b("bs_belt_Map").get(d,f);if(d!==void 0)return b("bs_caml_option").some(b("bs_caml_option").valFromOption(d));else if(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)&&!e)return b("bs_caml_option").some(L(b("MercuryIDs").getParticipantIDFromUserID(c),a,f));else return}function fb(c,d){var a=d.other_user_fbid;if(a==null){var e=d.thread_fbid;e=e==null?void 0:b("bs_caml_option").some(b("MercuryIDs").getThreadIDFromThreadFBID(e))}else e=b("bs_caml_option").some(b("MercuryIDs").getThreadIDFromUserID(a));a=d.thread_id;e=a==null?e:a==null?void 0:b("bs_caml_option").some(a);a=d.thread_id;var f;if(a==null)f="";else{a=b("bs_belt_Map").get(c.threads,a);f=a!==void 0?b("MessengerFolders.bs").getFromMeta(b("bs_caml_option").valFromOption(a)):d.folder}za.includes(f)&&(b("bs_caml_obj").caml_equal(d.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)||b("bs_caml_obj").caml_equal(d.action_type,b("MercuryActionType").LOG_MESSAGE))&&d.is_unread&&ya(c,f,e);return{fbid:c.fbid,deliveryReceipts:c.deliveryReceipts,readReceiptsPerThread:c.readReceiptsPerThread,ignoredIds:c.ignoredIds,blockedIds:c.blockedIds,pendingFolderUnseenCount:c.pendingFolderUnseenCount,typing:c.typing,threads:c.threads,pendingReadStatusThreads:c.pendingReadStatusThreads,messages:c.messages,localIDsMap:c.localIDsMap,messagesWithUploadsInFlight:c.messagesWithUploadsInFlight,threadlistOrderMap:c.threadlistOrderMap,pinnedThreads:c.pinnedThreads,montage:c.montage,orderedMessageLists:c.orderedMessageLists,unreadCounts:c.unreadCounts,initialUnreadCounts:c.initialUnreadCounts,unseenTimestamp:c.unseenTimestamp}}var gb=function(a,b){delete a[b];return 0};function hb(a,c){Object.keys(c).forEach(function(d){var e=b("bs_js_dict").get(c,d);if(e===void 0)return;var f=e[0],g=k(f.reduce(function(c,d){var e=b("bs_belt_Map").get(a,d);if(e!==void 0)return b("bs_belt_Map").set(c,d,b("bs_caml_option").valFromOption(e));else return c},b("bs_belt_Map").make(b("ThreadId.bs"))));if(Object.keys(g).length===f.length){gb(c,d);return b("bs_curry")._1(e[1],g)}})}function ib(c,a,d,e,f){var g=c.fbid;d!==0&&ra(g,a.thread_id,f,d);if(a.timestamp===0){b("ChatReliabilityInstrumentation").logERROR("thread timestamp is 0");e.add(a.thread_id);return}d=a.unread_count===0;if(d===f)return;u(g,a.thread_id);if(f)e=0;else{d=b("bs_belt_Option").flatMap(b("bs_caml_option").nullable_to_opt(c.orderedMessageLists.get(a.thread_id)),function(a){return b("bs_belt_Array").get(E(void 0,c,a.messageIDs),0)});g=d!==void 0?b("bs_caml_option").valFromOption(d).profile_ranges:null;e=Xa(g,c.fbid)}return{unread_count:f?0:1,unread_mentions_count:e}}function jb(a,c,d,e,f){f=b("gkx")("1275193")||b("gkx")("1660458")?xa(a,f,c,d):wa(a,f,c,d);a=a.threadlistOrderMap[c];c=b("bs_js_dict").get(a,d);c=c!==void 0?b("bs_caml_option").valFromOption(c).reachedEnd:!1;a[d]={reachedEnd:e.contents?e.contents:c,threadlist:f[0],existingIDs:f[1]}}function kb(a,c,d,e){var f=b("bs_belt_Array").make(e.length,[]),g={contents:!1};d.forEach(function(d){d.thread_ids.forEach(function(c){var h=b("bs_belt_Map").get(a.threads,c);if(h===void 0)return;h=w(b("bs_caml_option").valFromOption(h));for(var g=0,d=e.length;g<d;++g){var i=h.find(function(a){return function(c){return c===b("bs_caml_array").get(e,a)}}(g));(i===void 0?void 0:b("bs_caml_option").some(i))!==void 0&&b("bs_caml_array").get(f,g).push(c)}});d=d.limit;var h=e.find(function(a){return a===b("MercuryFilters.bs").all});h=h===void 0?void 0:b("bs_caml_option").some(h);for(var i=0,c=f.length;i<c;++i)(h===void 0&&b("bs_caml_array").get(f,i).length<d||b("bs_caml_array").get(e,i)===b("MercuryFilters.bs").all&&b("bs_caml_array").get(f,i).length<d)&&(g.contents=!0)});for(var d=0,h=e.length;d<h;++d)jb(a,c,b("bs_caml_array").get(e,d),g,b("bs_caml_array").get(f,d))}function M(c,a){var d;if(a.is_archived)d="action:archived";else{var e=a.thread_type;d=e==null||e!==b("MessagingThreadType").MARKETPLACE?a.folder:"marketplace_folder"}e=b("bs_js_dict").get(c.threadlistOrderMap,d);if(e!==void 0)return d}function lb(a,c){var d={};na.forEach(function(a){var b={};ma.forEach(function(a){b[a]=[]});d[a]=b});c.forEach(function(c){var e=b("bs_belt_Map").get(a.threads,c.thread_id);if(e===void 0)return;var f=b("bs_caml_option").valFromOption(e),g=M(a,f);if(g!==void 0){w(f).forEach(function(a){if(f.timestamp!==0){d[g][a].push(c.thread_id);return}});return}});na.forEach(function(c){ma.forEach(function(e){var f=d[c][e];b("gkx")("1275193")||b("gkx")("1660458")?xa(a,f,c,e):wa(a,f,c,e)})});return{fbid:a.fbid,deliveryReceipts:a.deliveryReceipts,readReceiptsPerThread:a.readReceiptsPerThread,ignoredIds:a.ignoredIds,blockedIds:a.blockedIds,pendingFolderUnseenCount:a.pendingFolderUnseenCount,typing:a.typing,threads:a.threads,pendingReadStatusThreads:a.pendingReadStatusThreads,messages:a.messages,localIDsMap:a.localIDsMap,messagesWithUploadsInFlight:a.messagesWithUploadsInFlight,threadlistOrderMap:a.threadlistOrderMap,pinnedThreads:a.pinnedThreads,montage:a.montage,orderedMessageLists:a.orderedMessageLists,unreadCounts:a.unreadCounts,initialUnreadCounts:a.initialUnreadCounts,unseenTimestamp:a.unseenTimestamp}}function mb(a){b("bs_belt_Map").map(a.threads,function(c){c=b("bs_belt_Map").get(a.threads,c.thread_id);if(c===void 0)return;c=b("bs_caml_option").valFromOption(c);if(b("bs_caml_option").nullable_to_opt(c.thread_type)!==b("MessagingThreadType").MARKETPLACE)return;c=b("ImmutableObject").set(c,{folder:"marketplace_folder"});lb(a,[c])})}function nb(c,a,d){var e=function(a){return a.timestamp>(d&&c.unseenTimestamp<=a.last_read_timestamp?a.last_read_timestamp:c.unseenTimestamp)},f=function(a){var d;return(d=b("bs_belt_Option")).mapWithDefault(d.flatMap(d.map(d.map(b("bs_caml_option").nullable_to_opt(c.orderedMessageLists.get(a.thread_id)),function(a){return b("bs_caml_array").get(a.messageIDs,0)}),function(a){return b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(c.localIDsMap.get(a)),a)}),function(a){return b("bs_caml_option").nullable_to_opt(c.messages.get(a))}),!1,function(a){return a.author===b("MercuryIDs").getParticipantIDFromUserID(c.fbid)})},g=function(a,c){if(e(a)&&!b("MercuryThreadInfo").isMuted(a)&&!f(a))return c+1|0;else return c};return b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(b("bs_belt_Option").flatMap(b("bs_js_dict").get(c.threadlistOrderMap,"inbox"),function(a){return b("bs_js_dict").get(a,b("MercuryFilters.bs").all)}),function(d){d=d.threadlist;if(d.length!==0)return d.reduce(function(a,d){d=b("bs_belt_Map").get(c.threads,d);if(d!==void 0)return g(b("bs_caml_option").valFromOption(d),a);else return a},0);else if(b("bs_belt_Map").isEmpty(c.threads))return a.fallbackUnseenCount.contents;else return b("bs_belt_Map").reduce(c.threads,0,function(b,d,a){d=M(c,a);if(d==="inbox")return g(a,b);else return b})}),a.fallbackUnseenCount.contents)}function N(c,a){return b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(b("bs_belt_Option").flatMap(b("bs_js_dict").get(c.threadlistOrderMap,"inbox"),function(a){return b("bs_js_dict").get(a,b("MercuryFilters.bs").all)}),function(d){if(d.threadlist.length===0)if(b("bs_belt_Map").isEmpty(c.threads))return a.fallbackUnseenCount.contents;else return b("bs_belt_Map").reduce(c.threads,0,function(d,e,a){var f=M(c,a);if(f===void 0)return d;if(f!=="inbox")return d;if(!(a.timestamp>c.unseenTimestamp&&!b("MercuryThreadInfo").isMuted(a)))return d;f=b("bs_js_dict").get(c.unreadCounts,"inbox");if(f!==void 0&&b("bs_caml_option").valFromOption(f).has(e))return d+1|0;else return d});else return d.threadlist.reduce(function(d,e){var a=b("bs_belt_Map").get(c.threads,e);if(a===void 0)return d;a=b("bs_caml_option").valFromOption(a);if(!(a.timestamp>c.unseenTimestamp&&!b("MercuryThreadInfo").isMuted(a)))return d;a=b("bs_js_dict").get(c.unreadCounts,"inbox");if(a!==void 0&&b("bs_caml_option").valFromOption(a).has(e))return d+1|0;else return d},0)}),a.fallbackUnseenCount.contents)}function ob(c,a,d){if(d==="pending")return{fbid:c.fbid,deliveryReceipts:c.deliveryReceipts,readReceiptsPerThread:c.readReceiptsPerThread,ignoredIds:c.ignoredIds,blockedIds:c.blockedIds,pendingFolderUnseenCount:0,typing:c.typing,threads:c.threads,pendingReadStatusThreads:c.pendingReadStatusThreads,messages:c.messages,localIDsMap:c.localIDsMap,messagesWithUploadsInFlight:c.messagesWithUploadsInFlight,threadlistOrderMap:c.threadlistOrderMap,pinnedThreads:c.pinnedThreads,montage:c.montage,orderedMessageLists:c.orderedMessageLists,unreadCounts:c.unreadCounts,initialUnreadCounts:c.initialUnreadCounts,unseenTimestamp:c.unseenTimestamp};if(b("gkx")("969964")){d=b("MercuryThreadInformer").getForFBID(c.fbid);d.updatedUnseenTimestamp()}return{fbid:c.fbid,deliveryReceipts:c.deliveryReceipts,readReceiptsPerThread:c.readReceiptsPerThread,ignoredIds:c.ignoredIds,blockedIds:c.blockedIds,pendingFolderUnseenCount:c.pendingFolderUnseenCount,typing:c.typing,threads:c.threads,pendingReadStatusThreads:c.pendingReadStatusThreads,messages:c.messages,localIDsMap:c.localIDsMap,messagesWithUploadsInFlight:c.messagesWithUploadsInFlight,threadlistOrderMap:c.threadlistOrderMap,pinnedThreads:c.pinnedThreads,montage:c.montage,orderedMessageLists:c.orderedMessageLists,unreadCounts:c.unreadCounts,initialUnreadCounts:c.initialUnreadCounts,unseenTimestamp:a}}function O(a,c,d){var e=[];return b("bs_array").fold_left(function(f,g){switch(g.TAG|0){case 0:e.push(g._0.TAG|0);break;case 1:case 2:break}switch(g.TAG|0){case 0:var i=g._0;if(typeof i==="number"){a.threadCallbacks.contents={};a.threadSubToken.contents=a.threadSubToken.contents;a.failedHistoryFetchThreads.contents={};a.localTitanMessageCount.clear();b("bs_belt_Map").keysToArray(f.threads).forEach(function(a){return pa(f.fbid,a)});return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:void 0,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:b("bs_belt_Map").make(b("ThreadId.bs")),pendingReadStatusThreads:new Set(),messages:new Map(),localIDsMap:new Map(),messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:oa(void 0),pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:new Map(),unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp}}switch(i.TAG|0){case 0:var m=i._0,n={contents:!1},o={contents:f.deliveryReceipts};Object.keys(m).forEach(function(a){var c=m[a],d=b("bs_belt_Option").getWithDefault(b("bs_belt_MapString").get(o.contents,a),0);if(c>d){n.contents=!0;o.contents=b("bs_belt_MapString").set(o.contents,a,c);return}});if(n.contents)return{fbid:f.fbid,deliveryReceipts:o.contents,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};else return f;case 1:return ia(f,i._0,[]);case 2:var p=i._0,q=i._1;q=q.reduce(b("bs_belt_Set").remove,p.reduce(b("bs_belt_Set").add,f.blockedIds));if(q===f.blockedIds)return f;else return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:q,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 3:p=i._0;q=p.reduce(function(a,c){var d=c.is_messenger_ignored;if(d==null)return a;else if(d)return b("bs_belt_Set").add(a,b("MercuryIDs").getParticipantIDFromUserID(c.fbid));else return b("bs_belt_Set").remove(a,b("MercuryIDs").getParticipantIDFromUserID(c.fbid))},f.ignoredIds);if(q===f.ignoredIds)return f;else return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:q,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 4:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("SetInitialPendingFolderUnseenCount");p=i._0;return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:p,typing:f.typing,threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 5:q=i._0;p=la(f.fbid,q);if(p==null)return f;var r=b("FBID.bs").ofString(q.from.toString());if(r===void 0)return f;b("MessengerPersonas.bs").addPersona(q.persona);var s=q.persona;r=s==null?b("MercuryIDs").getParticipantIDFromUserID(b("bs_caml_option").valFromOption(r)):b("MercuryIDs").getParticipantIDFromUserID(s.id);if(q.st===b("TypingStates").TYPING){s=b("bs_belt_MapString").get(f.typing,p);if(s!==void 0)return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:b("bs_belt_MapString").set(f.typing,p,b("bs_belt_Map").set(b("bs_caml_option").valFromOption(s),r,Date.now())),threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};s=b("bs_belt_Map").set(b("bs_belt_Map").make(b("ParticipantId.bs")),r,Date.now());return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:b("bs_belt_MapString").set(f.typing,p,s),threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp}}if(q.st!==b("TypingStates").INACTIVE)return f;s=ka(f.typing,p,r);if(s!==f.typing)return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:s,threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};else return f;case 6:var ba=i._0,ca={contents:!1},t={contents:f.readReceiptsPerThread};Object.keys(ba).forEach(function(a){Object.keys(ba[a]).forEach(function(c){var d=b("bs_belt_MapString").get(t.contents,a);d=d!==void 0?b("bs_caml_option").valFromOption(d):b("immutable").OrderedMap();var e=d.get(c),f=ba[a][c];if(!(e==null)&&f.watermark<=e.watermark)return;ca.contents=!0;t.contents=b("bs_belt_MapString").set(t.contents,a,d.set(c,f))});var c=b("bs_belt_MapString").get(t.contents,a);if(c!==void 0){ca.contents=!0;t.contents=b("bs_belt_MapString").set(t.contents,a,b("bs_caml_option").valFromOption(c).sort(function(a,c){return b("bs_caml_primitive").caml_float_compare(a.watermark,c.watermark)}));return}});if(ca.contents)return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:t.contents,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};else return f;case 7:q=i._0;if(q.length===0)return f;p=f.threads;r=q.reduce(function(c,a){return b("bs_belt_Map").set(c,a.thread_id,new(b("ImmutableObject"))(a))},p);hb(r,a.threadCallbacks.contents);q.forEach(function(a){return u(f.fbid,a.thread_id)});return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:r,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 8:s=i._0;if(s.length===0)return f;var da=f.pendingReadStatusThreads,ea=b("MercuryServerRequests").getForFBID(f.fbid);s.forEach(function(a){var b=a.thread_id;if(da.has(b)){da["delete"](b);if(a.unread_count>0){ea.changeThreadReadStatus(b,!0,null,null,null,null);return}else return}});return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:f.threads,pendingReadStatusThreads:da,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 9:var fa=i._0;b("qex")._("998180")&&b("MessengerEnvironment").messengerdotcom&&mb(f);na.forEach(function(a){ma.forEach(function(c){var d=fa.filter(function(d){var e=d.filter;e=e==null?b("MercuryFilters.bs").all:e;d=d.folder;d=d==null?a==="inbox":d===a;if(d)return e===c;else return!1});if(!b("gkx")("1275193")&&!b("gkx")("1660458")||a!=="inbox"&&a!=="action:archived"&&a!=="pending"||c===b("MercuryFilters.bs").groups){var e=[],g={contents:!1};d.forEach(function(a){a.thread_ids.forEach(function(a){e.push(a)});var b=a.limit;if(a.thread_ids.length<b){g.contents=!0;return}});return jb(f,a,c,g,e)}if(c!==b("MercuryFilters.bs").all)return kb(f,a,d,[b("MercuryFilters.bs").all,c]);var h=b("gkx")("1275193")?[b("MercuryFilters.bs").all,b("MercuryFilters.bs").unread,b("MercuryFilters.bs").named,b("MercuryFilters.bs").unnamed]:[b("MercuryFilters.bs").all,b("MercuryFilters.bs").unread,b("MercuryFilters.bs").unsyncedChat];return kb(f,a,d,h)})});return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 10:return lb(f,i._0);case 11:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdatePinnedThreads");p=i._0;if(p.length===0)return f;p.forEach(function(b){if(!a.existingPinnedThreads.has(b)){f.pinnedThreads.push(b);a.existingPinnedThreads.add(b);return}});q=b("MercuryThreadInformer").getForFBID(f.fbid);q.updatedThreadlist();return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 12:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UnSubscribeStatusUpdate");r=i._0;var ha=i._1;return v(function(a){return a.page_unsubscribe_status!==ha},f,r,{page_unsubscribe_status:ha});case 13:s=i._0;p=i._1;q=i._2;return v(void 0,f,s,{can_reply:p,cannot_reply_reason:q});case 14:r=i._0;s=i._1;p=b("bs_belt_Map").get(f.threads,r);if(p===void 0)return f;q=Object.assign({},b("bs_caml_option").valFromOption(p));ua(b("MercuryIDs").getParticipantIDFromUserID(f.fbid),q,s);return v(void 0,f,r,q);case 15:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangeFlag");p=i._0;s=i._1;r=b("bs_belt_Map").get(f.threads,p);if(r===void 0)return f;q=b("bs_caml_option").valFromOption(r);r=q.page_thread_info;q=b("ImmutableObject").set(q,{page_thread_info:Object.assign(r==null?{}:r,{flagged:s})});r=b("bs_belt_Map").set(f.threads,p,q);u(f.fbid,p);return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:r,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 16:s=i._0;return v(function(a){return b("MessageRequestUtils").isMessageRequest(a)},f,s,{folder:"inbox"});case 17:q=i._0;p=i._1;return v(void 0,f,q,{custom_like_icon:p});case 18:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("PromoteGroupAdmins");r=i._0;s=i._1;q=b("bs_belt_Map").get(f.threads,r);if(q===void 0)return f;p=b("bs_caml_option").valFromOption(q);q=b("bs_js_dict").fromArray(b("bs_js_dict").entries(p.admins));p=b("ImmutableObject").set(p,{admins:b("bs_array").fold_left(function(a,b){a[b.admin_fbid]=b.admin_type;return a},q,s)});q=b("bs_belt_Map").set(f.threads,r,p);u(f.fbid,r);return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:q,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 19:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("RemoveGroupAdmins");s=i._0;p=i._1;r=b("bs_belt_Map").get(f.threads,s);if(r===void 0)return f;q=b("bs_caml_option").valFromOption(r);r=b("bs_js_dict").fromArray(b("bs_js_dict").entries(q.admins));q=b("ImmutableObject").set(q,{admins:b("bs_array").fold_left(function(c,a){var d=b("bs_js_dict").get(c,a);d!==void 0&&ja(c,a);return c},r,p)});r=b("bs_belt_Map").set(f.threads,s,q);u(f.fbid,s);return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:r,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 20:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("JoinableMode");p=i._0;q=i._1;return v(void 0,f,p,{joinable_mode:q});case 21:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ApprovalMode");s=i._0;r=i._1;return v(void 0,f,s,{approval_mode:r});case 22:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ApprovalQueue");p=i._0;q=i._1;s=i._2;var ra=i._3,sa=i._4;r=b("bs_belt_Map").get(f.threads,p);if(r===void 0)return f;r=b("bs_caml_option").valFromOption(r);var w=r.group_approval_queue;r={approval_queue_ids:r.approval_queue_ids.slice(),group_approval_queue:w==null?null:w.slice()};!(q==null)&&r.approval_queue_ids.indexOf(q)===-1&&Object.assign(r,{approval_queue_ids:r.approval_queue_ids.concat([q])});if(!(s==null)){w=r.group_approval_queue;w==null?Object.assign(r,{group_approval_queue:[s]}):w.map(function(a){return a.requester.id}).indexOf(s.requester.id)===-1&&Object.assign(r,{group_approval_queue:w.concat([s])})}ra==null||Object.assign(r,{approval_queue_ids:r.approval_queue_ids.filter(function(a){return b("bs_caml_obj").caml_notequal(a,ra)})});if(!(sa==null)){q=r.group_approval_queue;Object.assign(r,{group_approval_queue:(q==null?[]:q).filter(function(a){return a.requester.id!==sa})})}return v(void 0,f,p,r);case 23:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("IsPinProtected");w=i._0;s=i._1;return v(void 0,f,w,{is_pin_protected:s});case 24:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateRtcCallData");q=i._0;p=i._1;r=i._2;w=i._3;s=b("bs_belt_Map").get(f.threads,q);if(s===void 0)return f;if(p==null){s=b("bs_caml_option").valFromOption(s).rtc_call_data;s=s==null?void 0:p}else s=p;return v(void 0,f,q,{rtc_call_data:new(b("ImmutableObject"))({call_state:r,server_info_data:w,initiator_fbid:s})});case 25:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateCommStatus");p=i._0;q=i._1;return v(void 0,f,p,{comm_status:q});case 26:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateCommItemOwner");r=i._0;w=i._1;s=i._2;p=i._3;q=w==null?{nodes:[]}:{nodes:[{admin:{id:w,name:s,profile_picture:{uri:p}}}]};v(void 0,f,r,{comm_item_owners:q});if(w==null)return v(void 0,f,r,{thread_associated_page_admin:null});else return v(void 0,f,r,{thread_associated_page_admin:{id:w,name:s,profile_picture:{uri:p}}});case 27:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("EventRsvpChanged");q=i._0;var xa=i._1;r=i._2;w=b("bs_belt_Map").get(f.threads,q);if(w===void 0)return f;s=b("bs_caml_option").valFromOption(w).participants_event_status;p=(s==null?[]:s).filter(function(a){return b("bs_caml_obj").caml_notequal(a.participant_id,xa)});p.push({participant_id:xa,event_status:r});return v(void 0,f,q,{participants_event_status:p});case 28:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("GroupsSyncStatusChanged");w=i._0;s=i._1;r=i._2;return!(r==null)&&b("bs_caml_obj").caml_equal(r,b("MessengerGroupsSyncStatus").OPT_IN)?v(void 0,f,w,{groups_sync_status:s}):v(void 0,f,w,{groups_sync_status:s,work_associated_group:null});case 29:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("GroupsSyncMetadataUpdate");q=i._0;p=i._1;r=i._2;w=i._3;if(p==null)return v(void 0,f,q,{work_associated_group:null});if(!b("bs_caml_obj").caml_equal(p,b("MessengerGroupsSyncStatus").OPT_IN))if(b("bs_caml_obj").caml_equal(p,b("MessengerGroupsSyncStatus").UPDATE_EMOJI))return v(void 0,f,q,{work_associated_group:{id:r,group_icon:{emoji_codepoints:w}}});else return v(void 0,f,q,{work_associated_group:null});s=new(h||(h=b("URI")))(document.URL);p=s.getDomain();w=va.getURIBuilder().setString("idorvanity",r).getURI().setDomain(p==null?"":p.replace("messenger.com","facebook.com")).setPort(s.getPort()).setProtocol("https");return v(void 0,f,q,{work_associated_group:{id:r,url:w.toString(),group_saves:{count:0},group_events:{count:0}}});case 30:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("DescriptionChanged");p=i._0;s=i._1;return v(void 0,f,p,{description:s});case 31:q=i._0;r=i._1;return v(void 0,f,q,{solid_color:r.solid_color,header_color:r.header_color,footer_color:r.footer_color,gradient_colors:r.gradient_colors,theme_id:r.theme_id,reactions:r.reactions});case 32:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateJoinableLink");w=i._0;p=i._1;return v(void 0,f,w,{joinable_link:p});case 33:var Ca=i._0;s=b("bs_belt_Map").toArray(f.threads).reduce(function(c,d){var a=d[1];d=d[0];if(a.folder===Ca){u(f.fbid,d);return b("bs_belt_Map").set(c,d,b("ImmutableObject").set(a,{unread_count:0,unread_mentions_count:0}))}else return c},f.threads);f.unreadCounts[Ca]=new Set();q=b("MercuryThreadInformer").getForFBID(f.fbid);q.updatedUnreadState();return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:s,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 34:var Ga=i._0;b("gkx")("1199097")&&b("ChatReliabilityInstrumentation").logDELETE_THREAD(Ga);r=b("bs_belt_Map").remove(f.threads,Ga);f.orderedMessageLists["delete"](Ga);f.messages.forEach(function(a,c,d){if(!b("bs_caml_obj").caml_equal(a.thread_id,Ga))return;f.messages["delete"](a.message_id);c=a.offline_threading_id;if(!(c==null)){d=f.localIDsMap.get(c);d==null||(f.messages["delete"](d),f.localIDsMap["delete"](c))}f.localIDsMap["delete"](a.message_id)});pa(f.fbid,Ga);return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:r,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 35:w=i._0;return Ra(f,a,[w.message_id,w,i._1]);case 36:p=[i._0,i._1,i._2];var x=p[2];q=p[1];var y=p[0];if(q.length===0)return f;s=Ta(f,[y,q,x]);r=0;x!==void 0&&b("bs_caml_obj").caml_equal(b("bs_caml_option").valFromOption(x),b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)||(r=1);r===1&&b("MercuryServerRequests").getForFBID(s.fbid).deleteMessages(y,q);return b("bs_belt_Array").reduce(q,s,function(d,e){var c=D(d,e),a=b("bs_belt_Map").get(d.threads,y);if(a!==void 0){a=b("bs_caml_option").valFromOption(a);a=b("ImmutableObject").set(b("ImmutableObject").set(a,Ua(d,y)),{message_count:a.message_count-1|0});a=b("bs_belt_Map").set(d.threads,y,a);u(d.fbid,y);a={fbid:d.fbid,deliveryReceipts:d.deliveryReceipts,readReceiptsPerThread:d.readReceiptsPerThread,ignoredIds:d.ignoredIds,blockedIds:d.blockedIds,pendingFolderUnseenCount:d.pendingFolderUnseenCount,typing:d.typing,threads:a,pendingReadStatusThreads:d.pendingReadStatusThreads,messages:d.messages,localIDsMap:d.localIDsMap,messagesWithUploadsInFlight:d.messagesWithUploadsInFlight,threadlistOrderMap:d.threadlistOrderMap,pinnedThreads:d.pinnedThreads,montage:d.montage,orderedMessageLists:d.orderedMessageLists,unreadCounts:d.unreadCounts,initialUnreadCounts:d.initialUnreadCounts,unseenTimestamp:d.unseenTimestamp}}else a=d;if(c!==void 0){d=b("bs_caml_option").valFromOption(c);Va(b("bs_caml_option").some(y),d);Na(a.fbid,y,e,x,d.attachments)}return a});case 37:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangeFolder");return Fa(f,i._0,i._1,1);case 38:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangeMuteSettings");w=i._0;p=i._1;r=b("bs_belt_Map").get(f.threads,w);if(r===void 0)return f;q=b("bs_caml_option").valFromOption(r);var Ha;switch(p.TAG|0){case 0:Ha=b("ImmutableObject").set(q,{reactions_mute_mode:p._0?1:0});break;case 1:Ha=b("ImmutableObject").set(q,{mentions_mute_mode:p._0?1:0});break;case 2:s=p._0;Ha=b("ImmutableObject").set(q,{mute_until:s===0?void 0:s});break}r=b("bs_belt_Map").set(f.threads,w,Ha);u(f.fbid,w);return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:r,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 39:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangeArchivedStatus");p=i._0;q=i._1;s=b("bs_belt_Map").get(f.threads,p);if(s===void 0)return f;w=b("bs_caml_option").valFromOption(s);if(w.is_archived===q)return f;r=b("MessengerFolders.bs").getFromMeta(w);s=w.comm_status;s=s==null?b("ImmutableObject").set(w,{is_archived:q}):b("ImmutableObject").set(w,{is_archived:q,comm_status:q?b("PageCommItemStatus").DONE:b("PageCommItemStatus").TODO});w=b("bs_belt_Map").set(f.threads,p,s);Ba(f,s,r);Ea(f,s);u(f.fbid,p);return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:w,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 40:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangePageFollowUpStatus");q=i._0;r=i._1;s=b("bs_belt_Map").get(f.threads,q);if(s===void 0)return f;p=b("bs_caml_option").valFromOption(s);if(p.is_page_follow_up===r)return f;w=b("ImmutableObject").set(p,{is_page_follow_up:r});s=b("bs_belt_Map").set(f.threads,q,w);u(f.fbid,q);return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:s,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 41:p=i._0;r=i._1;w=i._2;q=i._3;s=i._4;var z=b("bs_belt_Map").get(f.threads,p);if(z===void 0)return f;z=b("bs_caml_option").valFromOption(z);w=ib(f,z,w,f.pendingReadStatusThreads,r);w=w!==void 0&&z.last_message_timestamp>z.last_read_timestamp?b("bs_caml_option").some(Object.assign(b("bs_caml_option").valFromOption(w),{last_read_timestamp:z.last_message_timestamp})):w;if(w!==void 0){w=b("ImmutableObject").set(z,b("bs_caml_option").valFromOption(w));var A=b("bs_belt_Map").set(f.threads,p,w);if(q){q=!z.read_only&&z.folder==="inbox";var B=b("MercuryServerRequests").getForFBID(f.fbid);B.changeThreadReadStatus(w.thread_id,r,s,w.last_read_timestamp,q,w.last_message_type)}B=A}else B=f.threads;s=b("MessengerFolders.bs").getFromMeta(z);r?(ta(f,[p],s,b("MercuryFilters.bs").unread),Aa(f,s,b("bs_caml_option").some(p))):(b("gkx")("1275193")||b("gkx")("1660458")?Da(f,s,p):wa(f,[p],s,b("MercuryFilters.bs").unread),ya(f,s,b("bs_caml_option").some(p)));return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:B,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 42:var C=i._0;q=b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(b("bs_caml_option").nullable_to_opt(f.orderedMessageLists.get(C)),function(a){return{messageLoadingState:a.messageLoadingState,messageIDs:[]}}),{messageLoadingState:0,messageIDs:[]});f.orderedMessageLists.set(C,q);w=b("bs_belt_Option").map(b("bs_belt_Map").get(f.threads,C),function(a){return b("ImmutableObject").set(a,{message_count:0})});if(w!==void 0){var La=b("bs_caml_option").valFromOption(w);A=b("bs_belt_Map").set(f.threads,C,La);ma.forEach(function(a){return ta(f,[C],b("MessengerFolders.bs").getFromMeta(La),a)});z=A}else z=f.threads;za.forEach(function(a){a=b("bs_js_dict").get(f.unreadCounts,a);if(a!==void 0){b("bs_caml_option").valFromOption(a)["delete"](C);return}});qa(f.fbid,C);return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:z,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 43:r=[i._0,i._1,i._2];s=Sa(f,[r[0],r[1]]);p=s.thread_id;B=Ta(f,[p,[s.message_id],r[2]]);q=a.localTitanMessageCount.get(p);q==null||a.localTitanMessageCount.set(p,Math.max(0,q-1|0));return B;case 44:w=[i._0,i._1];A=Sa(f,[w[0],w[1]]);b("MercuryServerRequests").getForFBID(f.fbid).sendNewMessage(Object.assign(A,{preview_attachments:void 0}));return f;case 45:z=[i._0,i._1,i._2,i._3];s=z[2];r=z[1];p=z[0];q=D(f,p);if(q===void 0)return f;B=b("bs_caml_option").valFromOption(q);w=b("bs_js_dict").map(function(a){return a},b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(B.reactions),{}));r!==void 0?w[s]=r:Pa(w,s);A=Object.assign(Object.assign({},B),{reactions:w});q=B.thread_id;q==null||Ka(f.fbid,q,p,z[3]);return F(f,[p,A]);case 46:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("MontageDirectExpire");r=i._0;s=D(f,r);if(s===void 0)return f;w=b("bs_caml_option").valFromOption(s);B=w.attachments;if(B==null)return f;if(B.length===0)return f;q=b("bs_caml_array").get(B,0);z=q.share;if(z==null)return f;p=z.target;if(p==null)return f;A=p.message_state;if(A==null)return f;s=Object.assign(Object.assign({},w),{attachments:b("bs_caml_array").set(b("bs_array").copy(B),0,Object.assign(Object.assign({},q),{share:Object.assign(Object.assign({},z),{target:Object.assign(Object.assign({},p),{message_state:"EXPIRED"})})}))});return F(f,[r,s]);case 47:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("LiveLocationUpdate");A=[i._0,i._1,i._2];w=A[0];B=D(f,w);if(B===void 0)return f;q=b("bs_caml_option").valFromOption(B);z=q.attachments;if(z==null)return f;if(z.length===0)return f;p=b("bs_caml_array").get(z,0);r=p.share;if(r==null)return f;s=r.target;if(s==null)return f;B=b("bs_array").copy(z);b("bs_caml_array").set(B,0,Object.assign(Object.assign({},p),{share:Object.assign(Object.assign({},r),{target:Object.assign(Object.assign({},A[1]),{live_location_id:s.live_location_id})})}));z=Object.assign(Object.assign({},q),{attachments:B});p=q.thread_id;p==null||Ka(f.fbid,p,w,A[2]);return F(f,[w,z]);case 48:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ReplaceMessage");r=i._0;s=i._1;var E=r.replaced_message_id;if(E==null)return f;B=D(f,E);if(B===void 0)return f;q=r.message_id;p={timestamp:r.timestamp};A=b("bs_caml_option").nullable_to_opt(r.status);A!==void 0&&(p.status=b("bs_caml_option").valFromOption(A));w=b("bs_caml_option").nullable_to_opt(r.log_message_data);w!==void 0&&(p.log_message_data=b("bs_caml_option").valFromOption(w));z=b("bs_caml_option").nullable_to_opt(r.meta_ranges);z!==void 0&&(p.meta_ranges=b("bs_caml_option").valFromOption(z));A=b("bs_caml_option").nullable_to_opt(r.ranges);A!==void 0&&(p.ranges=b("bs_caml_option").valFromOption(A));w=b("bs_caml_option").nullable_to_opt(r.raw_attachments);w!==void 0&&(p.raw_attachments=b("bs_caml_option").valFromOption(w));z=b("bs_caml_option").nullable_to_opt(r.attachments);z!==void 0&&(p.attachments=b("bs_caml_option").valFromOption(z));A=b("bs_caml_option").nullable_to_opt(r.body);A!==void 0&&(p.body=b("bs_caml_option").valFromOption(A));w=b("bs_caml_option").nullable_to_opt(r.platform_xmd);w!==void 0&&(p.platform_xmd=b("bs_caml_option").valFromOption(w));z=b("bs_caml_option").nullable_to_opt(r.profile_ranges);z!==void 0&&(p.profile_ranges=b("bs_caml_option").valFromOption(z));A=p;w=Object.assign(Object.assign({},b("bs_caml_option").valFromOption(B)),A);b("MercuryMessageIDs.bs").addServerID(q,q);var G=F(f,[q,w]);if(q!==E){G.messages["delete"](E);G.localIDsMap.set(E,q);z=b("bs_belt_Option").flatMap(b("bs_caml_option").nullable_to_opt(r.thread_id),function(a){return b("bs_caml_option").nullable_to_opt(G.orderedMessageLists.get(a))});p=r.thread_id;if(z!==void 0&&!(p==null)){B=Qa(G,[q].concat(z.messageIDs.filter(function(a){return a!==E})));G.orderedMessageLists.set(p,{messageLoadingState:z.messageLoadingState,messageIDs:B})}}A=r.message_id;w=r.thread_id;w==null||(Ka(G.fbid,w,E,s),Ka(G.fbid,w,A,s));return{fbid:G.fbid,deliveryReceipts:G.deliveryReceipts,readReceiptsPerThread:G.readReceiptsPerThread,ignoredIds:G.ignoredIds,blockedIds:G.blockedIds,pendingFolderUnseenCount:G.pendingFolderUnseenCount,typing:G.typing,threads:G.threads,pendingReadStatusThreads:G.pendingReadStatusThreads,messages:G.messages,localIDsMap:G.localIDsMap,messagesWithUploadsInFlight:G.messagesWithUploadsInFlight,threadlistOrderMap:G.threadlistOrderMap,pinnedThreads:G.pinnedThreads,montage:G.montage,orderedMessageLists:G.orderedMessageLists,unreadCounts:G.unreadCounts,initialUnreadCounts:G.initialUnreadCounts,unseenTimestamp:G.unseenTimestamp};case 49:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateLocalTitanMessagesCount");q=[i._0,i._1];p=q[0];z=D(f,q[1]);if(z!==void 0&&b("MessengerMessage.bs").isTitanMessage(b("bs_caml_option").valFromOption(z))){B=a.localTitanMessageCount.get(p);B==null?a.localTitanMessageCount.set(p,1):a.localTitanMessageCount.set(p,1+B|0)}return f;case 50:return Za(f,a,i._0,i._1);case 51:r=i._0;w=i._1;A=i._2;s=r.author;if(s==null)q=!1;else{z=b("MercuryIDs").getUserIDFromParticipantID(s);q=z==null?!1:z===b("CurrentUser").getID()}p=r.offline_threading_id;B=p==null?void 0:b("bs_caml_option").nullable_to_opt(f.localIDsMap.get(p));s=B!==void 0;if(b("gkx")("1491696")&&!q&&b("bs_caml_obj").caml_equal(w,b("bs_caml_option").some(b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE))&&s)return f;z=cb(f,r,w,A==null?void 0:b("bs_caml_option").some(A));ab(z.fbid,w,r,function(a,b,c){a.informNewMessage(b,c)});p=z.fbid;if(r.folder==="pending"&&b("bs_caml_obj").caml_equal(w,b("bs_caml_option").some(b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)))B={fbid:z.fbid,deliveryReceipts:z.deliveryReceipts,readReceiptsPerThread:z.readReceiptsPerThread,ignoredIds:z.ignoredIds,blockedIds:z.blockedIds,pendingFolderUnseenCount:z.pendingFolderUnseenCount+1|0,typing:z.typing,threads:z.threads,pendingReadStatusThreads:z.pendingReadStatusThreads,messages:z.messages,localIDsMap:z.localIDsMap,messagesWithUploadsInFlight:z.messagesWithUploadsInFlight,threadlistOrderMap:z.threadlistOrderMap,pinnedThreads:z.pinnedThreads,montage:z.montage,orderedMessageLists:z.orderedMessageLists,unreadCounts:z.unreadCounts,initialUnreadCounts:z.initialUnreadCounts,unseenTimestamp:z.unseenTimestamp};else if(r.folder==="inbox"){q=r.thread_id;B=q==null?z:Fa(z,q,r.folder,0)}else{s=r.thread_id;if(s==null)B=z;else{q=eb(z.fbid,z.threads,r,A);if(q!==void 0){A=b("bs_caml_option").valFromOption(q);q=z.fbid;var H=z.deliveryReceipts,I=z.readReceiptsPerThread,J=z.ignoredIds,K=z.blockedIds,L=z.pendingFolderUnseenCount,M=z.typing,N=b("bs_belt_Map").set(z.threads,A.thread_id,A),O=z.pendingReadStatusThreads,P=z.messages,Q=z.localIDsMap,R=z.messagesWithUploadsInFlight,S=z.threadlistOrderMap,T=z.pinnedThreads,U=z.montage,V=z.orderedMessageLists,W=z.unreadCounts,X=z.initialUnreadCounts,Y=z.unseenTimestamp;q={fbid:q,deliveryReceipts:H,readReceiptsPerThread:I,ignoredIds:J,blockedIds:K,pendingFolderUnseenCount:L,typing:M,threads:N,pendingReadStatusThreads:O,messages:P,localIDsMap:Q,messagesWithUploadsInFlight:R,threadlistOrderMap:S,pinnedThreads:T,montage:U,orderedMessageLists:V,unreadCounts:W,initialUnreadCounts:X,unseenTimestamp:Y};if(b("bs_caml_obj").caml_equal(w,b("bs_caml_option").some(b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE))){H=r.offline_threading_id;H==null?Object.assign(r,{folder:A.folder}):b("bs_caml_obj").caml_equal(b("bs_caml_option").nullable_to_opt(Q.get(H)),H)?Object.assign(r,{client_message_id:r.offline_threading_id,status:b("MercuryActionStatus").SUCCESS,action_type:b("MercuryActionType").SEND_MESSAGE}):Object.assign(r,{folder:A.folder})}Ea(q,A);I=Object.assign({},A);J=r.offline_threading_id;if(!(J==null)){if(J!==r.message_id){Object.assign(I,{last_message_timestamp:r.timestamp});K=r.comm_status;K==null||Object.assign(I,{last_message_id:r.message_id})}L=r.author;if(!(b("cr:1299779")==null)&&!(L==null)){M=b("MercuryIDs").getParticipantIDFromUserID(p);r.has_attachment&&M===L&&Ya(s,r.message_id,J)}}N=r.comm_status;O=I.comm_status;!(N==null)&&!(O==null)&&b("bs_caml_obj").caml_notequal(O,b("PageCommItemStatus").FOLLOW_UP)&&Object.assign(I,{comm_status:N});P=r.creator_info;!(P==null)&&b("bs_caml_obj").caml_equal(P.pageID,p)&&Object.assign(I,{folder:r.folder});R=r.author;R==null||bb(I,R);B=v(void 0,q,s,I)}else B=z}}S=$a(B,a,r,w);T=fb(S,r);U=b("bs_caml_obj").caml_notequal(r.author,b("MercuryViewer").getID());V=r.thread_id;W=r.author;if(!U)return T;if(V==null)return T;if(W==null)return T;X=ka(T.typing,V,W);if(X!==T.typing)return{fbid:T.fbid,deliveryReceipts:T.deliveryReceipts,readReceiptsPerThread:T.readReceiptsPerThread,ignoredIds:T.ignoredIds,blockedIds:T.blockedIds,pendingFolderUnseenCount:T.pendingFolderUnseenCount,typing:X,threads:T.threads,pendingReadStatusThreads:T.pendingReadStatusThreads,messages:T.messages,localIDsMap:T.localIDsMap,messagesWithUploadsInFlight:T.messagesWithUploadsInFlight,threadlistOrderMap:T.threadlistOrderMap,pinnedThreads:T.pinnedThreads,montage:T.montage,orderedMessageLists:T.orderedMessageLists,unreadCounts:T.unreadCounts,initialUnreadCounts:T.initialUnreadCounts,unseenTimestamp:T.unseenTimestamp};else return T;case 52:Y=i._0;Q=i._1;H=i._2;A=b("bs_caml_obj").caml_notequal(H==null?void 0:b("bs_caml_option").some(H),!1);K=b("bs_caml_obj").caml_equal(H==null?void 0:b("bs_caml_option").some(H),!0);M=f.fbid;L=b("MercuryIDs").getParticipantIDFromUserID(M);J=$a(f,a,Y,Q);ab(J.fbid,Q,Y,function(a,b,c){a.informNewLogMessage(b,c)});O=cb(J,Y,Q,H==null?void 0:b("bs_caml_option").some(H));N=Y.thread_id;if(N==null)P=O;else{p=b("bs_belt_Map").get(O.threads,N);if(p!==void 0){R=Object.assign({},b("bs_caml_option").valFromOption(p));Ea(O,R);R.last_message_timestamp<Y.timestamp&&Object.assign(R,{last_message_timestamp:Y.timestamp});if(Y.timestamp>=R.timestamp||b("gkx")("1183082")){q=Y.log_message_type;if(!(q==null))if(b("bs_caml_obj").caml_equal(q,b("MercuryLogMessageType").SUBSCRIBE)&&!K){s=Y.log_message_data;if(s==null)I=[];else{z=s.added_participants;I=z==null?[]:z}ua(L,R,I);u(M,N)}else if(b("bs_caml_obj").caml_equal(q,b("MercuryLogMessageType").UNSUBSCRIBE)&&!K){B=Y.log_message_data;if(B==null)w=[];else{S=B.removed_participants;w=S==null?[]:S}db(L,R,w);u(M,N)}else if(b("bs_caml_obj").caml_equal(q,b("MercuryLogMessageType").THREAD_IMAGE)){if(!A){r=Y.log_message_data;if(r==null)U=null;else{V=r.image;U=V==null?null:V.preview_url}Object.assign(R,{image_src:U})}}else if(b("bs_caml_obj").caml_equal(q,b("MercuryLogMessageType").THREAD_NAME)){W=Y.log_message_data;if(!(W==null)){X=W.name;!(X==null)&&R.name===X||u(M,N);Object.assign(R,{name:W.name})}}else b("bs_caml_obj").caml_equal(q,b("MercuryLogMessageType").GENERIC_ADMIN_TEXT)&&Ia(M,R,Y,N)}P=v(void 0,O,N,R)}else P=O}return fb(P,Y);case 53:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("PinMessage");if(b("gkx")("1179386")){T=i._0;var pb=i._1;J=b("bs_belt_Map").get(f.threads,T);if(J!==void 0&&!(pb==null)){Q=b("bs_caml_option").valFromOption(J);H=Q.pinned_messages;p=H==null?[pb.message]:H.findIndex(function(a){return a.message_id===pb.message.message_id})===-1?[pb.message]:void 0;if(p!==void 0){s=b("ImmutableObject").set(Q,{pinned_messages:b("bs_belt_Option").getExn(p)});z=b("bs_belt_Map").set(f.threads,T,s);u(f.fbid,T);I=z}else I=f.threads}else I=f.threads;return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:I,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp}}else return f;case 54:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UnpinMessage");if(b("gkx")("1179386")){K=i._0;var Z=i._1;B=b("bs_belt_Map").get(f.threads,K);if(B!==void 0&&!(Z==null)){S=b("bs_caml_option").valFromOption(B);L=S.pinned_messages;w=L==null?void 0:L.filter(function(a){return a.message_id!==Z.message_id});if(w!==void 0){A=b("ImmutableObject").set(S,{pinned_messages:b("bs_belt_Option").getExn(w)});r=b("bs_belt_Map").set(f.threads,K,A);u(f.fbid,K);V=r}else V=f.threads}else V=f.threads;return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:V,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp}}else return f;case 55:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangePinnedStatus");U=i._0;X=i._1;W=i._2;q=b("bs_belt_Map").get(f.threads,U);M=!1;if(X&&!a.existingPinnedThreads.has(U))f.pinnedThreads.push(U),a.existingPinnedThreads.add(U),M=!0;else if(!X&&a.existingPinnedThreads.has(U)){N=f.pinnedThreads.indexOf(U);N>-1&&f.pinnedThreads.splice(N,1);a.existingPinnedThreads["delete"](U);M=!0}if(q!==void 0){R=b("bs_caml_option").valFromOption(q);O=b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(R.thread_pin_timestamp),0);if(R.is_pinned!==X||O!==W){P=b("ImmutableObject").set(R,{is_pinned:X,thread_pin_timestamp:W});Y=b("bs_belt_Map").set(f.threads,U,P);u(f.fbid,U);M=!0;J=Y}else J=f.threads}else J=f.threads;if(M)return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:J,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};else return f;case 56:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("InvalidateMontageState");H=i._0;Q=b("bs_js_dict").fromArray(b("bs_js_dict").entries(f.montage));Q[H]=[];return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:Q,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 57:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("NewMontageMessage");p=i._0;s=b("bs_js_dict").fromArray(b("bs_js_dict").entries(f.montage));T=p.actor.id;z=b("bs_js_dict").get(s,T);z!==void 0?(z.push(p),s[T]=z):s[T]=[p];return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:s,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 58:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("InstantiateMontageThread");I=i._0;B=b("bs_js_dict").fromArray(b("bs_js_dict").entries(f.montage));L=b("bs_js_dict").get(B,I);L!==void 0||(B[I]=[]);return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:B,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 59:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("DeleteMontageMessage");var rb=i._0,$=b("bs_js_dict").fromArray(b("bs_js_dict").entries(f.montage));S=Object.keys($);S.forEach(function(a){var c=b("bs_js_dict").get($,a);if(c===void 0)return;c=c.filter(function(a){return a.id!==rb.messageFBID});$[a]=c});return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:$,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 60:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("AddFetchedAllHistoryMarkers");w=[i._0,i._1];var sb=w[1];w[0].forEach(function(a){var b=f.orderedMessageLists.get(a);b==null?f.orderedMessageLists.set(a,{messageLoadingState:1,messageIDs:[]}):f.orderedMessageLists.set(a,{messageLoadingState:1,messageIDs:b.messageIDs});return Ma(f.fbid,a,sb)});return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 61:A=i._0;A.forEach(function(c){var a=c.folder;if(!za.includes(a))return;c=c.thread_fbids.map(function(a){return b("MercuryIDs").getThreadIDFromThreadFBID(a)}).concat(c.other_user_fbids.map(function(a){return b("MercuryIDs").getThreadIDFromUserID(a)}));f.unreadCounts[a]=new Set(c);a=b("MercuryThreadInformer").getForFBID(f.fbid);a.updatedUnreadState()});return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 62:K=i._0;var d={contents:f.unseenTimestamp};K.forEach(function(c){f.initialUnreadCounts[c.folder]=c.unread_count;c.unread_count===0&&(f.unreadCounts[c.folder]=new Set());c.folder==="inbox"&&(d.contents=b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(c.seen_timestamp),d.contents),a.fallbackUnseenCount.contents=c.unseen_count);c=b("MercuryThreadInformer").getForFBID(f.fbid);c.updatedUnreadState();c.updatedUnseenState()});return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:d.contents};case 63:var tb=i._0;za.forEach(function(a){a=b("bs_js_dict").get(f.unreadCounts,a);if(a===void 0)return;var c=b("bs_caml_option").valFromOption(a);b("bs_js_dict").entries(tb).forEach(function(a){var b=a[0];if(c.has(b)){c.add(a[1]);c["delete"](b);return}})});return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 64:r=i._0;V=i._1;N=i._2;q=i._3;O=i._4;R=Ja(f,r,[V]);X=D(R,V);if(X!==void 0){W=b("bs_caml_option").valFromOption(X);Va(b("bs_caml_option").some(r),W);P=b("MessengerMessage.bs").makeFakeMessage(W.message_id,W.thread_id,W.author,W.action_type,W.timestamp,{removed_timestamp:q,message_unsendability_status:b("MessageUnsendabilityStatus").DENY_TOMBSTONE_MESSAGE,unsender:{id:N}});U=F(R,[V,P]);Y=W.thread_id;if(Y==null)return U;M=Wa(U,V,Y);Ka(M.fbid,Y,V,O);Na(M.fbid,Y,V,O,W.attachments);J=b("bs_belt_Map").get(M.threads,Y);if(J===void 0)return M;H=b("bs_caml_option").valFromOption(J);Q=Xa(W.profile_ranges,M.fbid);z=b("ImmutableObject").set(b("ImmutableObject").set(H,Ua(M,Y)),{unread_mentions_count:H.unread_mentions_count-Q|0});T=b("bs_belt_Map").set(M.threads,Y,z);u(M.fbid,Y);return{fbid:M.fbid,deliveryReceipts:M.deliveryReceipts,readReceiptsPerThread:M.readReceiptsPerThread,ignoredIds:M.ignoredIds,blockedIds:M.blockedIds,pendingFolderUnseenCount:M.pendingFolderUnseenCount,typing:M.typing,threads:T,pendingReadStatusThreads:M.pendingReadStatusThreads,messages:M.messages,localIDsMap:M.localIDsMap,messagesWithUploadsInFlight:M.messagesWithUploadsInFlight,threadlistOrderMap:M.threadlistOrderMap,pinnedThreads:M.pinnedThreads,montage:M.montage,orderedMessageLists:M.orderedMessageLists,unreadCounts:M.unreadCounts,initialUnreadCounts:M.initialUnreadCounts,unseenTimestamp:M.unseenTimestamp}}Oa(R.fbid,r,V,O);return R;case 65:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateConnectivityStatus");p=i._0;s=i._1;L=b("ThreadConnectivityStatus.bs").toGraphQLValue(s);I=b("bs_belt_Map").get(f.threads,p);if(I===void 0)return f;B=b("bs_caml_option").valFromOption(I);S=B.thread_connectivity_data;w=S==null?b("ImmutableObject").set(B,{thread_connectivity_data:{connectivity_status:L,first_sender_id:null}}):b("ImmutableObject").set(B,{thread_connectivity_data:{connectivity_status:L,first_sender_id:S.first_sender_id}});return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:b("bs_belt_Map").set(f.threads,p,w),pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 66:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("DeltaMarkFolderSeen");var ub=i._0;return b("bs_belt_Array").reduceU(ub.folders,f,function(c,a){a=b("bs_js_dict").get(j,a);if(a!==void 0)return ob(c,Number(ub.timestamp),a);else return c});case 67:A=[i._0,i._1,i._2,i._3];var vb=A[2];K=A[0];X=D(f,K);if(X===void 0)return f;q=b("bs_caml_option").valFromOption(X);N=A[1].concat(q.tags).filter(function(a){return vb.indexOf(a)===-1});P=Object.assign(Object.assign({},q),{tags:N});U=q.thread_id;U==null||Ka(f.fbid,U,K,A[3]);return F(f,[K,P]);case 68:J=i._0;W=i._1;return v(void 0,f,J,{conversion_detection_data:W});case 69:H=[i._0,i._1,i._2,i._3,i._4];Q=H[0];z=D(f,Q);if(z===void 0)return f;Y=b("bs_caml_option").valFromOption(z);T=Y.attachments;if(T==null)return f;if(T.length!==1)return f;M=T[0];r=H[2]?[Object.assign(Object.assign({},M),{blurred_image_uri:void 0})]:[Object.assign(Object.assign({},M),{blurred_image_uri:H[3]})];V=Object.assign(Object.assign({},Y),{attachments:r});O=Y.thread_id;O==null||Ka(f.fbid,O,Q,H[4]);return F(f,[Q,V]);case 70:R=i._0;s=i._1;return v(void 0,f,R,{suggested_reply_data:s})}case 1:I=g._0;if(typeof I==="number")if(I===0){var wb=[];b("bs_belt_MapString").forEach(f.typing,function(a,c){return b("bs_belt_Map").forEach(c,function(b,c){if(c<Date.now()-3e4){wb.push([a,b]);return}})});if(wb.length===0)return f;var c={contents:f.typing};wb.forEach(function(a){c.contents=ka(c.contents,a[0],a[1])});return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:c.contents,threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp}}else{if(nb(f,a,!1)<=0)return f;B=b("MercuryServerRequests").getForFBID(f.fbid);B.markSeen();return ob(f,B.getLastActionTimestamp(),"inbox")}switch(I.TAG|0){case 0:L=I._0;S=I._1;p=I._2;w=I._3;var xb=f.threads,yb=[];X=k(L.reduce(function(d,c){var a=b("bs_belt_Map").get(xb,c);if(a!==void 0)return b("bs_belt_Map").set(d,c,b("bs_caml_option").valFromOption(a));else{yb.push(c);return d}},b("bs_belt_Map").make(b("ThreadId.bs"))));if(yb.length!==0){N=a.threadSubToken;q=N.contents.toString();a.threadSubToken.contents=N.contents+1|0;a.threadCallbacks.contents[q]=[L,p];U=b("MercuryServerRequests").getForFBID(f.fbid);A=yb.reduce(function(d,c){var e=b("MercuryIDs").tokenize(c),g=e.type;e=e.value;if(g!=="user")return d;g=b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(e));e=b("MercuryIDs").getParticipantIDFromUserID(f.fbid);e=b("MessengerThreadUtils.bs").createNewLocalThread(e,c,b("bs_caml_obj").caml_equal(g,e)?[e]:[e,g],null);g=b("bs_belt_Map").set(d,c,e);b("gkx")("1074761")||hb(g,a.threadCallbacks.contents);return g},f.threads);U.fetchThreadData(yb,w);b("bs_curry")._1(S,q);if(A===f.threads)return f;else return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:A,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp}}b("bs_curry")._1(p,X);return f;case 1:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UnsubscribeThread");K=a.threadCallbacks.contents;gb(K,I._0);a.threadCallbacks.contents=K;return f;case 2:P=I._0;J=b("bs_belt_Array").keepMap(P,function(a){a=D(f,a);if(a!==void 0)return b("bs_caml_option").nullable_to_opt(b("bs_caml_option").valFromOption(a).offline_threading_id)});J.forEach(function(a){f.localIDsMap["delete"](a)});return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 3:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("MontagePollStickerVoted");var zb=I._0;W=b("bs_js_dict").fromArray(b("bs_js_dict").entries(f.montage));z=zb.montageActorID;T=b("bs_js_dict").get(W,z);if(T!==void 0){M=T.map(function(a){if(b("bs_caml_obj").caml_equal(zb.montageMessageID,a.id)){var c=a.montage_overlays.map(function(a){if(!b("bs_caml_obj").caml_equal(a.poll.id,zb.pollID))return a;var c=a.poll.poll_options.map(function(a,c){if(c===zb.optionVotedIndex)return new(b("ImmutableObject"))({text:a.text,vote_count:a.vote_count+1|0});else return a});c=new(b("ImmutableObject"))({can_viewer_vote:a.poll.can_viewer_vote,id:a.poll.id,poll_options:c,viewer_vote_index:zb.optionVotedIndex});return b("ImmutableObject").set(new(b("ImmutableObject"))(a),{poll:c})});return b("ImmutableObject").set(new(b("ImmutableObject"))(a),{montage_overlays:c})}else return a});W[z]=M}return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:f.threads,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:W,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 4:r=b("bs_belt_Map").set(f.threads,I._0,I._1);return{fbid:f.fbid,deliveryReceipts:f.deliveryReceipts,readReceiptsPerThread:f.readReceiptsPerThread,ignoredIds:f.ignoredIds,blockedIds:f.blockedIds,pendingFolderUnseenCount:f.pendingFolderUnseenCount,typing:f.typing,threads:r,pendingReadStatusThreads:f.pendingReadStatusThreads,messages:f.messages,localIDsMap:f.localIDsMap,messagesWithUploadsInFlight:f.messagesWithUploadsInFlight,threadlistOrderMap:f.threadlistOrderMap,pinnedThreads:f.pinnedThreads,montage:f.montage,orderedMessageLists:f.orderedMessageLists,unreadCounts:f.unreadCounts,initialUnreadCounts:f.initialUnreadCounts,unseenTimestamp:f.unseenTimestamp};case 5:b("MercuryServerRequests").getForFBID(f.fbid).updateLastActionTimestamp(I._0);return f}case 2:Y=g._0;switch(Y.TAG|0){case 0:b("bs_curry")._1(Y._0,{blocked_ids:f.blockedIds});break;case 1:b("bs_curry")._1(Y._1,b("bs_belt_Map").get(f.threads,Y._0));break;case 2:b("bs_curry")._1(Y._0,f.pinnedThreads.concat([]));break;case 3:b("bs_curry")._2(Y._0,f,a);break}return f}},d,c)}function P(a){var c=[b("MercurySyncEventsProxy").getArbiterTypeForFBID(a,"TYP")];b("FBIDCheck").isUser_deprecated(a)||c.push(b("ChannelConstants").getArbiterType("page_typing"));return c}function Q(a){return{fbid:a,deliveryReceipts:void 0,readReceiptsPerThread:void 0,ignoredIds:b("bs_belt_Set").make(b("ParticipantId.bs")),blockedIds:b("bs_belt_Set").make(b("ParticipantId.bs")),pendingFolderUnseenCount:0,typing:void 0,threads:b("bs_belt_Map").make(b("ThreadId.bs")),pendingReadStatusThreads:new Set(),messages:new Map(),localIDsMap:new Map(),messagesWithUploadsInFlight:new Map(),threadlistOrderMap:oa(void 0),pinnedThreads:[],montage:{},orderedMessageLists:new Map(),unreadCounts:{},initialUnreadCounts:{},unseenTimestamp:0}}var R={contents:{}},S={contents:0},T=new Map(),U={contents:{}},V={contents:0},W=new Set(),X={contents:{}},Y={contents:0},pb={threadCallbacks:R,threadSubToken:S,localTitanMessageCount:T,messageCallbacks:U,messageSubToken:V,existingPinnedThreads:W,failedHistoryFetchThreads:X,fallbackUnseenCount:Y},qb={contents:0},Z={};function rb(a,c,d){d=c!==void 0?b("bs_caml_option").valFromOption(c):b("RemoteAction.bs").create(void 0);c=b("bs_js_dict").get(Z,a);if(c!==void 0)return;Z[a]={subscriptions:new Set(),state:Q(a),remoteAction:d};b("RemoteAction.bs").subscribe(function(c){var d=b("bs_js_dict").get(Z,a);if(d!==void 0){var e=d.state;c=O(pb,c,e);Z[a]={subscriptions:d.subscriptions,state:c,remoteAction:d.remoteAction};if(c===e)return;d=b("bs_js_dict").get(Z,a);d!==void 0?d.subscriptions.forEach(function(a){return b("bs_curry")._1(a.fn,void 0)}):b("recoverableViolation")("Subscriptions deleted after createion","messenger_comet");return}b("recoverableViolation")("State deleted after creation","messenger_comet")},d);var e=b("bs_caml_option").some(a),f=function(a){return $(e,a)},g=function(a){b("bs_curry")._1(f,[{TAG:0,_0:{TAG:5,_0:a}}]),b("setTimeoutAcrossTransitions")(function(a){return b("bs_curry")._1(f,[{TAG:1,_0:0}])},3e4)};b("Arbiter").subscribe(P(a),function(b,c){b=c.obj;c=b.to;if(!(c==null)&&c.toString()!==a)return;else{g(b);return}})}function $(a,c){a=a!==void 0?b("bs_caml_option").valFromOption(a):b("CurrentUser").getID();rb(a,void 0,void 0);a=b("bs_js_dict").get(Z,a);if(a!==void 0)return b("RemoteAction.bs").send(a.remoteAction,c);else{b("recoverableViolation")("Subscriptions deleted after createion","messenger_comet");return}}function sb(a,c,d,e){var f=a!==void 0?b("bs_caml_option").valFromOption(a):b("CurrentUser").getID();e=c!==void 0?b("bs_caml_option").valFromOption(c):b("RemoteAction.bs").create(void 0);rb(f,b("bs_caml_option").some(e),void 0);a=i.useState(function(){var a=b("bs_js_dict").get(Z,f);if(a!==void 0)return a.state;else return b("unrecoverableViolation")("Rendering without state initialized","messenger_comet")});var g=a[1],h=a[0];c=b("bs_js_dict").get(Z,f);var j=i.useCallback(function(a){a=b("bs_js_dict").get(Z,f);var c=a!==void 0?a.state:b("unrecoverableViolation")("Rendering without state initialized","messenger_comet");if(d!==void 0)if(b("bs_curry")._2(d,h,c))return b("bs_curry")._1(g,function(a){return c});else return;else return b("bs_curry")._1(g,function(a){return c})},[d,h,g,c,f]);i.useEffect(function(){qb.contents=qb.contents+1|0;var a=qb.contents,c={id:a,fn:j};a=b("bs_js_dict").get(Z,f);a!==void 0?a.subscriptions.add(c):b("recoverableViolation")("Subscriptions deleted after createion, can't add subscription","messenger_comet");b("bs_curry")._1(j,void 0);return function(a){a=b("bs_js_dict").get(Z,f);a!==void 0?a.subscriptions["delete"](c):b("recoverableViolation")("Subscriptions deleted after createion, can't remove subscription","messenger_comet")}},[j,f]);return h}function tb(a){var c=a.shouldUpdate,d=a.remoteAction,e=a.fbid;a=a.children;e=e!==void 0?b("bs_caml_option").valFromOption(e):b("CurrentUser").getID();return b("bs_curry")._1(a,sb(b("bs_caml_option").some(e),d,c,void 0))}function ub(a){b("gkx")("1463539")&&b("recoverableViolation")("messenger state is not allowed when lightspeed is enabled","messenger_comet");return sb(b("bs_caml_option").some(a),void 0,void 0,void 0)}function vb(a,c){return $(b("bs_caml_option").some(a),[{TAG:2,_0:{TAG:0,_0:c}}])}function wb(a,c){b("MercuryAssert").isThreadID(c);var d={contents:void 0},e=function(a){d.contents=a};$(b("bs_caml_option").some(a),[{TAG:2,_0:{TAG:1,_0:c,_1:e}}]);return b("bs_js_null_undefined").fromOption(d.contents)}function xb(a,c,d,e){if(c.length!==0){b("MercuryAssert").allThreadID(c);var f={contents:null},g=function(a){f.contents=a};$(b("bs_caml_option").some(a),[{TAG:1,_0:{TAG:0,_0:c,_1:g,_2:d,_3:e}}]);return f.contents}b("bs_curry")._1(d,{});return null}function yb(a,c,d,e){return xb(a,[c],function(a){return b("bs_curry")._1(d,a[c])},e)}function zb(a,c,d,e){var f={contents:void 0},g=function(a){f.contents=a};$(b("bs_caml_option").some(a),[{TAG:2,_0:{TAG:1,_0:c,_1:g}}]);g=f.contents;if(g!==void 0)return b("bs_caml_option").valFromOption(g);g=b("MessengerThreadUtils.bs").createNewLocalThread(b("MercuryIDs").getParticipantIDFromUserID(a),c,d,e);$(b("bs_caml_option").some(a),[{TAG:1,_0:{TAG:4,_0:c,_1:g}}]);return g}function Ab(a){var c=b("MercuryLocalIDs").generateThreadID(null);zb(a,c,[],null);return c}function Bb(a,c,d,e){var f={contents:void 0},g=function(a){f.contents=a};$(b("bs_caml_option").some(a),[{TAG:2,_0:{TAG:1,_0:c,_1:g}}]);g=f.contents;if(g!==void 0)return b("bs_caml_option").valFromOption(g);g=b("MessengerThreadUtils.bs").createNewLocalGroupGeneralThread(b("MercuryIDs").getParticipantIDFromUserID(a),c,d,e);$(b("bs_caml_option").some(a),[{TAG:1,_0:{TAG:4,_0:c,_1:g}}]);return g}function Cb(a,c,d){var e=b("MercuryLocalIDs").generateThreadID(null);Bb(a,e,c,d);return e}function Db(a,c){var d={contents:void 0},e=function(a){d.contents=a};$(b("bs_caml_option").some(a),[{TAG:2,_0:{TAG:1,_0:c,_1:e}}]);a=d.contents;if(a!==void 0)return b("MercuryThreadInfo").isEmptyLocalThread(b("bs_caml_option").valFromOption(a));else return!1}function Eb(a,c){var d={contents:void 0},e=function(a){d.contents=a};$(b("bs_caml_option").some(a),[{TAG:2,_0:{TAG:1,_0:c,_1:e}}]);a=d.contents;if(a!==void 0)return b("MercuryThreadInfo").isNewEmptyLocalThread(b("bs_caml_option").valFromOption(a));else return!1}function Fb(c){var a={contents:[]},d=function(b){a.contents=b};$(b("bs_caml_option").some(c),[{TAG:2,_0:{TAG:2,_0:d}}]);return a.contents}function Gb(a,c){return $(b("bs_caml_option").some(a),[{TAG:1,_0:{TAG:1,_0:c}}])}function Hb(a){var c=a.payload_source;if(c==null)return!1;if(b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_CHANGE_ARCHIVED_STATUS)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_SEND_MESSAGE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_SEND_MESSAGE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_FETCH_THREADLIST_INFO)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_THREAD_SYNC)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_CHANGE_PINNED_STATUS)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_CHANGE_PINNED_MESSAGES)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_UPDATE_COMM_STATUS))return!0;if(!b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_INITIAL_DATA))return!1;c=a.ordered_threadlists;return!(c==null)}function Ib(a,c){c={TAG:1,_0:{TAG:3,_0:c}};return $(b("bs_caml_option").some(a),[c])}function Jb(a,c){return $(a==null?void 0:b("bs_caml_option").some(a),c)}function Kb(a){var c=[],d=!1;if(!(a==null)){var e=a.payload_source;!(e==null)&&b("bs_caml_obj").caml_equal(e,b("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE)&&(d=!0);e=a.newlyAddedClientIDs;!(e==null)&&Object.keys(e).length>0&&c.push({TAG:0,_0:{TAG:63,_0:e}});e=a.delivery_receipts;e==null||c.push({TAG:0,_0:{TAG:0,_0:e}});e=a.message_ignored_ids;e==null||c.push({TAG:0,_0:{TAG:1,_0:e}});e=a.threads;if(!(e==null)){var f=a.payload_source;f==null||(b("bs_caml_obj").caml_equal(f,b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO)&&c.push({TAG:0,_0:{TAG:8,_0:e}}),b("bs_caml_obj").caml_equal(f,b("MercuryPayloadSource").SERVER_INVALIDATE_THREAD_STATE)&&e.length>0&&c.unshift({TAG:0,_0:{TAG:34,_0:b("bs_caml_array").get(e,0).thread_id}}));c.push({TAG:0,_0:{TAG:7,_0:e}})}f=a.participants;if(!(f==null)){c.push({TAG:0,_0:{TAG:3,_0:f}});var g=[],h=[];f.forEach(function(a){a.is_messenger_blocked||a.is_facebook_blocked?g.push(b("MercuryIDs").getParticipantIDFromUserID(a.fbid)):h.push(b("MercuryIDs").getParticipantIDFromUserID(a.fbid))});e=0;(g.length!==0||h.length!==0)&&(e=1);e===1&&c.push({TAG:0,_0:{TAG:2,_0:g,_1:h}})}f=a.message_blocked_ids;!(f==null)&&f.length>0&&c.push({TAG:0,_0:{TAG:2,_0:f,_1:[]}});e=a.message_unblocked_ids;!(e==null)&&e.length>0&&c.push({TAG:0,_0:{TAG:2,_0:[],_1:e}});f=a.pending_folder_unseen_count;f==null||c.push({TAG:0,_0:{TAG:4,_0:f}});e=a.global_actions;e==null||e.forEach(function(a){if(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryGlobalActionType").MARK_ALL_READ)){c.push({TAG:0,_0:{TAG:33,_0:a.folder}});return}});if(Hb(a)){f=a.ordered_threadlists;e=0;f==null||f.length===0?e=1:c.push({TAG:0,_0:{TAG:9,_0:f}});if(e===1){f=a.threads;e=a.payload_source;!(f==null)&&!(e==null)&&f.length>0&&e!==b("MercuryPayloadSource").SERVER_CHANGE_PINNED_STATUS&&c.push({TAG:0,_0:{TAG:10,_0:f}})}}e=a.pinned_thread_ids;!(e==null)&&e.length>0&&Hb(a)&&c.push({TAG:0,_0:{TAG:11,_0:e}});f=a.roger;f==null||c.push({TAG:0,_0:{TAG:6,_0:f}});e=a.montage_delete_message_delta;e==null||c.push({TAG:0,_0:{TAG:59,_0:e}});f=a.montage_new_message_delta;f==null||c.push({TAG:0,_0:{TAG:57,_0:f}});e=a.montage_poll_sticker_vote;e==null||e.forEach(function(a){c.push({TAG:1,_0:{TAG:3,_0:a}})});f=a.current_montage_thread;if(!(f==null)){e=f.user;if(!(e==null)){f=e.messenger_montage_thread;f==null||(c.push({TAG:0,_0:{TAG:58,_0:e.id}}),f.montage_messages.edges.forEach(function(a){c.push({TAG:0,_0:{TAG:57,_0:a.node}})}))}}e=a.unread_thread_fbids;e==null||c.push({TAG:0,_0:{TAG:61,_0:e}});f=a.message_counts;f==null||c.push({TAG:0,_0:{TAG:62,_0:f}});e=a.actions;if(!(e==null)){var i=a.payload_source,j=i==null?void 0:b("bs_caml_option").some(i);e.forEach(function(d){var e=d.action_type,f=0;(i==null||!i.startsWith("server"))&&(f=1);f===1&&c.push({TAG:1,_0:{TAG:5,_0:d.timestamp}});if(b("bs_caml_obj").caml_equal(j,b("bs_caml_option").some(b("MercuryPayloadSource").SERVER_SEARCH))){c.push({TAG:0,_0:{TAG:35,_0:d,_1:0}});return}if(b("bs_caml_obj").caml_equal(b("bs_caml_option").nullable_to_opt(d.client_state),b("bs_caml_option").some(b("MercuryMessageClientState").SEND_TO_SERVER))){c.push({TAG:0,_0:{TAG:35,_0:d,_1:0}});return}f=d.thread_id;var g=d.upload_id,h=d.upload_data,k=d.message_ids;ha(d);if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").DELETE_MESSAGES))if(!(f==null)&&!(k==null)){c.push({TAG:0,_0:{TAG:36,_0:f,_1:k,_2:j}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_FOLDER)){k=d.new_folder;if(!(f==null)&&!(k==null)){c.push({TAG:0,_0:{TAG:37,_0:f,_1:k}});return}else return}if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_ARCHIVED_STATUS))if(!(f==null)){c.push({TAG:0,_0:{TAG:39,_0:f,_1:d.archived}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_MUTE_SETTINGS)){k=d.reactions_mute_mode;var l=d.mentions_mute_mode,m=d.mute_until;l=k==null?l==null?m==null?void 0:{TAG:2,_0:m}:m==null?{TAG:1,_0:l===1}:void 0:!(l==null)||!(m==null)?void 0:{TAG:0,_0:k===1};if(!(f==null)&&l!==void 0){c.push({TAG:0,_0:{TAG:38,_0:f,_1:l}});return}else return}if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_READ_STATUS)){if(f==null)return;m=a.from_client;c.push({TAG:0,_0:{TAG:41,_0:f,_1:d.mark_as_read,_2:d.timestamp,_3:m==null?!1:m,_4:d.source}});return}if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_PAGE_FOLLOW_UP_STATUS))if(!(f==null)){c.push({TAG:0,_0:{TAG:40,_0:f,_1:d.is_page_follow_up}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").BLOCK_STATUS_CHANGED)){if(f==null)return;k=d.canViewerReply?null:b("MessengerThreadCannotReplyReason.bs").fromMessageThreadCannotReplyReason(d.reason);c.push({TAG:0,_0:{TAG:13,_0:f,_1:d.canViewerReply,_2:k}});return}if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").DELETE_THREAD))if(!(f==null)){c.push({TAG:0,_0:{TAG:42,_0:f}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REACTION_UPDATE)){l=d.messageId;m=d.userId;if(!(l==null)&&!(m==null)){c.push({TAG:0,_0:{TAG:45,_0:l,_1:b("bs_caml_option").nullable_to_opt(d.reaction),_2:m,_3:j}});return}else return}if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").MONTAGE_DIRECT_EXPIRE)){k=d.messageId;if(!(k==null)){c.push({TAG:0,_0:{TAG:46,_0:k,_1:j}});return}else return}if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").LIVE_LOCATION_UPDATE)){l=d.messageId;m=d.liveLocation;if(!(l==null)&&!(m==null)){c.push({TAG:0,_0:{TAG:47,_0:l,_1:m,_2:j}});return}else return}if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REPLACE_MESSAGE)){c.push({TAG:0,_0:{TAG:48,_0:d,_1:j}});return}if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CONFIRM_ATTACHMENT_PLACEHOLDER))if(!(g==null)&&!(h==null)){c.push({TAG:0,_0:{TAG:44,_0:g,_1:h}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CANCEL_ATTACHMENT_PLACEHOLDER))if(!(g==null)&&!(h==null)){c.push({TAG:0,_0:{TAG:43,_0:g,_1:h,_2:j}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").SEND_MESSAGE)){c.push({TAG:0,_0:{TAG:50,_0:d,_1:j}});return}if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").USER_GENERATED_MESSAGE)){c.push({TAG:0,_0:{TAG:51,_0:d,_1:j,_2:a.from_client}});return}if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").LOG_MESSAGE))if(!b("MessengerMessage.bs").isLocalMessage(d)){c.push({TAG:0,_0:{TAG:52,_0:d,_1:j,_2:a.from_client}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_PINNED_STATUS))if(!(f==null)){c.push({TAG:0,_0:{TAG:55,_0:f,_1:d.is_pinned,_2:d.thread_pin_timestamp}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").PIN_MESSAGE))if(!(f==null)){c.push({TAG:0,_0:{TAG:53,_0:f,_1:d.pin_message_action}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UNPIN_MESSAGE))if(!(f==null)){c.push({TAG:0,_0:{TAG:54,_0:f,_1:d.unpin_message_action}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REMOVE_MESSAGE)){k=d.thread_id;l=d.messageId;m=d.removed_timestamp;g=d.author;if(!(k==null)&&!(l==null)&&!(m==null)&&!(g==null)){c.push({TAG:0,_0:{TAG:64,_0:k,_1:l,_2:g,_3:m,_4:j}});b("MessengerDesktopNotifications").removeNotification(l);return}else return}if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UNSUBSCRIBE_STATUS_UPDATE))if(!(f==null)){c.push({TAG:0,_0:{TAG:12,_0:f,_1:d.page_unsubscribe_status}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").BLURRED_IMAGE_STATUS)){h=d.image_message_id;k=d.image_id;g=d.should_show;m=d.blurred_image_uri;if(!(h==null)&&!(k==null)&&!(g==null)&&!(m==null)){c.push({TAG:0,_0:{TAG:69,_0:h,_1:k,_2:g,_3:m,_4:j}});return}else return}if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").ADD_PARTICIPANTS))if(!(f==null)){c.push({TAG:0,_0:{TAG:14,_0:f,_1:d.participants}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_FLAG))if(!(f==null)){c.push({TAG:0,_0:{TAG:15,_0:f,_1:d.mark_as_flag}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").MOVE_PENDING_TO_INBOX))if(!(f==null)){c.push({TAG:0,_0:{TAG:16,_0:f}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_CUSTOM_LIKE))if(!(f==null)){c.push({TAG:0,_0:{TAG:17,_0:f,_1:d.custom_like}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").PROMOTE_GROUP_ADMINS)){l=d.promoted_admins;if(!(f==null)&&!(l==null)){c.push({TAG:0,_0:{TAG:18,_0:f,_1:l}});return}else return}if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REMOVE_GROUP_ADMINS)){h=d.removed_admin_ids;if(!(f==null)&&!(h==null)){c.push({TAG:0,_0:{TAG:19,_0:f,_1:h}});return}else return}if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").JOINABLE_MODE))if(!(f==null)){c.push({TAG:0,_0:{TAG:20,_0:f,_1:d.joinable_mode}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").APPROVAL_MODE))if(!(f==null)){c.push({TAG:0,_0:{TAG:21,_0:f,_1:d.approval_mode}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").APPROVAL_QUEUE))if(!(f==null)){c.push({TAG:0,_0:{TAG:22,_0:f,_1:d.added_id,_2:d.added_group_id,_3:d.removed_id,_4:d.removed_group_id}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").IS_PIN_PROTECTED))if(!(f==null)){c.push({TAG:0,_0:{TAG:23,_0:f,_1:d.is_pin_protected}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_RTC_CALL_DATA))if(!(f==null)){c.push({TAG:0,_0:{TAG:24,_0:f,_1:d.initiator_fbid,_2:d.call_state,_3:d.server_info_data}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_COMM_STATUS))if(!(f==null)){c.push({TAG:0,_0:{TAG:25,_0:f,_1:d.comm_status}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_COMM_ITEM_OWNER))if(!(f==null)){c.push({TAG:0,_0:{TAG:26,_0:f,_1:d.id,_2:d.name,_3:d.profile_pic_uri}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").EVENT_RSVP_CHANGED))if(!(f==null)){c.push({TAG:0,_0:{TAG:27,_0:f,_1:d.actor_fbid,_2:d.rsvp_status}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_CONNECTIVITY_STATUS)){k=d.thread_connectivity_status;if(!(f==null)&&!(k==null)){c.push({TAG:0,_0:{TAG:65,_0:f,_1:k}});return}else return}if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").GROUPS_SYNC_STATUS_CHANGED))if(!(f==null)){c.push({TAG:0,_0:{TAG:28,_0:f,_1:d.groups_sync_action,_2:d.groups_sync_status_string}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").GROUPS_SYNC_METADATA_UPDATE))if(!(f==null)){c.push({TAG:0,_0:{TAG:29,_0:f,_1:d.groups_sync_action,_2:d.fb_group_id,_3:d.emoji_codepoints}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").DESCRIPTION_CHANGED))if(!(f==null)){c.push({TAG:0,_0:{TAG:30,_0:f,_1:d.group_thread_description_string}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_THREAD_THEME))if(!(f==null)){c.push({TAG:0,_0:{TAG:31,_0:f,_1:{solid_color:d.solid_color,header_color:d.header_color,footer_color:d.footer_color,gradient_colors:d.gradient_colors,theme_id:d.theme_id,reactions:d.reactions}}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_JOINABLE_LINK))if(!(f==null)){c.push({TAG:0,_0:{TAG:32,_0:f,_1:d.joinable_link}});return}else return;if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").MUTATE_TAGS)){g=d.tags_to_add;m=g==null?[]:g;l=d.tags_to_delete;h=l==null?[]:l;k=d.messageId;if(!(k==null)){c.push({TAG:0,_0:{TAG:67,_0:k,_1:m,_2:h,_3:j}});return}else return}if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").ADS_CONVERSION_UPDATE)){g=d.conversion_detection_data;if(!(f==null)&&!(g==null)){c.push({TAG:0,_0:{TAG:68,_0:f,_1:g}});return}else return}if(!b("bs_caml_obj").caml_equal(e,b("MercuryActionType").SUGGESTED_REPLY_UPDATE))return;l=d.suggested_reply_data;if(!(f==null)&&!(l==null)){c.push({TAG:0,_0:{TAG:70,_0:f,_1:l}});return}});b("Utils.bs").isTruthy(a.from_client)&&e.forEach(function(a){var b=a.thread_id;if(!(b==null)){c.push({TAG:0,_0:{TAG:49,_0:b,_1:a.message_id}});return}})}f=a.end_of_history;f==null||c.push({TAG:0,_0:{TAG:60,_0:f,_1:a.payload_source}})}d&&c.unshift({TAG:0,_0:0});return c}function Lb(c,d){var a={contents:[]},e=function(b,c){c=b.orderedMessageLists.get(d);if(!(c==null)){a.contents=E(!0,b,c.messageIDs);return}};$(b("bs_caml_option").some(c),[{TAG:2,_0:{TAG:3,_0:e}}]);return a.contents}function Mb(c,d){var a={contents:d},e=function(b,c){c=b.localIDsMap.get(d);if(!(c==null)){a.contents=c;return}};$(b("bs_caml_option").some(c),[{TAG:2,_0:{TAG:3,_0:e}}]);return a.contents}function Nb(a,c){var d={contents:void 0},e=function(a,b){d.contents=a};$(b("bs_caml_option").some(a),[{TAG:2,_0:{TAG:3,_0:e}}]);a=d.contents;if(a!==void 0)return E(!1,a,c);else return[]}function Ob(a,c){var d={contents:void 0},e=function(a,b){d.contents=a};$(b("bs_caml_option").some(a),[{TAG:2,_0:{TAG:3,_0:e}}]);a=d.contents;if(a!==void 0)return b("bs_caml_option").nullable_to_opt(a.messages.get(c))}function Pb(a,c,d){var e={contents:!1},f=function(a,b){b=a.orderedMessageLists.get(c);if(b==null)return;a=b.messageLoadingState;b=b.messageIDs.length;a?e.contents=!0:e.contents=b>=d};$(b("bs_caml_option").some(a),[{TAG:2,_0:{TAG:3,_0:f}}]);return e.contents}function Qb(a,c){var d={contents:!1},e=function(a,b){b=a.orderedMessageLists.get(c);if(b==null)return;a=b.messageLoadingState;a?d.contents=!0:d.contents=!1};$(b("bs_caml_option").some(a),[{TAG:2,_0:{TAG:3,_0:e}}]);return d.contents}function Rb(a,c){return $(b("bs_caml_option").some(a),[{TAG:1,_0:{TAG:2,_0:c}}])}function Sb(a,c,d,e){var f=[],g=function(g,h){h=g.orderedMessageLists.get(c);if(h==null)return;h=h.messageIDs;for(var i=d,j=d+e|0;i<=j;++i){var a=b("bs_belt_Option").flatMap(b("bs_belt_Array").get(h,i),function(a){return D(g,a)});a!==void 0&&f.push(b("bs_caml_option").valFromOption(a))}};$(b("bs_caml_option").some(a),[{TAG:2,_0:{TAG:3,_0:g}}]);return f}var Tb={contents:void 0};function Ub(a,c,d,e,f,g,h){var i=function(j,i){Tb.contents=[c,d,e];var k=j.orderedMessageLists.get(c);k=k==null?[[],void 0]:[k.messageIDs,k.messageLoadingState];var l=k[0];if(b("bs_js_dict").get(i.failedHistoryFetchThreads.contents,c)!==!0){var m=i.localTitanMessageCount;m=l.length-b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(m.get(c)),0)|0;m>0&&b("ChatReliabilityInstrumentation").logERROR("fetch made with message in flight");var n=m-d|0;n=e-n|0;if(!(n>0&&b("bs_caml_obj").caml_notequal(k[1],1)))return b("bs_curry")._1(f,b("bs_belt_Array").keepMap(l,function(a){return D(j,a)}).slice(d,e));k=b("MercuryServerRequests").getForFBID(a);l=b("bs_js_null_undefined").fromOption(b("bs_belt_Option").map(b("bs_belt_Option").flatMap(b("bs_belt_Array").get(l,m-1|0),function(a){return D(j,a)}),function(a){return a.timestamp}));var o=i.messageSubToken.contents;i.messageSubToken.contents=o+1|0;i.messageCallbacks.contents[String(o)]=[{threadID:c,offset:d,limit:e},f];if(b("bs_caml_obj").caml_equal([c,d,e],Tb.contents)){k.fetchThreadMessages(c,m,n,l,g,h);return}else return}Tb.contents=void 0;i.failedHistoryFetchThreads.contents[c]=!1};return $(b("bs_caml_option").some(a),[{TAG:2,_0:{TAG:3,_0:i}}])}function Vb(a,b,c,d,e,f,g){if(!Qb(a,b))return Ub(a,b,c,d,e,f,g)}function Wb(a){var c={contents:0},d=function(d,a){c.contents=b("bs_caml_primitive").caml_int_min(N(d,a),b("MercuryThreadlistConstants").MAX_UNSEEN_COUNT)};$(b("bs_caml_option").some(a),[{TAG:2,_0:{TAG:3,_0:d}}]);return c.contents}function Xb(a){var c={contents:0},d=function(b,a){c.contents=N(b,a)};$(b("bs_caml_option").some(a),[{TAG:2,_0:{TAG:3,_0:d}}]);return c.contents}function Yb(a){var c={contents:0},d=function(d,a){c.contents=b("bs_caml_primitive").caml_int_min(nb(d,a,!0),b("MercuryThreadlistConstants").MAX_UNSEEN_COUNT)};$(b("bs_caml_option").some(a),[{TAG:2,_0:{TAG:3,_0:d}}]);return c.contents}function Zb(a){return $(b("bs_caml_option").some(a),[{TAG:1,_0:1}])}function $b(a,c){var d={contents:null},e=function(a,e){e=b("bs_js_dict").get(a.unreadCounts,c);d.contents=e!==void 0?b("bs_belt_Array").keepMap(b("JSSet.bs").values(b("bs_caml_option").valFromOption(e)),function(c){return b("bs_caml_option").nullable_to_opt(l(a,c))}).filter(function(a){return!b("MercuryThreadInfo").isMuted(a)}).length:null};$(b("bs_caml_option").some(a),[{TAG:2,_0:{TAG:3,_0:e}}]);return d.contents}function ac(a){var c={contents:[]},d=function(a,d){c.contents=b("bs_belt_Map").keysToArray(a.threads)};$(b("bs_caml_option").some(a),[{TAG:2,_0:{TAG:3,_0:d}}]);return c.contents}R={make:tb};S=tb;f.irisMapping=j;f.fbid=c;f.deliveryReceipts=d;f.readReceiptsPerThread=e;f.ignoredIds=m;f.blockedIds=n;f.pendingFolderUnseenCount=o;f.typing=aa;f.pendingReadStatusThreads=p;f.messages=q;f.localIDsMap=r;f.messagesWithUploadsInFlight=s;f.threadlistOrderMap=ba;f.pinnedThreads=ca;f.montage=t;f.orderedMessageLists=da;f.unreadCounts=ea;f.initialUnreadCounts=fa;f.unseenTimestamp=ga;f.threads=a;f.thread=l;f.send=$;f.compute=vb;f.getThreadMetaNow=wb;f.getMultiThreadMeta=xb;f.getThreadMeta=yb;f.createNewLocalThread=zb;f.createNewLocalThreadGenerateID=Ab;f.createNewLocalGroupGeneralThreadGenerateID=Cb;f.isEmptyLocalThread=Db;f.isNewEmptyLocalThread=Eb;f.getPinnedThreadlist=Fb;f.unsubscribeThread=Gb;f.sendJS=Jb;f.invalidateSearchedMessages=Rb;f.hasLoadedNMessages=Pb;f.hasLoadedAllMessages=Qb;f.getCurrentlyLoadedMessages=Lb;f.getServerMessageID=Mb;f.getMessagesFromIDs=Nb;f.getMessageFromID=Ob;f.getThreadMessagesRange=Ub;f.getThreadMessagesRangeNow=Sb;f.fetchMoreMessages=Vb;f.processPollStickerVoted=Ib;f.getUnseenUnreadCount=Wb;f.getUnseenUnreadCountRaw=Xb;f.getUnseenCount=Yb;f.getThreadIDs_debug=ac;f.getUnreadThreadCount=$b;f.markAsSeen=Zb;f.processJSActions=Kb;f.Provider=R;f.jsComponent=S;f.useHook=ub}),null);
__d("MessengerState.re",["bs_curry","MessengerState.bs"],(function(a,b,c,d,e,f){c=(a=b("MessengerState.bs")).fbid;f.fbid=c;d=a.deliveryReceipts;f.deliveryReceipts=d;e=a.readReceiptsPerThread;f.readReceiptsPerThread=e;c=a.ignoredIds;f.ignoredIds=c;d=a.blockedIds;f.blockedIds=d;e=a.pendingFolderUnseenCount;f.pendingFolderUnseenCount=e;c=a.typing;f.typing=c;d=a.pendingReadStatusThreads;f.pendingReadStatusThreads=d;e=a.messages;f.messages=e;c=a.localIDsMap;f.localIDsMap=c;d=a.messagesWithUploadsInFlight;f.messagesWithUploadsInFlight=d;e=a.threadlistOrderMap;f.threadlistOrderMap=e;c=a.pinnedThreads;f.pinnedThreads=c;d=a.montage;f.montage=d;e=a.orderedMessageLists;f.orderedMessageLists=e;c=a.unreadCounts;f.unreadCounts=c;d=a.initialUnreadCounts;f.initialUnreadCounts=d;e=a.unseenTimestamp;f.unseenTimestamp=e;c=a.threads;f.threads=c;d=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").thread,a,c);return a};f.thread=d;e=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").compute,a,c);return a};f.compute=e;c=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").getThreadMetaNow,a,c);return a};f.getThreadMetaNow=c;d=function(a,c,d,e){a=b("bs_curry")._4(b("MessengerState.bs").getMultiThreadMeta,a,c,d,e);return a};f.getMultiThreadMeta=d;e=function(a,c,d,e){a=b("bs_curry")._4(b("MessengerState.bs").getThreadMeta,a,c,d,e);return a};f.getThreadMeta=e;c=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").isEmptyLocalThread,a,c);return a};f.isEmptyLocalThread=c;d=a.getPinnedThreadlist;f.getPinnedThreadlist=d;e=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").unsubscribeThread,a,c);return a};f.unsubscribeThread=e;c=function(a,c,d){a=b("bs_curry")._3(b("MessengerState.bs").hasLoadedNMessages,a,c,d);return a};f.hasLoadedNMessages=c;d=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").getCurrentlyLoadedMessages,a,c);return a};f.getCurrentlyLoadedMessages=d;e=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").getServerMessageID,a,c);return a};f.getServerMessageID=e;c=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").getMessagesFromIDs,a,c);return a};f.getMessagesFromIDs=c;d=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").getMessageFromID,a,c);return a};f.getMessageFromID=d;e=function(a,c,d,e,f,g,h){a=b("bs_curry")._7(b("MessengerState.bs").getThreadMessagesRange,a,c,d,e,f,g,h);return a};f.getThreadMessagesRange=e;c=function(a,c,d,e){a=b("bs_curry")._4(b("MessengerState.bs").getThreadMessagesRangeNow,a,c,d,e);return a};f.getThreadMessagesRangeNow=c;d=function(a,c,d,e,f,g,h){a=b("bs_curry")._7(b("MessengerState.bs").fetchMoreMessages,a,c,d,e,f,g,h);return a};f.fetchMoreMessages=d;e=a.getUnseenUnreadCount;f.getUnseenUnreadCount=e;c=a.getUnseenCount;f.getUnseenCount=c;d=a.getThreadIDs_debug;f.getThreadIDs_debug=d;e=function(a,c){a=b("bs_curry")._2(b("MessengerState.bs").getUnreadThreadCount,a,c);return a};f.getUnreadThreadCount=e;(function(a){return null});c=a.jsComponent;f.jsComponent=c;d=a.useHook;f.useHook=d}),null);
__d("MercuryDelayedDispatcher",["MercuryDispatcher","MercuryServerPayloadPreprocessor","MercuryServerRequests","MercurySingletonProvider","MercuryThreadIDMap"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){var c=this;this.$1=a;this.$2=[];this.$3=b("MercuryThreadIDMap").getForFBID(this.$1);this.$4=b("MercuryDispatcher").getForFBID(this.$1);this.$5=b("MercuryServerRequests").getForFBID(this.$1);this.$6=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1);this.$4.subscribe("model-update-completed",function(a,b){return c.$7()})}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};var c=a.prototype;c.handleUpdateWaitForThread=function(a,b){var c=this,d=this.$3.getClientIDFromServerIDNow(b);if(d){this.$8(a);return}this.$3.getClientIDFromServerID(b,function(){return c.$2.push({thread_fbid:b,payload:a})});this.$5.ensureThreadIsFetched(b)};c.$7=function(){if(this.$2&&this.$2.length){var a=this.$2.shift(),b=a.thread_fbid;a=a.payload;this.handleUpdateWaitForThread(a,b)}};c.$8=function(a){a.from_client?this.$4.handleUpdate(a):this.$6.handleUpdate(a)};return a}();e.exports=a;var g=new(b("MercurySingletonProvider"))(a)}),null);
__d("MercuryDispatcher",["invariant","ArbiterMixin","LogHistory","MercuryMessagingLightswitch","MercurySingletonProvider","MercuryThreadInformer","MessengerParticipants.bs","MessengerState.bs","gkx","isEmpty","mixin"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("LogHistory").getInstance("mercury_dispatcher");a=function(a){babelHelpers.inheritsLoose(c,a);c.getForFBID=function(a){return j.getForFBID(a)};c.get=function(){return j.get()};function c(b){var c;c=a.call(this)||this;c.$MercuryDispatcher1=b;return c}var d=c.prototype;d.handlePreprocessedUpdate=function(a){a.preprocessed=!0,this.handleUpdate(a)};d.handleUpdate=function(a){var c=this;this.$MercuryDispatcher2(a);!!a.from_client!==!!a.preprocessed||g(0,5757);delete a.preprocessed;(h||(h=b("isEmpty")))(a)||b("MercuryThreadInformer").getForFBID(this.$MercuryDispatcher1).synchronizeInforms(function(){a.payload_source==="server_invalidate_global_state"&&(c.inform("invalidate-global-state",{}),b("MessengerParticipants.bs").reset());if(a.payload_source==="server_invalidate_thread_state"){var d=a.threads&&a.threads.length>0&&a.threads[0]&&a.threads[0].thread_id;d&&c.inform("invalidate-thread-state",d)}a.threads&&Array.isArray(a.threads)&&a.threads.length>0&&b("gkx")("1443200")&&b("MessengerParticipants.bs").addPreloadedParticipants(a.threads[0]);b("MessengerParticipants.bs").addParticipants(a);b("MessengerState.bs").sendJS(c.$MercuryDispatcher1,b("MessengerState.bs").processJSActions(a));c.inform("update-threadlist",a);c.inform("update-messages",a);c.inform("model-update-completed",null)})};d.$MercuryDispatcher2=function(a){var c=a.payload_source;if(c==="client_change_read_status"||c==="client_mark_thread_seen")return;var d={from_client:a.from_client,messages:null};if(a.actions){a=a.actions.filter(function(a){return a.action_type==="ma-type:user-generated-message"||a.action_type==="ma-type:log-message"}).map(function(a){return{action_type:a.action_type,other_user_fbid:a.other_user_fbid,thread_fbid:a.thread_fbid,message_id:a.message_id}});a.length&&(d.messages=a)}b("MercuryMessagingLightswitch").guard(function(){i.debug("update:"+c,JSON.stringify(d))})};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a;var j=new(b("MercurySingletonProvider"))(a)}),null);
__d("MercurySendErrorLogger",["Banzai","BanzaiLogger","MercuryMessagingLightswitch"],(function(a,b,c,d,e,f){var g=b("BanzaiLogger").create({retry:!0}),h=b("Banzai").isEnabled("mercury_send_error_logging");a={log:function(a){if(!h)return;b("MercuryMessagingLightswitch").guard(function(){var b={message_id:a.message_id,timestamp_client:Date.now(),error_type:a.error_data.type,error_code:a.error_data.code,error_description:a.error_data.description,is_transient:a.error_data.is_transient};g.log("MercurySendErrorLoggerConfig",b)})}};c=a;e.exports=c}),null);
__d("MercuryServerPayloadPreprocessor",["invariant","ChatReliabilityInstrumentation","LogHistory","MercuryAttachment","MercuryDispatcher","MercuryIDs","MercuryMessagingLightswitch","MercurySendErrorLogger","MercurySingletonProvider","MercuryThreadIDMap","MessengerEnvironment","MessengerState.re","URI","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){this.$4=b("LogHistory").getInstance("MercuryServerPayloadPreprocessor"),this.$1=a,this.$2=b("MercuryThreadIDMap").getForFBID(this.$1),this.$3=b("MercuryDispatcher").getForFBID(this.$1)}a.getForFBID=function(a){return i.getForFBID(a)};a.get=function(){return i.get()};var c=a.prototype;c.handleUpdate=function(a){var c=this,e={};a.from_client&&g(0,2150);(a.threads||[]).forEach(function(a){c.$5(a,e);var b=c.$2.getServerIDFromClientIDNow(a.thread_id);d(["MercuryServerRequests"],function(d){d=d.getForFBID(c.$1);d.markThreadFetched(a.thread_id);b&&d.markThreadFetched(b);d.updateLastActionTimestamp(a.timestamp)})});a.pinned_thread_ids=(a.pinned_thread_ids||[]).map(function(a){return c.$2.getClientIDFromServerIDNow(a)});(a.ordered_threadlists||[]).forEach(function(a){var b=a.thread_fbids||[];b=b.concat(a.other_user_fbids||[]);a.thread_ids=b.map(function(a){return c.$2.getClientIDFromServerIDNow(a.toString())})});if(a.delivery_receipts){var f={};for(var h=a.delivery_receipts,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(i){if(j>=h.length)break;k=h[j++]}else{j=h.next();if(j.done)break;k=j.value}k=k;var l=k.other_user_fbid?b("MercuryIDs").getThreadIDFromUserID(k.other_user_fbid):this.$2.getClientIDFromServerIDNow(k.thread_fbid);l&&(f[l]=k.time)}a.delivery_receipts=f}a.actions=a.actions||[];a.actions.forEach(function(f){f.action_type==="ma-type:send-message"&&f.status===10&&b("MercuryMessagingLightswitch").guard(function(){b("MercurySendErrorLogger").log(f)});var h=null,i=null;f.other_user_fbid?(i=b("MercuryIDs").getThreadIDFromUserID(f.other_user_fbid),h=f.other_user_fbid):f.thread_fbid?(i=b("MercuryIDs").getThreadIDFromThreadFBID(f.thread_fbid),h=f.thread_fbid):f.thread_id?(i=b("MercuryIDs").getThreadIDFromThreadFBID(f.thread_id),h=f.thread_id):f.status&&f.status!=1&&f.client_thread_id?i=f.client_thread_id:g(0,2151,f.action_type,f.status);h=h&&h.toString();f.thread_id=c.$2.hasClientIDForServerID(h)?c.$2.getClientIDFromServerIDNow(h):i;f.action_type=="ma-type:send-message"&&f.client_thread_id&&h&&(f.thread_id=f.client_thread_id,c.$6("forceSetServerIDToClientID",h,f.client_thread_id)&&b("ChatReliabilityInstrumentation").logSET_THREAD_ID_MAP(h+":"+f.client_thread_id),c.$2.forceSetServerIDToClientID(h,f.client_thread_id),e[h]=f.client_thread_id);f.thread_id||g(0,2152,f.action_type);(!a.payload_source||!a.payload_source.startsWith("server"))&&d(["MercuryServerRequests"],function(a){a.getForFBID(c.$1).updateLastActionTimestamp(f.timestamp)})});this.$7(a);this.$8(a);if(a.end_of_history){l=[];for(var k=0;k<a.end_of_history.length;k++){j=a.end_of_history[k];j.type=="user"?l.push("user:"+j.fbid):j.type=="thread"&&this.$2.hasClientIDForServerID(j.fbid)&&l.push(this.$2.getClientIDFromServerIDNow(j.fbid))}a.end_of_history=l}if(a.roger){var m={};Object.keys(a.roger).forEach(function(d){var e=Object.keys(a.roger[d]),f;d?f=c.$2.getClientIDFromServerIDNow(d):e.length===1&&(f=b("MercuryIDs").getThreadIDFromUserID(e[0]));if(f){e=a.roger[d];m[f]={};for(var g in e)if(Object.prototype.hasOwnProperty.call(e,g)){d=b("MercuryIDs").getParticipantIDFromUserID(g);m[f][d]=e[g]}}});a.roger=m}a.newlyAddedClientIDs=e;a.preprocessed=!0;this.$3.handleUpdate(a)};c.$6=function(a,c,d){var e=this;if(!b("gkx")("1199097"))return;var f=b("MessengerState.re").getThreadMetaNow(this.$1,d);if(f==null){b("MercuryMessagingLightswitch").guard(function(){e.$4.debug(a,c+":"+d)});return!0}return!1};c.$5=function(a,c){var d=a.other_user_fbid?a.other_user_fbid:a.thread_fbid;d||g(0,2153);var e=this.$2.getClientIDFromServerIDNow(d);e||(e=a.other_user_fbid?b("MercuryIDs").getThreadIDFromUserID(a.other_user_fbid):b("MercuryIDs").getThreadIDFromThreadFBID(a.thread_fbid),this.$6("setServerIDToClientID",d,e),this.$2.setServerIDToClientID(d,e),this.$2.setDeprecatedServerIDToClientID(a.thread_id,e),c[d]=e);a.thread_id=e};c.$7=function(a){a.actions.forEach(function(a){a.action_type==="ma-type:user-generated-message"&&(a.attachments=a.attachments||[],a.attachments.forEach(function(a){if(b("MercuryAttachment").isShareAttachment(a)&&a.share&&b("MessengerEnvironment").messengerui){var c=new(h||(h=b("URI")))(a.share.uri);c.getDomain()||(a.share.uri=c.setDomain("facebook.com").setSubdomain((h||(h=b("URI"))).getRequestURI().getSubdomain()).setProtocol("https").toString())}}))})};c.$8=function(a){a.actions.forEach(function(a){if(a.action_type!=="ma-type:user-generated-message")return;a=a;if(!a.has_attachment||!a.attachments)return;for(var c=a.attachments.length-1;c>=0;c-=1){var d=a.attachments[c];if(!d.share||!d.share.style_list||d.share.style_list[0]!="genie_message")continue;d.share.target.genie_id&&(a.author=b("MercuryIDs").getParticipantIDFromUserID(d.share.target.genie_id));d.share.target&&!d.share.target.attachment&&(a.attachments.splice(c,1),a.has_attachment=a.attachments.length>0)}})};return a}();e.exports=a;var i=new(b("MercurySingletonProvider"))(a)}),null);
__d("MercuryServerSendMessageQueueOptions",[],(function(a,b,c,d,e,f){a=function(a,b,c,d,e,f){this.success_handler=a,this.error_handler=b,this.transport_error_handler=c,this.timeout_handler=d,this.timeout=e,this.connection_retries=f};e.exports=a}),null);
__d("XMercuryUnseenThreadIDsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/unseen_thread_ids/",{})}),null);
__d("XMessagingChangeMentionsMuteModeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/mercury/change_mentions_mute_thread/",{})}),null);
__d("XMessagingChangeReactionsMuteModeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/mercury/change_reactions_mute_thread/",{})}),null);
__d("MercuryServerRequests",["errorCode","invariant","Promise","Arbiter","AsyncResponse","AvailableListConstants","Bootloader","ChannelConstants","ChatReliabilityInstrumentation","CurrentUser","Env","LogHistory","MercuryAPIArgsSource","MercuryAssert","MercuryDispatcher","MercuryIDs","MercuryMessageClientState","MercuryMessageIDs.bs","MercuryMessagingLightswitch","MercurySendErrorLogger","MercuryServerDispatcher","MercuryServerPayloadPreprocessor","MercuryServerRequestsConfig","MercuryServerSendMessageQueueOptions","MercuryServerSendMessageQueueRouter","MercuryServerURIs","MercurySingletonProvider","MercurySyncDeltaHolder","MercuryTagHelper","MercuryThreadIDMap","MessagingConfig","MessagingTag","MessengerEnvironment","MessengerWebStgTypedLoggerLite","ODS","PresenceStatus","ScriptPath","XMercuryUnseenThreadIDsController","XMessagingChangeMentionsMuteModeController","XMessagingChangeReactionsMuteModeController","createObjectFrom","promiseDone","setTimeoutAcrossTransitions","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("MessengerWebStgTypedLoggerLite").log,k=b("LogHistory").getInstance("mercury_server"),l=b("MercuryAPIArgsSource").MERCURY,m=30*1e3;function n(a){return a.getError()?"_"+a.getError():""}function o(a,c){var d=babelHelpers["extends"]({},a),e;if(c.threads){d.threads||(d.threads={});for(e in c.threads)d.threads[e]=Object.keys(b("createObjectFrom")((d.threads[e]||[]).concat(c.threads[e]||[])))}if(c.messages){d.messages||(d.messages={});for(e in c.messages){d.messages[e]||(d.messages[e]={});for(var f in c.messages[e])d.messages[e][f]?d.messages[e][f]=s(d.messages[e][f],c.messages[e][f]):d.messages[e][f]=c.messages[e][f]}}d.client=a.client||c.client;return d}function p(a,c){var d=Object.assign(b("createObjectFrom")(a.folders,!0),b("createObjectFrom")(c.folders,!0));a=a.client||c.client;return{folders:Object.keys(d),client:a}}function q(a,b){for(var c in b)if(a[c]&&typeof a[c]==="object")a[c]=s(a[c],b[c]);else if(b[c]&&typeof b[c]==="object"){var d={};Object.assign(d,b[c]);a[c]=d}return a}function r(a,b){return b}function s(a,b){var c=Math.max(a.limit,b.limit),d;!a.timestamp?d=b.timestamp:!b.timestamp?d=a.timestamp:d=Math.min(a.timestamp,b.timestamp);return{limit:c,timestamp:d}}function t(a,b){var c=a.client||b.client;c={ids:{},client:c};Object.assign(c.ids,a.ids,b.ids);return c}function u(a,c){var d={},e,f=a.client||c.client;delete a.client;delete c.client;for(e in a)Object.assign(d,b("createObjectFrom")(a[e],e));for(e in c)Object.assign(d,b("createObjectFrom")(c[e],e));a={client:f};for(var g in d)e=d[g],a[e]||(a[e]=[]),a[e].push(g);return a}function v(a,c){var d=a.client||c.client;a=b("createObjectFrom")(a.ids,!0);c=b("createObjectFrom")(c.ids,!0);a=Object.assign(a,c);return{ids:Object.keys(a),client:d}}a=function(){function a(a){var c=this;this.$1=a;this.$2=0;this.$3={};this.$4={};this.__threadIDMap=b("MercuryThreadIDMap").getForFBID(this.$1);this.$5=b("MercuryDispatcher").getForFBID(this.$1);this.$6=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1);this.$7=new(b("MercuryServerSendMessageQueueOptions"))(function(a,b){c.__handleUpdate(a,b)},function(a){return c.$9(a)},function(a){c.$10(a)},function(a){return c.$11(a)},b("MercuryServerRequestsConfig").sendMessageTimeout,b("MessagingConfig").SEND_CONNECTION_RETRIES);this.$8=b("MercurySyncDeltaHolder").getForFBID(this.$1);this.$12()}a.getForFBID=function(a){return w.getForFBID(a)};a.get=function(){return w.get()};var c=a.prototype;c.fetchThreadlistInfo=function(a,c,d,e,f,g){d===void 0&&(d=b("MessagingTag").INBOX);f===void 0&&(f=l);var h=e?b("MercuryServerDispatcher").IMMEDIATE:null;f={client:f};f[d]={offset:a,limit:c,filter:e,before:g};this.__sendRequest(b("MercuryServerURIs").THREADLIST_INFO,f,h)};c.fetchUnseenThreadIDs=function(a,c){a===void 0&&b("MessagingTag").INBOX,c===void 0&&(c=l),this.__sendRequest(b("XMercuryUnseenThreadIDsController").getURIBuilder().getURI().toString(),{})};c.fetchUnreadThreadIDs=function(a,c){c===void 0&&(c=l),this.__sendRequest(b("MercuryServerURIs").UNREAD_THREADS,{folders:[a],client:c})};c.fetchThreadData=function(a,c){var d=this;c===void 0&&(c=l);b("MercuryAssert").allThreadID(a);var e={threads:{},client:c},f=[],g=[];a.forEach(function(a){if(d.$3[a])return;d.$3[a]=!0;var c=d.__threadIDMap.getServerIDFromClientIDNow(a);a=b("MercuryIDs").tokenize(a);if(a.type=="user")f.push(a.value),e.threads.user_ids=f;else if(a.type=="thread")c?g.push(c):g.push(a.value),e.threads.thread_fbids=g;else if(a.type=="root")c&&(g.push(c),e.threads.thread_fbids=g);else if(a.type!="pending")throw new Error("Unknown thread type",a)});e.threads.user_ids&&e.threads.user_ids.forEach(function(a){a||(b("MercuryMessagingLightswitch").guard(function(){k.error("empty user id",JSON.stringify(f))}),b("ChatReliabilityInstrumentation").logERROR("Invalid user ID sent to thread_info.php: "+JSON.stringify(f)))});e.threads.thread_fbids&&e.threads.thread_fbids.forEach(function(c){c||b("ChatReliabilityInstrumentation").logERROR("Invalid FBID sent to thread_info.php: "+JSON.stringify(a))});for(var h in e.threads){this.__sendRequest(b("MercuryServerURIs").THREAD_INFO,e);break}};c.ensureThreadIsFetched=function(a,c){c===void 0&&(c=l);if(!this.__threadIDMap.getClientIDFromServerIDNow(a)&&!this.$3[a]){if(!a){b("ChatReliabilityInstrumentation").logERROR("Ensure invalid FBID sent to thread_info.php");k.error("attempting to fetch empty thread_fbid. Bad idea!");return}this.$3[a]=!0;this.__sendRequest(b("MercuryServerURIs").THREAD_INFO,{threads:{thread_fbids:[a]},client:c})}};c.fetchThreadMessages=function(a,c,d,e,f,g){var h=this;g===void 0&&(g=l);b("MercuryAssert").isThreadID(a);var i;c=b("MercuryIDs").tokenize(a);var j=this.__threadIDMap.getServerIDFromClientIDNow(a),k=!1;if(j)j=j,i=c.type=="user"?"user_ids":"thread_fbids";else{j=c.value;switch(c.type){case"user":i="user_ids";k=!0;break;case"thread":i="thread_fbids";break}}var m={messages:{},threads:{},client:g};i?(m.messages[i]={},m.messages[i][j]={timestamp:e,limit:d},k&&(m.threads[i]=[j]),this.__sendRequest(b("MercuryServerURIs").THREAD_INFO,m,f)):this.__threadIDMap.getServerIDFromClientID(a,function(a){m.messages.thread_fbids={},m.messages.thread_fbids[a]={timestamp:e,limit:d},h.__sendRequest(b("MercuryServerURIs").THREAD_INFO,m,f)})};c.handleThreadInfoError=function(a,c){var d=a.getData();c=[];if(d.messages&&!b("gkx")("1738138")){for(var e in d.messages.thread_fbids){a=this.__threadIDMap.getClientIDFromServerIDNow(e);a&&c.push(this.$13(a))}for(var f in d.messages.user_ids)c.push(this.$13("user:"+f));for(var g in d.messages.group_ids)c.push(this.$13("group:"+g))}c.length&&this.$5.handleUpdate({actions:c,from_client:!0,payload_source:"client_channel_message"});if(d.threads&&(d.threads.user_ids||d.threads.thread_fbids||d.threads.group_ids||d.threads.thread_ids)){a=5;c=!0;d.retry_count||(d.retry_count=0,d.messages&&delete d.messages);if(c){c=Math.pow(2,Math.min(d.retry_count,a))*1e3;b("setTimeoutAcrossTransitions")(function(){k.log("retry_thread","{}"),this.__sendRequest(b("MercuryServerURIs").THREAD_INFO,d)}.bind(this),c);d.retry_count++}}};c.markFolderAsRead=function(a){this.__sendRequest(b("MercuryServerURIs").MARK_FOLDER_READ,{folder:a});a=[{action_type:"mga-type:mark-all-read",folder:a}];this.$5.handleUpdate({global_actions:a,from_client:!0,payload_source:"client_change_read_status"})};c.changeThreadReadStatus=function(a,c,d,e,f,g){var h=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(i){var j;j={ids:(j={},j[i]=c,j),source:d,watermarkTimestamp:e,shouldSendReadReceipt:f,commerce_last_message_type:g};b("MercuryMessagingLightswitch").guard(function(){k.log("initiate_change_read_status",JSON.stringify({thread_id:a,thread_fbid:i,mark_as_read:c,watermarkTimestamp:e}))});h.__sendRequest(b("MercuryServerURIs").CHANGE_READ_STATUS,j)})};c.changeThreadArchivedStatus=function(a,c,d){var e=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){var f={ids:{},source:d};f.ids[a]=c;e.__sendRequest(b("MercuryServerURIs").CHANGE_ARCHIVED_STATUS,f)})};c.changeThreadPinnedStatus=function(a,c,d){var e=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){var f={ids:{},source:d};f.ids[a]=c;e.__sendRequest(b("MercuryServerURIs").CHANGE_PINNED_STATUS,f)})};c.changeThreadPageFollowUpStatus=function(a,c,d){var e=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){var f={ids:{},source:d};f.ids[a]=c;e.__sendRequest(b("MercuryServerURIs").CHANGE_PAGE_FOLLOW_UP_STATUS,f)})};c.changeThreadFolder=function(a,c){var d=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){var e={};e[c]=[a];d.__sendRequest(b("MercuryServerURIs").MOVE_THREAD,e)})};c.changeMutingOnThread=function(a,c){var d=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){d.__sendRequest(b("MercuryServerURIs").CHANGE_MUTE_THREAD,{thread_fbid:a,mute_settings:c,payload_source:l})})};c.changeMentionsMutingOnThread=function(a,c){var d=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){d.__sendRequest(b("XMessagingChangeMentionsMuteModeController").getURIBuilder().getURI(),{thread_fbid:a,mentions_mute_mode:c,payload_source:l})})};c.changeReactionsMutingOnThread=function(a,c){var d=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){d.__sendRequest(b("XMessagingChangeReactionsMuteModeController").getURIBuilder().getURI(),{thread_fbid:a,reactions_mute_mode:c,payload_source:l})})};c.markThreadSpam=function(a,c){var d=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){d.__sendRequest(b("MercuryServerURIs").MARK_SPAM,{id:a,source:c})})};c.unmarkThreadSpam=function(a,c){var d=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){d.__sendRequest(b("MercuryServerURIs").UNMARK_SPAM,{id:a,source:c})})};c.deleteThread=function(a,b){this.deleteThreads([a],b)};c.deleteThreads=function(a,c){var d=this;b("promiseDone")(b("Promise").all(a.map(function(a){b("MercuryAssert").isThreadID(a);return new(b("Promise"))(function(b){return d.__threadIDMap.getServerIDFromClientID(a,b)})})).then(function(a){d.__sendRequest(b("MercuryServerURIs").DELETE_THREAD,{ids:a,source:c})}))};c.deleteMessages=function(a,c){b("MercuryMessageIDs.bs").getServerIDs(c||[],function(a){this.__sendRequest(b("MercuryServerURIs").DELETE_MESSAGES,{message_ids:a})}.bind(this))};c.sendDeliveryReceipts=function(a,c){b("MercuryMessageIDs.bs").getServerIDs(a||[],function(a){this.__sendRequest(b("MercuryServerURIs").DELIVERY_RECEIPTS,{message_ids:a,thread_ids:c})}.bind(this))};c.sendNewMessage=function(a,c){var d=this;c===void 0&&(c=l);a.offline_threading_id||b("ODS").bumpEntityKey(3303,"chat.web","missing_otid_on_send");if(a.client_state&&a.client_state!==b("MercuryMessageClientState").SEND_TO_SERVER)return;var e=b("MercuryIDs").tokenize(a.thread_id),f=e.type,g=babelHelpers["extends"]({},a);g.thread_id=null;f=="user"?(g.other_user_fbid=e.value,this.$14(g,c)):f=="thread"?(g.thread_fbid=e.value,this.$14(g,c)):f=="root"&&e.value==g.offline_threading_id?(g.client_thread_id=a.thread_id,this.$14(g,c)):(b("MercuryIDs").isLocalThread(a.thread_id)||h(0,5587,a.thread_id),this.__threadIDMap.getServerIDFromClientID(a.thread_id,function(a){g.thread_fbid=a,d.$14(g,c)}));this.$15("send_msg",a);b("MercuryMessagingLightswitch").guard(function(){b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,c){b.markerStart(c.SEND_MESSAGE,a.offline_threading_id)},"MercuryServerRequests")})};c.$15=function(a,c){try{var d=(i||(i=b("Env"))).isCQuick?"Comet Inbox":b("MessengerEnvironment").messengerdotcom?"messenger_dot_com":b("MessengerEnvironment").facebookdotcom?"Facebook Messenger (other)":"Other",e=b("MercuryTagHelper").get(c.tags||[],"entrypoint"),f=b("MercuryIDs").getThreadFBIDFromThreadID(c.thread_id),g=b("PresenceStatus").get(f)===b("AvailableListConstants").ACTIVE;j({attachment_infos:void 0,client_timestamp:Date.now(),entry_point:e,event_name:a,first_attachment_type:void 0,"interface":d,mid:c.message_id,offline_threading_id:c.offline_threading_id,other_user_fbid:b("MercuryIDs").isGroupChat(c.thread_id)?void 0:f,thread_fbid:b("MercuryIDs").isGroupChat(c.thread_id)?f:void 0,extra_data:{pathName:b("ScriptPath").getScriptPath(),isActiveNow:g}})}catch(a){b("ODS").bumpEntityKey(3303,"chat.web","logging_error")}};c.$14=function(a,c){b("Arbiter").inform(b("ChannelConstants").ATTEMPT_RECONNECT),this.$4[a.message_id]=Date.now(),b("MercuryServerSendMessageQueueRouter").getForFBID(this.$1).enqueue(a.other_user_fbid||a.thread_fbid||a.client_thread_id,this.$7,c,a)};c.__getSendMessageQueueOptions=function(){return this.$7};c.markSeen=function(){var a=this.$2;this.__sendRequest(b("MercuryServerURIs").MARK_SEEN,{seen_timestamp:a})};c.$16=function(a,c,d,e){a=a.getData();var f=a.message_batch||[a];b("MercuryMessagingLightswitch").guard(function(){k.debug("handle_send_message_error_common",JSON.stringify({reliability_error_status:d,request_error_status:c,error_data:e,message_list:f}))});b("ChatReliabilityInstrumentation").logERROR("send_message_fail");var g=f.map(function(a){a={action_type:"ma-type:send-message",other_user_fbid:a.other_user_fbid,thread_fbid:a.thread_fbid,client_message_id:a.message_id,message_id:a.message_id,client_thread_id:a.client_thread_id,status:c,error_data:e};return a});g.forEach(function(a){a.action_type==="ma-type:send-message"&&a.status===10&&this.__logMercurySendError(a)},this);a={actions:g,payload_source:"client_handle_error"};b("MercuryMessagingLightswitch").guard(function(){b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(a,b){g.map(function(c){a.markerEnd(b.SEND_MESSAGE,"FAIL",c.client_message_id)})},"MercuryServerRequests")});this.$6.handleUpdate(a)};c.handleSendMessageError=function(a){var c=a.getPayload(),d=null,e=null;c&&c.error_payload?(d=3,e="send_error"):(d=10,e="request_error"+n(a));c=a.error;c===1404102?b("AsyncResponse").verboseErrorHandler(a):(c===1545052||c===1409009||c===1409008||c===1409007||c===1409006||c===1545083||c===1545084)&&b("AsyncResponse").defaultErrorHandler(a);c=/<.*>/.test(a.getErrorDescription())?a.getErrorSummary():a.getErrorDescription();this.$16(a.getRequest(),d,e,{type:1,code:a.getError(),description:c,is_transient:a.isTransient()})};c.handleSendMessageTransportError=function(a){this.$16(a.getRequest(),10,"transport_error"+n(a),{type:2,code:a.getError(),is_transient:!0})};c.handleSendMessageTimeout=function(a){this.$16(a,10,"transport_timeout",{type:3,is_transient:!0})};c.getLastActionTimestamp=function(){return this.$2};c.__logMercurySendError=function(a){b("MercurySendErrorLogger").log(a)};c.updateLastActionTimestamp=function(a){var b=Date.now()-1e3*60*60*24;a&&a>b&&(this.$2=Math.max(this.$2,a))};c.markThreadFetched=function(a){delete this.$3[a]};c.$13=function(a){return{action_type:"ma-type:log-message",thread_id:a,message_id:a,timestamp:Date.now(),is_unread:!1,source:"source:unknown",log_message_body:"",log_message_type:"log:error-msg",log_message_data:{}}};c.__getForAsyncRequest=function(c){c=c.getData();c=c.request_user_id?c.request_user_id:b("CurrentUser").getID();return a.getForFBID(c)};c.__handleUpdate=function(a,c){a.payload_source==="server_send_message"&&b("MercuryMessagingLightswitch").guard(function(){b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,c){var d=a.actions&&a.actions[0]&&a.actions[0].client_message_id;d&&b.markerEnd(c.SEND_MESSAGE,"SUCCESS",d)},"MercuryServerRequests")}),this.__getForAsyncRequest(c).$6.handleUpdate(a)};c.$17=function(a){var b=this.__getForAsyncRequest(a);b.handleThreadInfoError(a)};c.$18=function(a){var b=this.__getForAsyncRequest(a);b.handleThreadInfoError(a,!0)};c.$9=function(a){var b=this.__getForAsyncRequest(a.getRequest());b.handleSendMessageError(a)};c.$10=function(a){var b=this.__getForAsyncRequest(a.getRequest());b.handleSendMessageTransportError(a)};c.$11=function(a){var b=this.__getForAsyncRequest(a);b.handleSendMessageTimeout(a)};c.$12=function(){var a=this,c,d=null;b("MercuryServerRequestsConfig").msgrRegion&&(d={name:"X-MSGR-Region",value:b("MercuryServerRequestsConfig").msgrRegion});c=(c={},c[b("MercuryServerURIs").THREAD_INFO]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_DEFERRED_MULTI,customHeader:d,batch_function:o,handler:function(b,c){return a.__handleUpdate(b,c)},error_handler:function(b){return a.$17(b.getRequest())},timeout_handler:function(b){return a.$18(b)},timeout:m},c[b("MercuryServerURIs").MARK_FOLDER_READ]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").CHANGE_READ_STATUS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(c,d){a.__handleUpdate(c,d);var e=(c.threads||[]).map(function(a){return a&&a.thread_id});b("MercuryMessagingLightswitch").guard(function(){k.log("response_change_read_status",JSON.stringify({threads:e}))})}},c[b("MercuryServerURIs").MARK_SEEN]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:d,batch_function:r,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").THREADLIST_INFO]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE_UNIQUE,customHeader:d,batch_function:q,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").MARK_SPAM]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").UNMARK_SPAM]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").UNREAD_THREADS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE_UNIQUE,customHeader:d,batch_function:p,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").CHANGE_ARCHIVED_STATUS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:d,batch_function:t,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").CHANGE_PINNED_STATUS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:d,batch_function:t,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").CHANGE_PAGE_FOLLOW_UP_STATUS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:d,batch_function:t,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").DELETE_THREAD]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:d,batch_function:v,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").DELETE_MESSAGES]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").DELIVERY_RECEIPTS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").MOVE_THREAD]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:d,batch_function:u,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").CHANGE_MUTE_THREAD]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}},c);var e=b("XMercuryUnseenThreadIDsController").getURIBuilder().getURI().toString();c[e]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}};e=b("XMessagingChangeMentionsMuteModeController").getURIBuilder().getURI().toString();c[e]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}};e=b("XMessagingChangeReactionsMuteModeController").getURIBuilder().getURI().toString();c[e]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}};b("MercuryServerDispatcher").registerEndpoints(c)};c.__sendRequest=function(a,c,d){if(this.$8)switch(a){case b("MercuryServerURIs").THREADLIST_INFO:case b("MercuryServerURIs").THREAD_INFO:c.cachius_min_seq_id=this.$8.getLastSeqID();break;default:break}b("MercuryServerDispatcher").trySend(a,c,d,this.$1)};c.__getFBID=function(){return this.$1};return a}();e.exports=a;var w=new(b("MercurySingletonProvider"))(a)}),null);
__d("MercuryThreadIDMap",["KeyedCallbackManager","MercuryAssert","MercuryIDs","MercurySingletonProvider"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a,this.$2=new(b("KeyedCallbackManager"))(),this.$3=new(b("KeyedCallbackManager"))()}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};var c=a.prototype;c.setServerIDToClientID=function(a,b){var c=this.getClientIDFromServerIDNow(a);if(c)return;this.forceSetServerIDToClientID(a,b)};c.forceSetServerIDToClientID=function(a,b){this.$2.setResource(a,b),this.$3.setResource(b,a)};c.setDeprecatedServerIDToClientID=function(a,b){a&&this.$2.setResource(a,b)};c.getClientIDFromServerIDNow=function(a){return this.$2.getResource(a)};c.getClientIDFromServerID=function(a,b){var c=this;this.$2.executeOrEnqueue(a,b);d(["MercuryServerRequests"],function(b){b.getForFBID(c.$1).ensureThreadIsFetched(a)})};c.getServerIDFromClientIDNow=function(a){return this.$3.getResource(a)};c.getServerIDFromClientID=function(a,c){var e=this;b("MercuryAssert").isThreadID(a);var f=this.$3.executeOrEnqueue(a,c);d(["MercuryServerRequests"],function(c){var d=e.$3.getUnavailableResources(f),g=b("MercuryIDs").tokenize(a);d.length&&g.type!="root"&&c.getForFBID(e.$1).fetchThreadData(d)})};c.hasClientIDForServerID=function(a){return!!this.getClientIDFromServerIDNow(a)};c.convertThreadIDIfAvailable=function(a){var b=this.getClientIDFromServerIDNow(a);return b||a};c.canLinkExternally=function(a){b("MercuryAssert").isThreadID(a);var c=b("MercuryIDs").tokenize(a);return c.type=="user"||!!this.getServerIDFromClientIDNow(a)};c.reset=function(){this.$3.reset(),this.$2.reset()};return a}();e.exports=a;var g=new(b("MercurySingletonProvider"))(a)}),null);
__d("MercuryLoggingHelper",[],(function(a,b,c,d,e,f){a={obfuscateThread:function(a){var b=babelHelpers["extends"]({},a);a&&a.snippet&&a.snippet.length>0&&(b.snippet="*** [redacted] ***");return b},obfuscateMessage:function(a){var b=babelHelpers["extends"]({},a);a&&a.body&&a.body.length>0&&(b.body="*** [redacted] ***");return b}};e.exports=a}),null);
__d("MercuryServerSendMessageQueueSimulatedError",["AsyncRequest","AsyncResponse"],(function(a,b,c,d,e,f){var g=9999;a={create:function(a){a=new(b("AsyncRequest"))(this.endpoint_uri).setData({message_batch:[a],client:this.client});var c=new(b("AsyncResponse"))(a,{});Object.assign(c,{error:g,silentError:!1,transientError:!0,request:a});return c}};e.exports=a}),null);
__d("XMessagingSendController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/send/",{privacy_mutation_token:{type:"String"}})}),null);
__d("MercuryServerSendMessageQueue",["fbt","ChatReliabilityInstrumentation","CurrentUser","LogHistory","MercuryIDs","MercuryLoggingHelper","MercuryMessagingLightswitch","MercuryServerDispatcher","MercuryServerRequestsConfig","MercuryServerSendMessageQueueSimulatedError","MercurySyncDeltaHandler","MessengerAttachmentTransformerForSend.bs","MessengerObjectAssociationType","MessengerState.bs","ODS","Run","XMessagingSendController"],(function(a,b,c,d,e,f,g){"use strict";var h=b("LogHistory").getInstance("mercury_server_send_message_queue");a=function(){function a(a,c,d,e){var f=this;this.pending_message=null;this.queue=[];this.$6=function(){return f.queue.length||f.pending_message?g._("B\u1ea1n v\u1eabn ch\u01b0a g\u1eedi tin nh\u1eafn. B\u1ea1n c\u00f3 mu\u1ed1n tho\u00e1t m\u00e0 kh\u00f4ng g\u1eedi kh\u00f4ng?"):void 0};this.sender_id=a;this.queue_id=c;this.$2=d.success_handler;this.$1=d.error_handler;this.$4=d.transport_error_handler;this.$3=d.timeout_handler;this.$5=b("MercurySyncDeltaHandler").getForFBID(this.sender_id);this.client=e;b("Run").onBeforeUnload(this.$6,!1);a=null;b("MercuryServerRequestsConfig").msgrRegion&&(a={name:"X-MSGR-Region",value:b("MercuryServerRequestsConfig").msgrRegion});c=this.__getSendURI();c=(e={},e[c]={request_user_id:this.sender_id,endpoint_id:this.queue_id,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:a,handler:this.handleSuccess.bind(this),error_handler:this.handleError.bind(this),transport_error_handler:this.handleTransportError.bind(this),timeout:d.timeout,timeout_handler:this.handleTimeout.bind(this),connection_retries:d.connection_retries},e);b("MercuryServerDispatcher").registerEndpoints(c)}var c=a.prototype;c.__getSendURI=function(){return b("XMessagingSendController").getURIBuilder().getURI().toString()};c.__preparePayload=function(a){var c;c=(c=a)!=null?(c=c.replied_to_message)!=null?(c=c.message)!=null?c.message_id:c:c:c;var d=null,e=a.client_thread_id;if(b("MercuryIDs").isLocalThread(e)){e=b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),e);if(e&&e.message_count===1&&e.object_association_type===b("MessengerObjectAssociationType").GENERAL_CHAT){d=(e=e)!=null?(e=e.associated_object)!=null?e.id:e:e}}e=c?b("MessengerState.bs").getServerMessageID(b("CurrentUser").getID(),c):null;return{client:this.client,action_type:a.action_type,app_id:a.app_id,audio_ids:a.audio_ids,body:a.body,client_thread_id:a.client_thread_id,ephemeral_ttl_mode:a.ephemeral_ttl_mode,file_ids:a.file_ids,gif_ids:a.gif_ids,has_attachment:a.has_attachment,image_ids:a.image_ids,location_attachment:a.location_attachment,lightweight_action_attachment:a.lightweight_action_attachment,log_message_data:a.log_message_data,log_message_type:a.log_message_type,message_id:a.message_id,message_source_data:a.message_source_data,montage_reply_data:a.montage_reply_data,offline_threading_id:a.offline_threading_id,other_user_fbid:a.other_user_fbid,photo_fbids:a.photo_fbids,shareable_attachment:a.shareable_attachment,signature_id:a.signatureID,source:a.source,specific_to_list:a.specific_to_list,sticker_id:a.sticker_id,tags:a.tags,thread_fbid:a.thread_fbid,timestamp:a.timestamp,ui_push_phase:a.ui_push_phase,video_ids:a.video_ids,platform_xmd:a.platform_xmd,profile_xmd:a.profile_xmd,replied_to_message_id:e,work_synced_group_id:d,to_list_md5:a.to_list_md5,mib_direct_message_data:a.mib_direct_message_data}};c.enqueue=function(a){this.queue.push(a),this.$7()};c.$7=function(){if(this.pending_message||!this.queue.length){this.pending_message&&this.$8();return}this.pending_message=this.queue.shift();var a=this.__preparePayload(this.pending_message);for(var c in a)(a[c]===void 0||a[c]===null)&&delete a[c];if(!a.action_type){var d=b("MercuryLoggingHelper").obfuscateMessage(a);b("ChatReliabilityInstrumentation").logERROR("missing action type before sending to send controller");b("MercuryMessagingLightswitch").guard(function(){h.debug("missing_action_type",JSON.stringify(d))})}if(!a.message_id){var e=b("MercuryLoggingHelper").obfuscateMessage(a);b("ChatReliabilityInstrumentation").logERROR("missing action type before sending to send controller"+JSON.stringify(e));b("MercuryMessagingLightswitch").guard(function(){h.debug("missing_message_id",JSON.stringify(e))})}this.$9();b("MercuryServerDispatcher").trySend(this.__getSendURI(),a,null,this.sender_id,this.queue_id)};c.$10=function(){while(this.queue.length)this.$11(this.queue.shift())};c.$11=function(a){var c=this;this.$1(b("MercuryServerSendMessageQueueSimulatedError").create(a));b("MercuryMessagingLightswitch").guard(function(){h.error("mark_as_failed",JSON.stringify({fbid:c.sender_id,queue_id:c.queue_id,message:b("MercuryLoggingHelper").obfuscateMessage(a)}))})};c.handleSuccess=function(a,c){var d=this;this.pending_message=null;var e=(a.actions||[]).map(function(a){var c=babelHelpers["extends"]({},a);if(a.graphql_payload&&a.graphql_payload.length>0){var e=b("MessengerAttachmentTransformerForSend.bs").transform(d.sender_id,a.graphql_payload,a.message_id,a.for_page);c=Object.assign(c,{attachments:e})}e=(e=a)!=null?(e=e.log_message_data)!=null?e.graphql_image:e:e;if(e){e=b("MessengerAttachmentTransformerForSend.bs").transform(d.sender_id,[e],a.message_id,a.for_page);c=Object.assign(c,{log_message_data:{image:e[0]}})}return c});a.actions=e;this.resumeAfterSuccess(a,c)};c.resumeAfterSuccess=function(a,b){this.$2(a,b),this.$12(),this.$7()};c.handleError=function(a){this.pending_message=null,this.$12(),this.$1(a),this.$10()};c.handleTransportError=function(a){this.pending_message=null,this.$12(),this.$4(a),this.$10()};c.handleTimeout=function(a){this.pending_message=null,this.$12(),this.$3(a),this.$10()};c.$9=function(){this.$5.pause()};c.$12=function(){this.$5.resume()};c.$8=function(){var a=this;b("MercuryMessagingLightswitch").guard(function(){h.debug("maybe_send_next_pending_message",JSON.stringify({fbid:a.sender_id,queue_id:a.queue_id,pending_message:b("MercuryLoggingHelper").obfuscateMessage(a.pending_message),queue:a.queue.map(function(a){return b("MercuryLoggingHelper").obfuscateMessage(a)})}))});var c="send_queue.delayed.queue_length."+this.queue.length.toString();b("ODS").bumpEntityKey(3303,"chat.web",c)};return a}();e.exports=a}),null);
__d("MercurySingletonMixin",["CurrentUser"],(function(a,b,c,d,e,f){a={_getInstances:function(){this._instances||(this._instances={});return this._instances},get:function(){return this.getForFBID(b("CurrentUser").getID())},getForFBID:function(a){var b=this._getInstances();b[a]||(b[a]=new this(a));return b[a]}};e.exports=a}),null);
__d("MercuryServerSendMessageQueueRouter",["LogHistory","MercuryServerSendMessageQueue","MercurySingletonMixin","ODS"],(function(a,b,c,d,e,f){var g=b("LogHistory").getInstance("mercury_server_send_message_queue_router"),h="chat.web.send_queue_router";b("ODS").setEntitySample(h,.1);a=function(){function a(a){this.queues=new Map(),this.fbid=a}var c=a.prototype;c.enqueue=function(a,c,d,e){var f=this.queues.get(a);f===void 0&&(f=new(b("MercuryServerSendMessageQueue"))(this.fbid,a,c,d),this.queues.set(a,f),g.debug("added queue",JSON.stringify({fbid:this.fbid,queue_id:a})),b("ODS").bumpEntityKey(3303,h,"new_queue"));f.enqueue(e)};return a}();e.exports=a;Object.assign(a,b("MercurySingletonMixin"))}),null);
__d("MercurySyncDataFetcherImpl",["invariant","Promise","AsyncResponse","Bootloader","CurrentUser","FBIDCheck","MercuryConfig","MercuryThreadlistConstants","MessagingConfig","UserActivity","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";f.fetchThreadlistFromGraphQL=a;f.fetchThreadFromGraphQL=c;f.fetchMessageFromGraphQL=d;var h=null,i=null,j=null,k={limit:b("MercuryThreadlistConstants").WEBMESSENGER_THREAD_COUNT+1,folder:"inbox",tags:["INBOX"],timestamp:null,filter:null,includeDeliveryReceipts:!1,includeSeqID:!0},l={};function a(a){return new(b("Promise"))(function(b,c){m(a,b,c,0)})}function m(a,c,d,e){if(!b("CurrentUser").isLoggedInNow()||e>b("MessagingConfig").syncFetchRetries){b("clearTimeout")(l[a]);d();return}var f=e===0?0:b("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(b("MessagingConfig").syncFetchTimeoutMultiplier,e);b("UserActivity").isOnTab()||(f+=b("MercuryConfig").DFFD*Math.random());b("clearTimeout")(l[a]);l[a]=b("setTimeoutAcrossTransitions")(function(){var f=!1,n=function(h){if(f)return;if(h.errors&&h.errors.length>0){var k=h.errors[0].message;if(k){var l=function(){j&&i||g(0,3650),new j().setErrorMessage(k).setEvent(i.DFF_FAILURE).setQueryParams(a).log()};j&&i?l():b("Bootloader").loadModules(["MessengerWebGraphQLTypedLogger","MessengerWebGraphQLEvent"],function(a,b){j=a,i=b,l()},"MercurySyncDataFetcherImpl")}}f=!0;m(a,c,d,e+1)},o=function(){if(!b("CurrentUser").isLoggedInNow())return;h||g(0,3651);h.fetchAll(a,[k],!b("FBIDCheck").isUser_deprecated(a),"dff").then(function(d){f=!0,c(new(b("AsyncResponse"))(null,babelHelpers["extends"]({},d,{payload_source:"server_invalidate_global_state"}))),b("clearTimeout")(l[a])},n)};h?o():b("Bootloader").loadModules(["MessengerGraphQLThreadlistFetcher.bs"],function(a){h=a,o()},"MercurySyncDataFetcherImpl")},f)}function c(a,c,d){return new(b("Promise"))(function(b,e){n(a,c,d,b,e,0)})}function n(a,c,d,e,f,g){if(g>b("MessagingConfig").syncFetchRetries){f();return}var h=g===0?0:b("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(b("MessagingConfig").syncFetchTimeoutMultiplier,g);b("setTimeoutAcrossTransitions")(function(){var h=!1,i=function(b){if(h)return;h=!0;n(a,c,d,e,f,g+1)};b("Bootloader").loadModules(["MessengerThreadDFFFetcher.bs"],function(f){return f.fetch_(a,{id:c,limit:d},!b("FBIDCheck").isUser_deprecated(a)).then(function(a){h=!0,e(new(b("AsyncResponse"))(null,babelHelpers["extends"]({},a,{payload_source:"server_invalidate_thread_state"})))},i)},"MercurySyncDataFetcherImpl")},h)}function d(a,c,d){return new(b("Promise"))(function(b,e){o(a,c,d,b,e,0)})}function o(a,c,d,e,f,g){if(g>b("MessagingConfig").syncFetchRetries){f();return}var h=g===0?0:b("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(b("MessagingConfig").syncFetchTimeoutMultiplier,g);b("setTimeoutAcrossTransitions")(function(){var h=!1,i=function(b){if(h)return;h=!0;o(a,c,d,e,f,g+1)};b("Bootloader").loadModules(["MessengerMessageDFFFetcher.bs"],function(f){return f.fetch_(a,{thread_id:c,message_id:d},!b("FBIDCheck").isUser_deprecated(a)).then(function(a){h=!0,e(new(b("AsyncResponse"))(null,babelHelpers["extends"]({},a)))},i)},"MercurySyncDataFetcherImpl")},h)}}),null);
__d("MercurySyncDataFetcher",["Promise","LogHistory","MercurySyncDataFetcherImpl","MessagingConfig","WebGraphQLConfig","clearTimeout","promiseDone","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";f.getMaxTimeoutMs=a;f.fetchThreadlistFromGraphQL=c;f.fetchThreadFromGraphQL=d;f.fetchMessageFromGraphQL=e;var g=b("LogHistory").getInstance("mercury_sync_data_fetcher");function a(){var a=0;for(var c=0;c<b("MessagingConfig").syncFetchRetries;c++){var d=c===0?0:b("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(b("MessagingConfig").syncFetchTimeoutMultiplier,c);a+=d+b("MessagingConfig").syncFetchRequestTimeoutMs}return a}var h=a();function c(a){var c=null;return new(b("Promise"))(function(d,e){var f=function(a){g.error("fetch_threadlist_graphql_timeout",JSON.stringify({timeout:h})),b("clearTimeout")(c),e(a)};c=b("setTimeoutAcrossTransitions")(f,Math.max(h,b("WebGraphQLConfig").timeout*b("MessagingConfig").syncFetchRetries));b("promiseDone")(b("MercurySyncDataFetcherImpl").fetchThreadlistFromGraphQL(a),function(a){b("clearTimeout")(c),d(a)},f)})}function d(a,c,d){return new(b("Promise"))(function(e,f){var i=function(a){g.error("fetch_thread_graphql_timeout",JSON.stringify({timeout:h})),f(a)},j=b("setTimeoutAcrossTransitions")(i,h);b("promiseDone")(b("MercurySyncDataFetcherImpl").fetchThreadFromGraphQL(a,c,d),function(a){b("clearTimeout")(j),e(a)},i)})}function e(a,c,d){return new(b("Promise"))(function(e,f){var i=function(a){g.error("fetch_message_graphql_timeout",JSON.stringify({timeout:h})),f(a)},j=b("setTimeoutAcrossTransitions")(i,h);b("promiseDone")(b("MercurySyncDataFetcherImpl").fetchMessageFromGraphQL(a,c,d),function(a){b("clearTimeout")(j),e(a)},i)})}}),null);
__d("MercurySyncDFFDataFetcher",["Promise","CurrentUser","MercurySingletonProvider","MercurySyncDataFetcher","MercuryThreadIDMap","MessengerState.bs"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a,this.__threadIDMap=b("MercuryThreadIDMap").getForFBID(this.$1)}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};var c=a.prototype;c.fetchInvalidateGlobalStateForGraphQL=function(){return this.$1&&this.$1!=="0"&&b("CurrentUser").isLoggedIn()?b("MercurySyncDataFetcher").fetchThreadlistFromGraphQL(this.$1):new(b("Promise"))(function(a,b){return b(!0)})};c.fetchInvalidateThreadState=function(a,c){var d=11,e=3;a=a||c;c=this.__threadIDMap.getClientIDFromServerIDNow(a);if(!c)return b("Promise").resolve({getPayload:function(){return{}}});e=e+b("MessengerState.bs").getCurrentlyLoadedMessages(this.$1,c).length;return!a?b("Promise").resolve({getPayload:function(){return{}}}):b("MercurySyncDataFetcher").fetchThreadFromGraphQL(this.$1,a,Math.max(e,d))};c.fetchInvalidateMessage=function(a,c,d){a=a||c;return!a?b("Promise").resolve({getPayload:function(){return{}}}):b("MercurySyncDataFetcher").fetchMessageFromGraphQL(this.$1,a,d)};return a}();e.exports=a;var g=new(b("MercurySingletonProvider"))(a)}),null);
__d("MercurySyncTopicType",[],(function(a,b,c,d,e,f){a=Object.freeze({DELTA:"delta",DELTAFLOW:"deltaflow",DELTAFLOWREJECT:"deltaflowreject"});e.exports=a}),null);
__d("onAfterLoadSafe",["Run","TimeSlice","requestIdleCallback"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){return b("TimeSlice").guard(function(){return b("Run").onAfterLoad(function(){b("requestIdleCallback")(a)})},"delayed after load",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()}}),null);
__d("MercurySyncDeltaHandler",["invariant","Arbiter","Bootloader","ChatReliabilityInstrumentation","CurrentUser","LogHistory","MercuryDelayedDispatcher","MercuryMessagingLightswitch","MercuryServerPayloadPreprocessor","MercurySingletonProvider","MercurySyncConstants","MercurySyncDeltaHolder","MercurySyncDeltaTypes","MercurySyncEventsProxy","MercurySyncForcedFetchHandler","MercurySyncHolesTypedLogger","MercurySyncTopicType","MercuryThreadIDMap","MessengerDeltaTransformer.bs","gkx","onAfterLoadSafe","performanceAbsoluteNow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("LogHistory").getInstance("mercury_sync_delta_handler"),j="app_id:219994525426954";a=function(){a.getForFBID=function(a){return k.getForFBID(a)};a.get=function(){return k.get()};function a(a){var c=this;this.$1=a;this.$2=b("MercurySyncForcedFetchHandler").getForFBID(this.$1);this.__payloadPreprocessor=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1);this.__delayedDispatcher=b("MercuryDelayedDispatcher").getForFBID(this.$1);this.$3=b("MercurySyncDeltaHolder").getForFBID(this.$1);this.$4=0;this.$11=b("MercuryThreadIDMap").getForFBID(this.$1);this.$5=[];this.$10=b("MercurySyncEventsProxy").getForFBID(this.$1);b("MercuryMessagingLightswitch").guard(function(){i.debug("constructor",JSON.stringify({fbid:c.$1}))});b("Arbiter").subscribe(b("MercurySyncEventsProxy").Events.INIT,function(d,e){b("MercuryMessagingLightswitch").guard(function(){i.debug("initSeqID",JSON.stringify(e))});d=e&&e.seqID;var a=e&&e.fbid;if(!a)return;if(a!==c.$1)return;d?c.$3.updateLastSeqID(d):c.$3.updateLastSeqID(0);c.$12();b("gkx")("678667")&&b("onAfterLoadSafe")(function(){b("Bootloader").loadModules(["MessengerSyncSeqIDSanityCheck"],function(a){a.getForFBID(c.$1).init()},"MercurySyncDeltaHandler")})})}var c=a.prototype;c.$12=function(){var a=this;b("MercuryMessagingLightswitch").guard(function(){i.debug("setUpSubscriptionsToRealTimeUpdates",JSON.stringify({fbid:a.$1}))});this.$6=b("Arbiter").subscribe(this.$10.getArbiterType(b("MercurySyncEventsProxy").Events.DELTA),function(c,d){c=d&&d.obj&&d.obj.queue;if(c&&c.toString()!==a.$1)return;c=d&&d.obj&&d.obj.delta;d=d&&d.obj&&d.obj.iseq;if(!c||!d)return;a.$13(d,b("MercurySyncTopicType").DELTA);a.$14(d,c);a.$3.push(d,c);a.$15()});this.$8=b("Arbiter").subscribe(this.$10.getArbiterType(b("MercurySyncEventsProxy").Events.FLOW_REJECT),function(b,c){b=c&&c.obj&&c.obj.queue;if(b&&b.toString()!==a.$1)return;a.$9&&a.$16()});this.$7=b("Arbiter").subscribe(this.$10.getArbiterType(b("MercurySyncEventsProxy").Events.FAKE_DFF),function(b,c){b=c&&c.obj&&c.obj.queue;if(b&&b.toString()!==a.$1)return;b=c&&c.obj&&c.obj.delta;if(!b)return;if(a.$17(b))if(a.$5.some(function(b){return a.$17(b)}))return;else a.$5.push(b);else a.$5.push(b);a.$15()});this.$9=!0};c.$17=function(a){return a["class"]===b("MercurySyncDeltaTypes").ForcedFetch&&!a.threadKey&&!a.messageId};c.$15=function(){if(this.$4>0)return;if(this.$5.length>0){var a=this.$5.shift();this.$18(this.$3.getLastSeqID(),a);this.$15()}a=this.$3.peek();if(!a)return;a=a-this.$3.getLastSeqID();if(a===1){var b=this.$3.pop();if(!b)return;var c=b.seqID;b=b.delta;this.$18(c,b);this.$15()}else a>1?this.$19():(this.$3.pop(),this.$15())};c.$18=function(a,c){c.numNoOps&&c.numNoOps>1?this.$3.updateLastSeqID(a+c.numNoOps-1):this.$3.updateLastSeqID(a),c["class"]===b("MercurySyncDeltaTypes").ForcedFetch?(b("MercuryMessagingLightswitch").guard(function(){i.debug("DFF",JSON.stringify(c))}),c.threadKey!==void 0&&c.messageId===void 0?this.$20(a,c):c.threadKey!==void 0&&c.messageId!==void 0?this.$21(a,c):(b("ChatReliabilityInstrumentation").logDFF_DELTA_INIT(JSON.stringify(c)),this.$22(a))):b("MessengerDeltaTransformer.bs").transform(this.$1,c)};c.$19=function(){var a=JSON.stringify({$23:this.$3.getLastSeqID(),nextSeqID:this.$3.peek()});b("MercuryMessagingLightswitch").guard(function(){i.warn("hole",a)});var c=this.$3.peek();!c&&g(0,5132);c=c-1;b("ChatReliabilityInstrumentation").logDFF_HOLE_INIT(a);this.$22(c)};c.$24=function(a,c,d,e){var f=this;this.$4&&g(0,5134);this.$4++;b("MercuryMessagingLightswitch").guard(function(){i.debug("_scheduleDataFetch:start",JSON.stringify({seqID:a}))});b("promiseDone")(c(),function(c){b("MercuryMessagingLightswitch").guard(function(){i.debug("_scheduleDataFetch:success",JSON.stringify({seqID:a}))}),f.$4--,d(a,c),f.$15()},function(c){b("MercuryMessagingLightswitch").guard(function(){i.error("_scheduleDataFetch:failure",JSON.stringify({seqID:a}))}),f.$4--,e(a,c),f.$15()})};c.emergencyDFF=function(a,b){this.$22(0,a,b)};c.$22=function(a,c,d){var e=this;if(!b("CurrentUser").isLoggedInNow())return;this.$24(void 0,function(){return e.$2.processGlobalDFFForGraphQL()},function(a,d){b("gkx")("1199098")&&e.$11.reset();var f=d.getPayload();e.__payloadPreprocessor.handleUpdate(f);f.sequence_id&&(b("MercuryMessagingLightswitch").guard(function(){i.debug("_initiateGlobalDFF:success",JSON.stringify({seqID:f.sequence_id}))}),b("gkx")("678668")?e.$3.updateLastSeqIDAndClearHistory(f.sequence_id):e.$3.updateLastSeqID(f.sequence_id));b("Arbiter").inform(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RECOVER);c&&c(f.sequence_id)},function(f,g){b("MercuryMessagingLightswitch").guard(function(){i.error("_initiateGlobalDFF:failure","")}),g?(e.$9&&e.$16(),d&&d()):(b("Arbiter").inform(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RETRY),b("MercuryMessagingLightswitch").guard(function(){i.debug("_initiateGlobalDFF:retry","")}),e.$22(a,c,d))})};c.$20=function(a,c){var d=this;this.$24(a,function(){return d.$2.processThreadDFF(a,c.threadKey,c.isLazy)},function(a,b){d.__payloadPreprocessor.handleUpdate(b.getPayload()),d.$3.updateLastSeqID(a)},function(){b("MercuryMessagingLightswitch").guard(function(){i.error("_initiateThreadDFF:failure",JSON.stringify(c))});var e=babelHelpers["extends"]({},c);delete e.threadKey;d.$3.updateLastSeqID(a-1);d.$3.push(a,e)})};c.$21=function(a,c){var d=this;this.$24(a,function(){return d.$2.processMessageDFF(a,c.threadKey,c.messageId,c.isLazy)},function(a,b){b=b.getPayload();var c=b.other_user_fbid?b.other_user_fbid:b.thread_fbid;b=[babelHelpers["extends"]({},b)];var e="client_channel_message";d.__delayedDispatcher.handleUpdateWaitForThread({actions:b,payload_source:e},c);d.$3.updateLastSeqID(a)},function(){b("MercuryMessagingLightswitch").guard(function(){i.error("_initiateMessageDFF:failure",JSON.stringify(c))});var e=babelHelpers["extends"]({},c);delete e.messageId;d.$3.updateLastSeqID(a-1);d.$3.push(a,e)})};c.$13=function(a,c){var d=a-this.$3.getLastSeqID();if(d!==1&&d!==0){if(!b("CurrentUser").isEmployee())return;new(b("MercurySyncHolesTypedLogger"))().setSeqID(a).setDifference(d).setTopicType(c).log()}};c.$14=function(a,c){switch(c["class"]){case b("MercurySyncDeltaTypes").NewMessage:var d=(h||(h=b("performanceAbsoluteNow")))();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(a,e){var f=c.messageMetadata.tags;Array.isArray(f)&&f.includes(j)&&b("MercuryMessagingLightswitch").guard(function(){a.markerEnd(e.SEND_MESSAGE,"SUCCESS",c.messageMetadata.offlineThreadingId,d)})},"MercurySyncDeltaHandler");b("MercuryMessagingLightswitch").guard(function(){i.debug("message_delta",JSON.stringify({seqID:a,threadKey:c.messageMetadata.threadKey,messageId:c.messageMetadata.messageId}))});break;case b("MercurySyncDeltaTypes").ReadReceipt:b("MercuryMessagingLightswitch").guard(function(){i.debug("read_receipt_delta",JSON.stringify({seqID:a,threadKey:c.threadKey,actionTimestampMs:c.actionTimestampMs,watermarkTimestampMs:c.watermarkTimestampMs}))});break;case b("MercurySyncDeltaTypes").DeliveryReceipt:b("MercuryMessagingLightswitch").guard(function(){i.debug("delivery_receipt_delta",JSON.stringify({seqID:a,deliveredWatermarkTimestampMs:c.deliveredWatermarkTimestampMs,messageIds:c.messageIds}))});break}};c.pause=function(){this.$4++};c.resume=function(){this.$4--,this.$15()};c.$16=function(a){a===void 0&&(a=!1),this.$9=!1,b("Arbiter").unsubscribe(this.$6),b("Arbiter").unsubscribe(this.$7),b("Arbiter").unsubscribe(this.$8),a||b("Arbiter").inform(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE)};return a}();e.exports=a;var k=new(b("MercurySingletonProvider"))(a)}),null);
__d("MercurySyncForcedFetchHandler",["Promise","MercurySingletonProvider","MercurySyncDFFDataFetcher","MercuryThreadIDMap","MessengerState.bs"],(function(a,b,c,d,e,f){"use strict";function g(a){return{getPayload:function(){return{sequence_id:a}}}}a=function(){a.getForFBID=function(a){return h.getForFBID(a)};a.get=function(){return h.get()};function a(a){this.$1=a,this.$2=b("MercuryThreadIDMap").getForFBID(this.$1),this.$3=b("MercurySyncDFFDataFetcher").getForFBID(this.$1)}var c=a.prototype;c.processMessageDFF=function(a,c,d,e){if(e){e=c.otherUserFbId!==void 0?c.otherUserFbId.toString():c.threadFbId.toString();e=this.$2.getClientIDFromServerIDNow(e);if(e===void 0)return b("Promise").resolve(g(a));e=b("MessengerState.bs").getMessagesFromIDs(this.$1,[d]);if(e.length===0)return b("Promise").resolve(g(a))}return this.$3.fetchInvalidateMessage(c.otherUserFbId,c.threadFbId,d)};c.processThreadDFF=function(a,c,d){if(d){d=c.otherUserFbId!==void 0?c.otherUserFbId.toString():c.threadFbId.toString();d=this.$2.getClientIDFromServerIDNow(d);if(d===void 0)return b("Promise").resolve(g(a))}return this.$3.fetchInvalidateThreadState(c.otherUserFbId,c.threadFbId)};c.processGlobalDFFForGraphQL=function(){return this.$3.fetchInvalidateGlobalStateForGraphQL()};return a}();e.exports=a;var h=new(b("MercurySingletonProvider"))(a)}),null);
__d("MontageDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("ExplicitRegistrationDispatcher"));c=new a({strict:!1});e.exports=c}),null);
__d("MontageActions",["Bootloader","CurrentUser","MercuryServerPayloadPreprocessor","MontageDispatcher","WebGraphQL","keyMirror","promiseDone","uniqueID"],(function(a,b,c,d,e,f){"use strict";f.requestUpdate=a;f.montageThreadChanged=c;f.hasUpdated=d;f.loadMontageThreadForActor=e;f.deleteMontage=i;f.handleNewMontageDelta=j;f.updatePollStickerChoice=k;var g=b("keyMirror")({REQUEST_UPDATE:null,HAS_UPDATED:null,HANDLE_ACTION:null});f.Types=g;var h=new Set();function a(a){b("MontageDispatcher").dispatch({type:g.REQUEST_UPDATE,threadFBID:a})}function c(a,c){b("MontageDispatcher").dispatch({type:g.REQUEST_UPDATE,threadFBID:a})}function d(a){b("MontageDispatcher").dispatch({type:g.HAS_UPDATED,threadFBID:a})}function e(a){if(h.has(a))return;h.add(a);b("Bootloader").loadModules(["MessengerMontageThreadQueryWebGraphQLQuery"],function(c){c=b("WebGraphQL").exec(new c({id:a}));b("promiseDone")(c,function(c){b("MercuryServerPayloadPreprocessor").getForFBID(b("CurrentUser").getID()).handleUpdate({current_montage_thread:c}),h["delete"](a)})},"MontageActions")}function i(a,c){b("MercuryServerPayloadPreprocessor").getForFBID(b("CurrentUser").getID()).handleUpdate({montage_delete_message_delta:c})}function j(a,c){b("Bootloader").loadModules(["MessengerNewMontageMessageWebGraphQLQuery"],function(a){a=b("WebGraphQL").exec(new a({id:c.message_fbid}));b("promiseDone")(a,function(a){b("MercuryServerPayloadPreprocessor").getForFBID(b("CurrentUser").getID()).handleUpdate({montage_new_message_delta:a.montage_message})})},"MontageActions")}function k(a){b("Bootloader").loadModules(["MessengerState.bs","MessengerMontagePollVoteMutationWebGraphQLMutation"],function(c,d){b("MercuryServerPayloadPreprocessor").getForFBID(b("CurrentUser").getID()).handleUpdate({montage_poll_sticker_vote:[a]});c=b("WebGraphQL").exec(new d({input:{client_mutation_id:b("uniqueID")(),story_card_poll_id:a.pollID,option:a.optionVotedIndex,actor_id:b("CurrentUser").getID()}}));b("promiseDone")(c,function(a){},function(a){})},"MontageActions")}}),null);
__d("RemovedMessageTombstoneContent",["fbt","CurrentUser","GenderConst","IntlVariations","MercuryIDs","MessengerParticipants.bs","MessengerState.bs","gkx","immutable"],(function(a,b,c,d,e,f,g){"use strict";f.getRemovedMessageTombstoneContent=a;f.getTombstoneContentForSnippet=c;f._getFbtForCurrentViewerAuthor=d;f._getFbtForOtherAuthor=e;f._getFbtForUnknownAuthor=h;function a(a,c){var d;d=((d=a.unsender)==null?void 0:d.id)||a.author;var e=b("MercuryIDs").getUserIDFromParticipantID(d),f=b("CurrentUser").getID();if(e===f)return this._getFbtForCurrentViewerAuthor();f=b("MessengerState.bs").getThreadMetaNow(f,a.thread_id);f=f==null?void 0:(f=f.custom_nickname)==null?void 0:f[e];f=f||((e=c.get(d))==null?void 0:e.short_name)||((f=a.unsender)==null?void 0:f.short_name)||((e=a.unsender)==null?void 0:e.name);e=(a=c.get(d))==null?void 0:a.gender;if(f)return this._getFbtForOtherAuthor(f,e);else return this._getFbtForUnknownAuthor()}function c(a){if(a==null)return this._getFbtForUnknownAuthor().toString();var c=b("MercuryIDs").getUserIDFromParticipantID(a);if(c===b("CurrentUser").getID())return this._getFbtForCurrentViewerAuthor().toString();c=b("MessengerParticipants.bs").getNow(a);a=c&&c.short_name;c=c&&c.gender;if(a)return this._getFbtForOtherAuthor(a,c).toString();else return this._getFbtForUnknownAuthor().toString()}function d(){return b("gkx")("1531920")?g._("B\u1ea1n \u0111\u00e3 thu h\u1ed3i m\u1ed9t tin nh\u1eafn"):g._("B\u1ea1n \u0111\u00e3 g\u1ee1 m\u1ed9t tin nh\u1eafn")}function e(a,c){return b("gkx")("1531920")?g._({"*":"{name} \u0111\u00e3 thu h\u1ed3i m\u1ed9t tin nh\u1eafn"},[g._param("name",a,[1,c===b("GenderConst").FEMALE_SINGULAR?b("IntlVariations").GENDER_FEMALE:b("IntlVariations").GENDER_MALE])]):g._({"*":"{name} \u0111\u00e3 g\u1ee1 m\u1ed9t tin nh\u1eafn"},[g._param("name",a,[1,c===b("GenderConst").FEMALE_SINGULAR?b("IntlVariations").GENDER_FEMALE:b("IntlVariations").GENDER_MALE])])}function h(){return b("gkx")("1531920")?g._("M\u1ed9t ng\u01b0\u1eddi li\u00ean h\u1ec7 \u0111\u00e3 thu h\u1ed3i tin nh\u1eafn"):g._("Ng\u01b0\u1eddi li\u00ean h\u1ec7 \u0111\u00e3 g\u1ee1 m\u1ed9t tin nh\u1eafn")}}),null);
__d("CometRouteActorToasterQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"scale"}],b={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},d={alias:"toast_icon",args:[{kind:"Literal",name:"height",value:32},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:32}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometRouteActorToasterQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[b,c,d],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometRouteActorToasterQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[b,c,d,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:"3249375815143859",metadata:{},name:"CometRouteActorToasterQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometBatchNotificationsStateChangeSubscription.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"environment"},b={defaultValue:null,kind:"LocalArgument",name:"input"},c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"BatchNotificationStateChangeSubscribeResponsePayload",kind:"LinkedField",name:"batch_notification_state_change_subscribe",plural:!1,selections:[{alias:null,args:null,concreteType:"Notification",kind:"LinkedField",name:"aggregated_notifications",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seen_state",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"environment",variableName:"environment"}],kind:"ScalarField",name:"notifications_unseen_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"last_update_timestamp",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[a,b],kind:"Fragment",metadata:null,name:"CometBatchNotificationsStateChangeSubscription",selections:c,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[b,a],kind:"Operation",name:"CometBatchNotificationsStateChangeSubscription",selections:c},params:{id:"3434598286567017",metadata:{subscriptionName:"batch_notification_state_change_subscribe"},name:"CometBatchNotificationsStateChangeSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("CometNotificationsStateChangeSubscription.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"environment"},b={defaultValue:null,kind:"LocalArgument",name:"input"},c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"NotificationStateChangeSubscribeResponsePayload",kind:"LinkedField",name:"notification_state_change_subscribe",plural:!1,selections:[{alias:null,args:null,concreteType:"Notification",kind:"LinkedField",name:"notification",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seen_state",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"environment",variableName:"environment"}],kind:"ScalarField",name:"notifications_unseen_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"last_update_timestamp",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[a,b],kind:"Fragment",metadata:null,name:"CometNotificationsStateChangeSubscription",selections:c,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[b,a],kind:"Operation",name:"CometNotificationsStateChangeSubscription",selections:c},params:{id:"2889547877749972",metadata:{subscriptionName:"notification_state_change_subscribe"},name:"CometNotificationsStateChangeSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("MWChatMarkAllAsSeenMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"ViewerMessagesMarkAllSeenResponsePayload",kind:"LinkedField",name:"viewer_messages_mark_all_seen",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatMarkAllAsSeenMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatMarkAllAsSeenMutation",selections:b},params:{id:"2781738478526229",metadata:{},name:"MWChatMarkAllAsSeenMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("CometOnBeforeUnloadDialog.react",["fbt","CometCardedDialog.react","CometTrackingNodeProvider.react","React","TetraButtonGroup.react","TetraText.react","stylex"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React");function a(a){var c=a.body,d=a.cancel,e=a.confirm,f=a.disabled;f=f===void 0?!1:f;var i=a.onClose,j=a.onCloseButtonPress,k=a.primaryAction,l=a.secondaryAction;a=a.title;var m=function(){k(),i()},n=function(){l(),i()};return h.jsx(b("CometTrackingNodeProvider.react"),{trackingNode:163,children:h.jsxs(b("CometCardedDialog.react"),{onClose:function(){j(),i()},testid:void 0,title:a,titleHorizontalAlignment:"start",withCloseButton:!0,children:[h.jsx("div",{className:"l9j0dhe7 dati1w0a f10w8fjw hv4rvrfc pybr56ya",children:h.jsx(b("TetraText.react"),{type:"body3",children:c})}),h.jsx("div",{className:"a8nywdso ihqw7lf3 rz4wbd8a jb3vyjys bkfpd7mw btwxx1t3 j83agx80",children:h.jsx(b("TetraButtonGroup.react"),{direction:"backward",paddingHorizontal:16,primary:{disabled:f,label:(a=e)!=null?a:g._("X\u00e1c nh\u1eadn"),onPress:m,testid:"CometOnBeforeUnloadDialogConfirmButton"},secondary:{disabled:f,label:(c=d)!=null?c:g._("H\u1ee7y"),onPress:n,reduceEmphasis:!0,testid:"CometOnBeforeUnloadDialogCancelButton"}})})]})})}}),null);
__d("CometRouteActorToaster.react",["fbt","Actor","CometRelay","CometRouteActorToasterBlocklist","React","TetraProfilePhoto.react","TetraText.react","WebPixelRatio","cometPushToast","getTopMostRoute","promiseDone","useCometRouterState","useCurrentRoute","useRouteReferrer","CometRouteActorToasterQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i=b("React");function j(a,c){if(c)return i.jsx(b("TetraText.react"),{color:"primary",type:"body3",children:g._("B\u1ea1n \u0111ang t\u01b0\u01a1ng t\u00e1c b\u1eb1ng {=your profile}",[g._param("=your profile",i.jsx(b("TetraText.react"),{type:"bodyLink3",children:g._("trang c\u00e1 nh\u00e2n c\u1ee7a m\u00ecnh")}))])});else return i.jsx(b("TetraText.react"),{color:"primary",type:"body3",children:g._("B\u1ea1n \u0111ang t\u01b0\u01a1ng t\u00e1c b\u1eb1ng {actor}",[g._param("actor",i.jsx(b("TetraText.react"),{type:"bodyLink3",children:a}))])})}var k=h!==void 0?h:h=b("CometRouteActorToasterQuery.graphql");function a(){var a,c=b("CometRelay").useRelayEnvironment(),d=b("Actor").useActor(),e=d[0],f=i.useRef(null);d=b("useCometRouterState")();var g=b("useCurrentRoute")(),h=(a=b("useRouteReferrer")())==null?void 0:a.actorID;a=b("CometRouteActorToasterBlocklist").route_trace_policies;a=a.includes(g==null?void 0:g.tracePolicy);d=d!=null?b("getTopMostRoute")(d):null;g=g===d;var l=g&&!a;i.useEffect(function(){var a;a=(a=f.current)!=null?a:h;if(a!=null&&a!==e&&l){a=function(a){var c;c=a==null?void 0:(c=a.viewer)==null?void 0:(c=c.actor)==null?void 0:c.name;if(c!=null){var d;d=(a==null?void 0:(d=a.viewer)==null?void 0:(d=d.actor)==null?void 0:d.__typename)==="User";a=a==null?void 0:(a=a.viewer)==null?void 0:(a=a.actor)==null?void 0:(a=a.toast_icon)==null?void 0:a.uri;a=a!=null?i.jsx(b("TetraProfilePhoto.react"),{shape:"circle",size:32,source:{uri:a}}):null;c=j(c,d);b("cometPushToast").cometPushToast({icon:a,message:c})}};var d={scale:b("WebPixelRatio").get()};b("promiseDone")(b("CometRelay").fetchQuery(c,k,d).toPromise(),a)}f.current=e},[e,c,h,l]);return null}}),null);
__d("CometBlueBridgeContext",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React");c=a.createContext(!1);e.exports=c}),null);
__d("convertToCometQuicklingURI",["ConstUriUtils","Env","URI","persistentQueryParams"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h;c=new(g||b("URI"))(String(document.location));var i=c.getOrigin();d=c.getQueryData();var j=Object.entries(d).reduce(function(a,c){var d=c[0];c=c[1];if(d==="sk")return a;b("persistentQueryParams").find(function(a){return a===d})&&(a[d]=c);return a},{});function k(a,c,d){var e=a.indexOf("?")!==-1?"&":"?";e=""+a+e+"cquick="+c+"&ctarget="+i+"&cquick_token="+((a=(h||(h=b("Env"))).compat_iframe_token)!=null?a:"");d&&(e+="&noCoBLog=true");return e}function a(a,c,d){var e;d===void 0&&(d=!1);var f=b("ConstUriUtils").getUri(a);if(f==null)return k(a,c,d);e=new Map([].concat(Object.entries({cquick:c,cquick_token:(e=(h||(h=b("Env"))).compat_iframe_token)!=null?e:"",ctarget:i}),Object.entries(j)));d&&e.set("noCoBLog","true");f=f.addQueryParams(e);return f==null?k(a,c,d):f.toString()}}),null);
__d("getCompatIframeOrigin",["ConstUriUtils","FBLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){var c=document.location.origin,d=b("ConstUriUtils").getUri(c);if(d==null){b("FBLogger")("comet_infra").mustfix("Failed to parse the origin `%s`",c);return c}c=d.getSubdomain();if(c==="comet"||c==="www"){c=d.setSubDomain(a);if(c!=null)return c.toString().slice(0,-1)}return d.toString().slice(0,-1)}}),null);
__d("getMessageEventString",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,b){a=a.data;if(typeof a==="object"){a=a==null?void 0:a[b];if(typeof a==="string")return a}return""}}),null);
__d("CometCompatBroker",["BaseEventEmitter","CometAltpayJsSdkIframeAllowedDomains","ConstUriUtils","FBLogger","JSScheduler","convertToCometQuicklingURI","getCompatIframeOrigin","getMessageEventString"],(function(a,b,c,d,e,f){"use strict";function g(a){var c=b("ConstUriUtils").getUri(a);if(c==null){b("FBLogger")("comet_infra").mustfix("Failed to parse the origin `%s`",a);return!1}a=["apps","secure","www"].some(function(a){a=b("ConstUriUtils").getUri(b("getCompatIframeOrigin")(a));return a==null?!1:c.isSameOrigin(a)});if(a)return!0;a=b("ConstUriUtils").getUri(document.location.origin.replace(/facebook\.com/i,"messenger.com"));return a?c.isSameOrigin(a):!1}function h(a){var c=b("ConstUriUtils").getUri(a);if(c==null){b("FBLogger")("comet_infra").mustfix("Failed to parse the origin `%s`",a);return!1}a=b("CometAltpayJsSdkIframeAllowedDomains").allowed_domains;if(a==null||a.length<=0)return!1;a=a.some(function(a){a=b("ConstUriUtils").getUri(a);return a==null?!1:c.isSameOrigin(a)});return a?!0:!1}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$CometCompatBroker1=null,d.$CometCompatBroker2="",d.$CometCompatBroker3=!1,d.$CometCompatBroker4=null,d.$CometCompatBroker5=!1,d.$CometCompatBroker6=function(a){b("JSScheduler").scheduleNormalPriCallback(function(){var c=b("getMessageEventString")(a,"compatAction");if(c!==""){d.emit(c,a);return}b("FBLogger")("compat").mustfix("Invalid MessageEvent payload received")})},d.cleanup=function(){window.removeEventListener("message",d.$CometCompatBroker4),d.$CometCompatBroker3=!1},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.init=function(a,b,c){var d=this;c===void 0&&(c=!1);this.$CometCompatBroker2=b;this.$CometCompatBroker5=c;this.$CometCompatBroker4=function(b){d.setupMessageChannel(b,a)};this.$CometCompatBroker3||(window.addEventListener("message",this.$CometCompatBroker4),this.$CometCompatBroker3=!0)};d.sendChildFrameMessage=function(a){this.$CometCompatBroker1&&this.$CometCompatBroker1.postMessage(babelHelpers["extends"]({},a))};d.sendChildFrameParams=function(a){this.sendChildFrameMessage(babelHelpers["extends"]({},a,{uri:b("convertToCometQuicklingURI")(a.uri,this.$CometCompatBroker2)}))};d.setupMessageChannel=function(a,c){var d=b("getMessageEventString")(a,"compatAction"),e=b("getMessageEventString")(a,"iframeKey");(this.$CometCompatBroker5&&h(a.origin)||g(a.origin))&&d==="CompatSetup"&&e===this.$CometCompatBroker2&&(this.$CometCompatBroker1&&this.$CometCompatBroker1.close(),a.ports!=null&&Array.isArray(a.ports)&&(this.$CometCompatBroker1=a.ports[0],this.$CometCompatBroker1.onmessage=this.$CometCompatBroker6,c()))};return c}(b("BaseEventEmitter"));e.exports=a}),null);
__d("MWChatMarkAllAsSeenMutation",["CometRelay","relay-runtime","MWChatMarkAllAsSeenMutation.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g!==void 0?g:g=b("MWChatMarkAllAsSeenMutation.graphql");function i(a){a=a.get(b("relay-runtime").VIEWER_ID);if(a==null)return;a=a.getLinkedRecord("message_threads");if(a==null)return;var c=a.getValue("unseen_count");if(typeof c!=="number")return;a.setValue(0,"unseen_count")}function a(a,c,d,e){return b("CometRelay").commitMutation(a,{mutation:h,onCompleted:d,onError:e,optimisticUpdater:function(a){i(a)},updater:function(a){i(a)},variables:c})}}),null);
__d("convertDomainToApps",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,b){if(b.startsWith("/apps")){b=a.replace(/www/i,"apps");if(b!=null)return b}return a}}),null);
__d("stripAppsFromPath",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){return a.startsWith("/apps")?a.slice(5):a}}),null);
__d("getCompatIframeSource",["ConstUriUtils","convertDomainToApps","convertToCometQuicklingURI","getCompatIframeOrigin","stripAppsFromPath"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,c,d){d===void 0&&(d=!1);var e=b("ConstUriUtils").getUri(a);e=(e=e!=null?(e=e.getUnqualifiedUri())==null?void 0:e.toString():a)!=null?e:a;a=b("convertDomainToApps")(b("getCompatIframeOrigin")("www"),e);a=a;e=b("stripAppsFromPath")(e);e=e;return""+a+b("convertToCometQuicklingURI")(e,c,d)}}),null);
__d("LogCometCanvasAppTimeSpentFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1743833");c=b("FalcoLoggerInternal").create("log_comet_canvas_app_time_spent",a);e.exports=c}),null);
__d("useCompatCanvasAppListener",["LogCometCanvasAppTimeSpentFalcoEvent","React","WebSession"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a,c){var d=c.priority;g.useEffect(function(){a.addListener("log_canvas_app_time_spent",function(a){a=a.data;var c={appID:""+a.appID,endTime:a.currentTime,startTime:a.lastOpenTime,webSessionId:b("WebSession").getId()};d==="HIGH"?b("LogCometCanvasAppTimeSpentFalcoEvent").logImmediately(function(){return c}):b("LogCometCanvasAppTimeSpentFalcoEvent").log(function(){return c})});return function(){a.removeAllListeners("log_canvas_app_time_spent")}},[d,a])}}),null);
__d("getMessageEventBoolean",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,b){a=a.data;if(typeof a==="object"){a=a==null?void 0:a[b];if(typeof a==="boolean")return a}return!1}}),null);
__d("useCompatChatTabListener",["FBLogger","React","getMessageEventBoolean","getMessageEventString","useMWChatOpenTabForPage","useMWChatOpenTabForUser"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=b("useMWChatOpenTabForUser")("compat"),d=c[0];c[1];var e=b("useMWChatOpenTabForPage")("compat");g.useEffect(function(){a.addListener("startchat",function(a){var c=b("getMessageEventString")(a,"tabId");a=b("getMessageEventBoolean")(a,"isPage");c!==""?a?e(c):d(c):b("FBLogger")("CometMessenger").mustfix("No id in useCompatChatTabListener")});return function(){return a.removeAllListeners("startchat")}},[a,d,e])}}),null);
__d("useCompatClickEventDispatcher",["useLayoutEffect_SAFE_FOR_SSR"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){b("useLayoutEffect_SAFE_FOR_SSR")(function(){var b=a.current;if(b==null)return;var c,d=function(){c&&c();try{var a,d=(a=b.contentDocument)!=null?a:b.contentWindow.document,e=function(a){var c;a=document.createEvent("HTMLEvents");a.initEvent("click",!0,!1);(c=b.parentElement)==null?void 0:c.dispatchEvent(a)};d.addEventListener("click",e,{capture:!0});c=function(){d.removeEventListener("click",e,{capture:!0})}}catch(a){}};b.addEventListener("load",d);return function(){b.removeEventListener("load",d),c&&c()}},[a])}}),null);
__d("useCompatDarkModeListener",["React","useIsDarkMode"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=b("useIsDarkMode")();g.useEffect(function(){a&&a.sendChildFrameMessage({compatAction:"dark-mode",enabled:String(c)})},[a,c])}}),null);
__d("useCompatDocumentFocusChange",["React","clearInterval","recoverableViolation","setInterval","useCurrentRoute"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=b("useCurrentRoute")(),d=g.useRef(null);g.useEffect(function(){var c=null,e=a.addListener("subscribe_document_focus_change",function(){if(c!=null){b("recoverableViolation")("Received multiple subscribe_document_focus_change messages from the page","comet_infra");return}function e(){var b=document.hasFocus();d.current!==b&&(d.current=b,a.sendChildFrameMessage({compatAction:"document_focus_change",focused:String(document.hasFocus())}))}c=b("setInterval")(e,1e3)});return function(){e.remove(),c!=null&&b("clearInterval")(c)}},[a,c])}}),null);
__d("useCompatReloadListener",["React","useCometRouterDispatcher","useCurrentRoute"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a,c){var d=b("useCometRouterDispatcher")(),e=c.forceSelf,f=b("useCurrentRoute")();g.useEffect(function(){a.addListener("reload",function(a){a=e?{target:"self"}:{};f&&(d&&d.goTo(f,a))});return function(){return a.removeAllListeners("reload")}},[d,a,e,f])}}),null);
__d("useCompatRouteListener",["ConstUriUtils","HiddenSubtreePassiveContext","React","URI","getMessageEventBoolean","getMessageEventString","gkx","goForceFullPageRedirectTo","useCometRouterDispatcher","useCurrentRoute"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a,c){var d=b("useCometRouterDispatcher")(),e=c.forceSelf,f=c.noMaintain,i=h.useContext(b("HiddenSubtreePassiveContext")),j=b("useCurrentRoute")();h.useEffect(function(){d&&a.addListener("route",function(a){if(i.getCurrentState().hidden)return;var c=b("getMessageEventBoolean")(a,"fullPageReload"),h=new(g||(g=b("URI")))(b("getMessageEventString")(a,"uri")).removeQueryData(["cquick","ctarget","cquick_token"]);if(!h.isSameOrigin()||c){b("goForceFullPageRedirectTo")(h.toString());return}c=h.getUnqualifiedURI();h=c.toString();var k=b("getMessageEventString")(a,"maintainKey");a=b("getMessageEventBoolean")(a,"replace");if(!Boolean(k)||f){k=e?{replace:a,target:"self"}:{replace:a};d.go(h,k)}else{k={replace:a,target:"self"};if(j){a=b("ConstUriUtils").getUri(j.url);c=c.getPath().startsWith("/messages")?"messenger":b("gkx")("1224637")&&c.getPath().startsWith("/settings")&&(a==null?void 0:a.getPath().startsWith("/settings"))?j.tabKey:void 0;a=babelHelpers["extends"]({},j,{tabKey:c,url:h});d.goTo(a,k)}else d.go(h,k)}});return function(){return a.removeAllListeners("route")}},[d,a,e,i,f,j])}}),null);
__d("useCompatTimeSpentBitArrayListener",["CometTimeSpentBitArrayLogger","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){g.useEffect(function(){a.addListener("update_time_spent_bit_array_from_boc",function(a){a=a.data;b("CometTimeSpentBitArrayLogger").updateTimeSpentArray(a.eventTimeInMs)});return function(){a.removeAllListeners("update_time_spent_bit_array_from_boc")}},[a])}}),null);
__d("CometFullPageCompatRoot.react",["CometBlueBridgeContext","CometCompatBroker","CometDarkModeContext","CometDOMOnlyBoundary.react","CometHeroHoldTrigger.react","CometOnRefresh.react","CometRelay","CometRouteRenderType","CometRouteURL","CurrentUser","FBLogger","InteractionTracingMetrics","MWChatMarkAllAsSeenMutation","React","clearTimeout","cometUniqueID","getCompatIframeSource","requireCond","setTimeout","stylex","useCompatCanvasAppListener","useCompatChatTabListener","useCompatClickEventDispatcher","useCompatDarkModeListener","useCompatDocumentFocusChange","useCompatReloadListener","useCompatRouteListener","useCompatTimeSpentBitArrayListener","useCurrentRoute","useLayoutEffect_SAFE_FOR_SSR","usePrevious","cr:683059"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.routeProps.maintainKey,d=g.useContext(b("CometDarkModeContext"));d=d.isDarkModeEnabled;var e=g.useContext(b("CometBlueBridgeContext")),f=b("usePrevious")(c),h=b("useCurrentRoute")(),i=b("CometRouteURL").useRouteURL(),j=(h=h==null?void 0:h.routePath)!=null?h:i;e&&b("FBLogger")("BlueOnComet").mustfix("Blue on Comet is not allowed in Comet on Blue, was trying to load "+j);h=g.useState(b("cometUniqueID")());var k=h[0],l=h[1],m=b("getCompatIframeSource")(i,k,e),n=g.useRef(null);h=g.useState(m);e=h[0];var o=h[1],p=g.useRef(null),q=g.useRef(null);h=g.useState(!0);var r=h[0],s=h[1];b("useLayoutEffect_SAFE_FOR_SSR")(function(){b("cr:683059")&&(b("cr:683059").addMarkerPoint("BoC_start"),p.current=b("cr:683059").holdTrigger(k),q.current=b("setTimeout")(function(){p.current&&p.current(),p.current=null},6e4),b("cr:683059").addAnnotation("routePath",j)),s(!1)},[k,e,j]);h=g.useState(new(b("CometCompatBroker"))());var t=h[0],u=b("CometRelay").useRelayEnvironment(),v=g.useRef(null);h=g.useCallback(function(){l(b("cometUniqueID")())},[l]);b("CometOnRefresh.react").useOnRefresh(h);h=g.useCallback(function(){b("cr:683059")&&(b("cr:683059").addVisualElement(v.current,"BoCIframe"),b("cr:683059").addMarkerPoint("BoC_end"),b("clearTimeout")(q.current),p.current&&p.current(),p.current=null),s(!1)},[v,p]);b("useLayoutEffect_SAFE_FOR_SSR")(function(){t.init(function(){},k);return t.cleanup},[t,k,e]);b("useCompatRouteListener")(t,{forceSelf:!1,noMaintain:!1});b("useCompatReloadListener")(t,{forceSelf:!0});b("useCompatCanvasAppListener")(t,{priority:b("CurrentUser").isLoggedIn()?"HIGH":"LOW"});b("useCompatDocumentFocusChange")(t);b("useCompatTimeSpentBitArrayListener")(t);b("useCompatChatTabListener")(t);b("useCompatDarkModeListener")(t);var w=a.customCompatEventHandler;g.useEffect(function(){if(w)return w(t)},[t,w]);g.useEffect(function(){if(i.startsWith("/messages")){b("InteractionTracingMetrics").currentInteractionLogger().addGlobalMetadata("afterMessengerLoaded",1);if(!m.includes("/t/")&&n.current!=null&&n.current.includes("/t/"))return}m!==n.current&&(Boolean(c)&&c===f?t.sendChildFrameParams({compatAction:"transitionpage",rel:"",uri:m}):o(m));n.current=m},[t,m,c,f,i]);g.useEffect(function(){if(i.startsWith("/messages")){var a=String(Date.now());b("MWChatMarkAllAsSeenMutation")(u,{input:{actor_id:b("CurrentUser").getID(),precise_timestamp:a}})}},[u,i]);b("useCompatClickEventDispatcher")(v);return g.jsx("div",{className:"ina5je9e d2edcug0 datstx6m",children:g.jsxs(b("CometDOMOnlyBoundary.react"),{children:[g.jsx(b("CometHeroHoldTrigger.react"),{description:"BoC iframe",hold:r}),g.jsx("iframe",{className:"k4urcfbm jgljxmt5 a8c37x1j izx4hr6d humdl8nn bn081pho gcieejh5"+(d&&!i.startsWith("/messages")?" esnais5j":"")+(b("CometRouteRenderType").useIsPushView()?" nznu9b0o":""),onError:h,onLoad:h,ref:v,src:e,tabIndex:-1},e)]})})}}),null);
__d("CometUncaughtError.react",["fbt","CometContentArea.react","NullStateGeneral","React","TetraNullState.react","stylex"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React");function a(){return h.jsx("div",{className:"k4urcfbm poy2od1o taijpn5t nznu9b0o j83agx80 bp9cbjyn",children:h.jsx(b("CometContentArea.react"),{verticalAlign:"middle",children:h.jsx(b("TetraNullState.react"),{headline:g._("R\u1ea5t ti\u1ebfc! \u0110\u00e3 x\u1ea3y ra l\u1ed7i :("),icon:b("NullStateGeneral")})})})}}),null);
__d("CometBatchNotificationsStateChangeSubscription",["CometRelay","CurrentUser","RelayRTIGraphQLSubscriptionTopicProvider","relay-runtime","CometBatchNotificationsStateChangeSubscription.graphql"],(function(a,b,c,d,e,f){"use strict";f.batchSubscribe=a;var g,h=g!==void 0?g:g=b("CometBatchNotificationsStateChangeSubscription.graphql");f.subscription=h;var i={};function a(a){var c=b("relay-runtime").getRequest(h);c=c.params.id;c!==null&&!i[c]&&(i[c]=!0,b("RelayRTIGraphQLSubscriptionTopicProvider").registerProvider(c,function(a){return"gqls/batch_notification_state_change_subscribe/actor_id_"+b("CurrentUser").getID()}));return b("CometRelay").requestSubscription(a,{subscription:h,variables:{environment:"MAIN_SURFACE",input:{environment:"MAIN_SURFACE"}}})}}),null);
__d("CometNotificationsStateChangeSubscription",["CometRelay","CurrentUser","RelayRTIGraphQLSubscriptionTopicProvider","relay-runtime","CometNotificationsStateChangeSubscription.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=g!==void 0?g:g=b("CometNotificationsStateChangeSubscription.graphql"),i={};function a(a){var c=b("relay-runtime").getRequest(h);c=c.params.id;c!==null&&!i[c]&&(i[c]=!0,b("RelayRTIGraphQLSubscriptionTopicProvider").registerProvider(c,function(a){return"gqls/notification_state_change_subscribe/actor_id_"+b("CurrentUser").getID()+"_environment_"+a.input.environment}));return b("CometRelay").requestSubscription(a,{subscription:h,variables:{environment:"MAIN_SURFACE",input:{environment:"MAIN_SURFACE"}}})}c={subscribe:a,subscription:h};e.exports=c}),null);
__d("BDSignalBufferData",[],(function(a,b,c,d,e,f){"use strict";a={};b=a;e.exports=b}),null);
__d("BDSignalWrapper",["BDSignalBufferData","SignalCollectorMap"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.signalFlags=a,this.signalType=b}var c=a.prototype;c.getSignalCollector=function(a){return this.canExecuteForReputationTier(a)?b("SignalCollectorMap").get(this.signalType):null};c.canExecuteForReputationTier=function(a){return this.signalType===38001?!0:this.signalFlags.includes(a)};c.getBufferConfig=function(){return b("BDSignalBufferData")[this.signalType]};return a}();e.exports=a}),null);
__d("SignalValueContext",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.cn=a}var b=a.prototype;b.getSignalValueContextName=function(){return this.cn};return a}();e.exports=a}),null);
__d("BDSignalCollectorBase",["regeneratorRuntime","BDSignalBufferData","SignalValueContext"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.signalType=a}var c=a.prototype;c.executeSignalCollection=function(){throw new Error("Child class responsibility to implement executeSignalCollection")};c.executeAsyncSignalCollection=function(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(this.executeSignalCollection());case 2:a=c.sent;return c.abrupt("return",a);case 4:case"end":return c.stop()}},null,this)};a.getSanitizedURI=function(){var a=window.location.href,b=a.indexOf("?");return b<0?a:a.substring(0,b)};c.getContext=function(){return new(b("SignalValueContext"))(a.getSanitizedURI())};c.throwIfNotInitialized=function(){if(!(this.signalType in b("BDSignalBufferData")))throw new Error("Signal is not intialized")};return a}();e.exports=a}),null);
__d("BDLoggingConstants",[],(function(a,b,c,d,e,f){"use strict";a={ERROR:"error",WARNING:"warning",INFO:"info"};f.LEVELS=a;b={KEY_NOT_FOUND:"key_not_found",APPEND_SIGNAL:"bd_append_signal",APPEND_SIGNAL_FAIL:"bd_append_signal_fail",HB_COLLECTED:"append_hb",HB_COLLECTION_FAILED:"hb_collection_failed",BD_EXCEPTION:"bd_exception",SIGNAL_NOT_IMPLEMENTED:"signal_not_implemented",SIGNAL_VALUE_NULL:"signal_value_null",EMPTY_SIGNAL_CONFIG:"empty_signal_config",INVALID_BUFFER_SIZE:"invalid_buffer_size",INVALID_DURATION:"invalid_duration",SIGNAL_FLAGS_MISSING:"signal_flags_missing",DYNAMIC_SIGNAL_COLLECTION_STARTED:"dynamic_signal_collection_started",BIOMETRIC_SIGNAL_COLLECTION_STARTED:"biometric_signal_collection_started",INVALID_GUID:"invalid_guid",INVALID_LENGTH:"invalid_length",GET_LOCAL_STORAGE_ERROR:"get_local_storage_error",WEB_STORAGE:"web_storage",PARSE_CONFIG_ERROR:"parse_config_error",HB_START_FAILURE:"hb_start_failure",HB_ALREADY_RUNNING:"hb_already_running",TRY_RESTARTING_HB:"try_restarting_hb",BANZAI_LOG_ERROR:"banzai_log_error"};f.OPERATIONS=b;c="JS";f.COMPONENT_NAME=c}),null);
__d("BDOperationTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setBdSessionID=function(a){this.$1.bd_session_id=a;return this};c.setComponent=function(a){this.$1.component=a;return this};c.setDurationUs=function(a){this.$1.duration_us=a;return this};c.setExceptionMessage=function(a){this.$1.exception_message=a;return this};c.setExceptionStackTrace=function(a){this.$1.exception_stack_trace=a;return this};c.setExceptionType=function(a){this.$1.exception_type=a;return this};c.setIntValue=function(a){this.$1.int_value=a;return this};c.setLevel=function(a){this.$1.level=a;return this};c.setOperation=function(a){this.$1.operation=a;return this};c.setOperationInfo=function(a){this.$1.operation_info=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setSessionlets=function(a){this.$1.sessionlets=b("GeneratedLoggerUtils").serializeVector(a);return this};return a}();c={bd_session_id:!0,component:!0,duration_us:!0,exception_message:!0,exception_stack_trace:!0,exception_type:!0,int_value:!0,level:!0,operation:!0,operation_info:!0,sessionlets:!0};e.exports=a}),null);
__d("BDOperationLogHelper",["BDLoggingConstants","BDOperationTypedLogger","Random"],(function(a,b,c,d,e,f){"use strict";f.logInfo=a;f.logWarning=c;f.logError=d;f.log=g;f.getFlipSamplingByOperation=h;function a(a,c,d,e){g(a,b("BDLoggingConstants").LEVELS.INFO,c,d,e)}function c(a,c,d,e){g(a,b("BDLoggingConstants").LEVELS.WARNING,c,d,e)}function d(a,c,d,e){g(a,b("BDLoggingConstants").LEVELS.ERROR,c,d,e)}function g(a,c,d,e,f){e===void 0&&(e={});if(b("Random").coinflip(h(d))){if(e===null)throw new Error("opeartion info null");e.source=a;new(b("BDOperationTypedLogger"))().setLevel(c).setDurationUs(f).setOperation(d).setComponent(b("BDLoggingConstants").COMPONENT_NAME).setOperationInfo(e).log()}}function h(a){var c=b("BDLoggingConstants").OPERATIONS;switch(a){case c.APPEND_SIGNAL:case c.HB_COLLECTED:case c.GET_LOCAL_STORAGE_ERROR:case c.WEB_STORAGE:case c.SIGNAL_NOT_IMPLEMENTED:case c.BIOMETRIC_SIGNAL_COLLECTION_STARTED:return 1e3;default:return 1}}}),null);
__d("SignalErrorValueTypeDef",[],(function(a,b,c,d,e,f){"use strict";var g="ec",h="en",i="es",j=500;a=function(){function a(a,b,c){this.$1=a,this.$2=b,c!=null&&(this.$3=c.substr(0,j))}var b=a.prototype;b.getErrorCode=function(){return this.$1};b.getErrorName=function(){return this.$2};b.getErrorDetails=function(){return this.$3};b.isEqual=function(a){return this.$1===a.getErrorCode()&&this.$3===a.getErrorDetails()&&this.$2===a.getErrorName()};b.toJSON=function(){var a={};a[g]=this.$1;switch(this.$1){case 0:a[h]=this.$2;a[i]=this.$3;break}return a};return a}();f.SignalErrorValueTypeDef=a}),null);
__d("SignalValueTypeDef",["BDLoggingConstants","BDOperationLogHelper","SignalErrorValueTypeDef"],(function(a,b,c,d,e,f){"use strict";var g="SignalValueTypeDef",h="t",i="ctx",j="v";f.BD_VALUE=j;var k="e";f.BD_ERROR=k;var l={NUMBER:"NUMBER",STRING:"STRING",BOOLEAN:"BOOLEAN",CUSTOM_OBJECT:"CUSTOM_OBJECT",INT_ARRAY:"INT_ARRAY",TOUCH:"TOUCH",MAP:"MAP",LIST:"LIST",SENSOR:"SENSOR",ERROR:"ERROR"};f.VALUE_TYPES=l;a=function(){function a(a,b,c,d,e){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e!=null?e:0}var c=a.prototype;c.getTimeStampMS=function(){return this.$1};c.getSignalContext=function(){return this.$2};c.getSignalValue=function(){return this.$3};c.getSignalValueType=function(){return this.$4};c.isEqual=function(a,c){if(a==null){b("BDOperationLogHelper").logWarning(g,b("BDLoggingConstants").OPERATIONS.SIGNAL_VALUE_NULL);return!1}if(this.getSignalValueType()!==a.getSignalValueType())return!1;if(this.getSignalValueType()===l.ERROR&&a.getSignalValueType()===l.ERROR)return this.equalValue(a);var d=!1;c.has(128)&&(d=this.equalValue(a));c.has(256)&&(d=d&&this.getSignalContext()!=null&&a.getSignalContext()!=null&&this.getSignalContext().getSignalValueContextName()===a.getSignalContext().getSignalValueContextName());c.has(512)&&(d=d&&Math.abs(this.getTimeStampMS()-a.getTimeStampMS())<=this.$5);return d};c.equalValue=function(a){if(this.isPrimitiveType())return this.getSignalValue()===a.getSignalValue();throw new Error("Must implement in the subclasses")};c.toJSON=function(a){var c={};a&&(c[h]=this.$1/1e3,this.$2!=null&&(c[i]=this.$2));this.$3==null?c[k]=new(b("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(2):this.addValueOrErrorToJSON(c);return c};c.addValueOrErrorToJSON=function(a){if(this.isPrimitiveType())a[j]=this.$3;else throw new Error("Must implement in the subclasses")};c.isPrimitiveType=function(){switch(typeof this.$3){case"number":case"boolean":case"string":return!0;default:return!1}};return a}();f.SignalValueTypeDef=a}),null);
__d("ErrorSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e){return a.call(this,c,d,e,b("SignalValueTypeDef").VALUE_TYPES.ERROR)||this}var d=c.prototype;d.equalValue=function(a){return this.getSignalValue().isEqual(a.getSignalValue())};d.addValueOrErrorToJSON=function(a){a[b("SignalValueTypeDef").BD_ERROR]=this.getSignalValue().toJSON()};return c}(b("SignalValueTypeDef").SignalValueTypeDef);e.exports=a}),null);
__d("NumberSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e){return a.call(this,c,d,e,b("SignalValueTypeDef").VALUE_TYPES.NUMBER)||this}return c}(b("SignalValueTypeDef").SignalValueTypeDef);e.exports=a}),null);
__d("BDConnectionRTTSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","NumberSignalValueType","SignalErrorValueTypeDef"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){if(navigator.connection!=null&&navigator.connection.rtt!=null){var a=navigator.connection.rtt;a=new(b("NumberSignalValueType"))(Date.now(),this.getContext(),a)}else a=new(b("ErrorSignalValueType"))(Date.now(),this.getContext(),new(b("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"navigator.connection.rtt not supported"));return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30004,get:function(){h==null&&(h=new g());return h}};a=i;e.exports=a}),null);
__d("CustomObjectSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e){return a.call(this,c,d,e,b("SignalValueTypeDef").VALUE_TYPES.CUSTOM_OBJECT)||this}var d=c.prototype;d.equalValue=function(a){return this.getSignalValue().isEqual(a.getSignalValue())};d.addValueOrErrorToJSON=function(a){a[b("SignalValueTypeDef").BD_VALUE]=this.getSignalValue().toJSON()};return c}(b("SignalValueTypeDef").SignalValueTypeDef);e.exports=a}),null);
__d("HeartbeatObject",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.isAppForeground=!0}var b=a.prototype;b.toJSON=function(){return{f:this.isAppForeground}};b.isEqual=function(a){return!1};return a}();e.exports=a}),null);
__d("BDHeartbeatSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","HeartbeatObject"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(b("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(b("HeartbeatObject"))());return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:38e3,get:function(){h==null&&(h=new g());return h}};a=i;e.exports=a}),null);
__d("BDBiometricSignalCollectorBase",["BDSignalCollectorBase","err"],(function(a,b,c,d,e,f){"use strict";a="biometric_signal_collected";f.BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME=a;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.listenForSignals=function(){throw b("err")("Child class responsibility to implement listenForSignals")};d.executeSignalCollection=function(){throw b("err")("executeAsyncSignalCollection and executeSignalCollection should not be called on biometric signals")};return c}(b("BDSignalCollectorBase"));f.BDBiometricSignalCollectorBase=c}),null);
__d("KeyDownUpObject",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.action=null,this.key_code=null,this.action=a,this.key_code=b}var b=a.prototype;b.toJSON=function(){return{action:this.action,key_code:this.key_code}};b.isEqual=function(b){return b instanceof a?this.action===b.action&&this.key_code===b.key_code:!1};return a}();e.exports=a}),null);
__d("BDKeyDownUpSignalCollector",["BDBiometricSignalCollectorBase","CustomObjectSignalValueType","KeyDownUpObject","gkx"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.listenForSignals=function(){var a=this;b("gkx")("1652843")&&(document.addEventListener("keydown",function(b){return a.collectSignals(2)}),document.addEventListener("keyup",function(b){return a.collectSignals(1)}))};d.collectSignals=function(a){a=new(b("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(b("KeyDownUpObject"))(a,0));a={signalId:this.signalType,data:{valueOrError:a}};window.dispatchEvent(new CustomEvent(b("BDBiometricSignalCollectorBase").BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME,{detail:a}))};return a}(b("BDBiometricSignalCollectorBase").BDBiometricSignalCollectorBase),h=null,i={signalType:30100,get:function(){h==null&&(h=new g());return h}};a=i;e.exports=a}),null);
__d("StringArrayObject",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.strings=[],this.strings=a}var b=a.prototype;b.toJSON=function(){return this.strings};b.isEqual=function(b){if(!(b instanceof a))return!1;if(b.strings===this.strings)return!0;if(b.strings.length!==this.strings.length)return!1;for(var c=0;c<this.strings.length;c++)if(this.strings[c]!==b.strings[c])return!1;return!0};return a}();e.exports=a}),null);
__d("BDLanguagesSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","StringArrayObject"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=[].concat(navigator.languages);a=new(b("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(b("StringArrayObject"))(a));return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30003,get:function(){h==null&&(h=new g());return h}};a=i;e.exports=a}),null);
__d("BDMimeTypeCountSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=navigator.mimeTypes?navigator.mimeTypes.length:-1;a=new(b("NumberSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30002,get:function(){h==null&&(h=new g());return h}};a=i;e.exports=a}),null);
__d("BooleanSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e){return a.call(this,c,d,e,b("SignalValueTypeDef").VALUE_TYPES.BOOLEAN)||this}return c}(b("SignalValueTypeDef").SignalValueTypeDef);e.exports=a}),null);
__d("BDTouchOrMouseSignalCollectorBase",["BDBiometricSignalCollectorBase","BooleanSignalValueType","gkx"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(b,c,d){var e;e=a.call(this,b)||this;e.eventsToSubscribe=[];e.pauseTimeout=60*60*1e3;e.eventsToSubscribe=c;e.pauseTimeout=d;e.handler=function(a){return e.collectSignals(a)};return e}var d=c.prototype;d.listenForSignals=function(){b("gkx")("1820190")&&(this.collectSignals(),this.addListeners())};d.addListeners=function(){var a=this;this.eventsToSubscribe.forEach(function(b){document.addEventListener(b,a.handler)})};d.pauseListeners=function(){var a=this;this.eventsToSubscribe.forEach(function(b){document.removeEventListener(b,a.handler)});window.setTimeout(function(){return a.addListeners()},this.pauseTimeout)};d.collectSignals=function(a){a=a!=null;a&&this.pauseListeners();a=new(b("BooleanSignalValueType"))(Date.now(),this.getContext(),a);a={signalId:this.signalType,data:{valueOrError:a}};window.dispatchEvent(new CustomEvent(b("BDBiometricSignalCollectorBase").BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME,{detail:a}))};return c}(b("BDBiometricSignalCollectorBase").BDBiometricSignalCollectorBase);e.exports=a}),null);
__d("BDMousePresenceSignalCollector",["BDTouchOrMouseSignalCollectorBase"],(function(a,b,c,d,e,f){"use strict";var g=60*60*1e3,h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType,["mousedown","mousemove"],g)||this}return a}(b("BDTouchOrMouseSignalCollectorBase")),i=null,j={signalType:30106,get:function(){i==null&&(i=new h());return i}};a=j;e.exports=a}),null);
__d("BDNavigatorHardwareConcurrencySignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a;a=new(b("NumberSignalValueType"))(Date.now(),this.getContext(),(a=navigator.hardwareConcurrency)!=null?a:0);return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30018,get:function(){h==null&&(h=new g());return h}};a=i;e.exports=a}),null);
__d("BDNavigatorMaxTouchPointSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(b("NumberSignalValueType"))(Date.now(),this.getContext(),navigator.maxTouchPoints);return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30093,get:function(){h==null&&(h=new g());return h}};a=i;e.exports=a}),null);
__d("StringSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e){return a.call(this,c,d,e,b("SignalValueTypeDef").VALUE_TYPES.STRING)||this}return c}(b("SignalValueTypeDef").SignalValueTypeDef);e.exports=a}),null);
__d("BDNavigatorNotificationPermissionSignalCollector",["regeneratorRuntime","BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringSignalValueType"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeAsyncSignalCollection=function(){var a,c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.prev=0;if(!navigator.permissions){d.next=8;break}d.next=4;return b("regeneratorRuntime").awrap(navigator.permissions.query({name:"notifications"}));case 4:c=d.sent;a=new(b("StringSignalValueType"))(Date.now(),this.getContext(),c.state);d.next=9;break;case 8:a=new(b("ErrorSignalValueType"))(Date.now(),this.getContext(),new(b("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"navigator.permissions not supported"));case 9:d.next=14;break;case 11:d.prev=11,d.t0=d["catch"](0),a=new(b("ErrorSignalValueType"))(Date.now(),this.getContext(),new(b("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"notifications cannot be queried from navigator.permissions"));case 14:return d.abrupt("return",{valueOrError:a});case 15:case"end":return d.stop()}},null,this,[[0,11]])};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30008,get:function(){h==null&&(h=new g());return h}};a=i;e.exports=a}),null);
__d("BDNavigatorPlatformSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(b("StringSignalValueType"))(Date.now(),this.getContext(),navigator.platform);return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30015,get:function(){h==null&&(h=new g());return h}};a=i;e.exports=a}),null);
__d("BDNavigatorPluginsFileExtensionsSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringArrayObject"],(function(a,b,c,d,e,f){"use strict";var g=10,h=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=null;try{var c=navigator.plugins?navigator.plugins.length:0,d=new Set();for(var e=0;e<c;e++){var f=navigator.plugins[e].filename;if(!f)continue;var h=f.indexOf(".");if(h==-1||h==f.length-1)continue;d.add(f.substr(h+1));if(d.size>=g)break}d.size&&(a=new(b("StringArrayObject"))(Array.from(d)))}catch(c){a=new(b("ErrorSignalValueType"))(Date.now(),this.getContext(),new(b("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"navigator.plugins is not defined"))}return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),i=null,j={signalType:30019,get:function(){i==null&&(i=new h());return i}};a=j;e.exports=a}),null);
__d("BDNavigatorUserAgentSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(b("StringSignalValueType"))(Date.now(),this.getContext(),navigator.userAgent);return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30094,get:function(){h==null&&(h=new g());return h}};a=i;e.exports=a}),null);
__d("BDNavigatorVendorSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=navigator.vendor;a=new(b("StringSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30012,get:function(){h==null&&(h=new g());return h}};a=i;e.exports=a}),null);
__d("BDNotificationPermissionSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringSignalValueType"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a;window.Notification?a=new(b("StringSignalValueType"))(Date.now(),this.getContext(),Notification.permission):a=new(b("ErrorSignalValueType"))(Date.now(),this.getContext(),new(b("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"Notification not supported"));return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30007,get:function(){h==null&&(h=new g());return h}};a=i;e.exports=a}),null);
__d("BDPluginCountSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=navigator.plugins?navigator.plugins.length:-1;a=new(b("NumberSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30001,get:function(){h==null&&(h=new g());return h}};a=i;e.exports=a}),null);
__d("BDTimezoneOffsetSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a;a=new(b("NumberSignalValueType"))(Date.now(),this.getContext(),(a=new Date().getTimezoneOffset())!=null?a:0);return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30040,get:function(){h==null&&(h=new g());return h}};a=i;e.exports=a}),null);
__d("BDTouchPresenceSignalCollector",["BDTouchOrMouseSignalCollectorBase"],(function(a,b,c,d,e,f){"use strict";var g=60*60*1e3,h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType,["touchstart","touchcancel"],g)||this}return a}(b("BDTouchOrMouseSignalCollectorBase")),i=null,j={signalType:30107,get:function(){i==null&&(i=new h());return i}};a=j;e.exports=a}),null);
__d("BDWebdriverSignalCollector",["BDSignalCollectorBase","BooleanSignalValueType"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=!!navigator.webdriver;a=new(b("BooleanSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:3e4,get:function(){h==null&&(h=new g());return h}};a=i;e.exports=a}),null);
__d("BDWindowHistoryLengthSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(b("NumberSignalValueType"))(Date.now(),this.getContext(),window.history?window.history.length:0);return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30095,get:function(){h==null&&(h=new g());return h}};a=i;e.exports=a}),null);
__d("DimensionObject",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.width=null,this.height=null,this.width=a,this.height=b}var b=a.prototype;b.toJSON=function(){return{w:this.width,h:this.height}};b.isEqual=function(b){if(b instanceof a)return this.width===b.width&&this.height===b.height;else return!1};return a}();e.exports=a}),null);
__d("BDWindowOuterDimensionSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","DimensionObject"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=window.outerHeight,c=window.outerWidth;c=new(b("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(b("DimensionObject"))(c,a));return{valueOrError:c}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:30005,get:function(){h==null&&(h=new g());return h}};a=i;e.exports=a}),null);
__d("SignalCollectorMap",["BDConnectionRTTSignalCollector","BDHeartbeatSignalCollector","BDHeartbeatV2SignalCollector","BDKeyDownUpSignalCollector","BDLanguagesSignalCollector","BDMimeTypeCountSignalCollector","BDMousePresenceSignalCollector","BDNavigatorHardwareConcurrencySignalCollector","BDNavigatorMaxTouchPointSignalCollector","BDNavigatorNotificationPermissionSignalCollector","BDNavigatorPlatformSignalCollector","BDNavigatorPluginsFileExtensionsSignalCollector","BDNavigatorUserAgentSignalCollector","BDNavigatorVendorSignalCollector","BDNotificationPermissionSignalCollector","BDPluginCountSignalCollector","BDTimezoneOffsetSignalCollector","BDTouchPresenceSignalCollector","BDWebdriverSignalCollector","BDWindowHistoryLengthSignalCollector","BDWindowOuterDimensionSignalCollector"],(function(a,b,c,d,e,f){"use strict";a={get:function(a){switch(a){case 3e4:return b("BDWebdriverSignalCollector").get();case 30001:return b("BDPluginCountSignalCollector").get();case 30002:return b("BDMimeTypeCountSignalCollector").get();case 30003:return b("BDLanguagesSignalCollector").get();case 30004:return b("BDConnectionRTTSignalCollector").get();case 30005:return b("BDWindowOuterDimensionSignalCollector").get();case 30007:return b("BDNotificationPermissionSignalCollector").get();case 30008:return b("BDNavigatorNotificationPermissionSignalCollector").get();case 30012:return b("BDNavigatorVendorSignalCollector").get();case 30015:return b("BDNavigatorPlatformSignalCollector").get();case 30018:return b("BDNavigatorHardwareConcurrencySignalCollector").get();case 30019:return b("BDNavigatorPluginsFileExtensionsSignalCollector").get();case 30040:return b("BDTimezoneOffsetSignalCollector").get();case 30093:return b("BDNavigatorMaxTouchPointSignalCollector").get();case 30094:return b("BDNavigatorUserAgentSignalCollector").get();case 30095:return b("BDWindowHistoryLengthSignalCollector").get();case 30100:return b("BDKeyDownUpSignalCollector").get();case 30106:return b("BDMousePresenceSignalCollector").get();case 30107:return b("BDTouchPresenceSignalCollector").get();case 38e3:return b("BDHeartbeatSignalCollector").get();case 38001:return b("BDHeartbeatV2SignalCollector").get()}}};c=a;e.exports=c}),null);
__d("BDUtils",[],(function(a,b,c,d,e,f){"use strict";f.uuid=a;function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random()*16|0;a=a=="x"?b:b&3|8;return a.toString(16)})}}),null);
__d("HeartbeatV2Object",["HeartbeatObject"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.id="";c.id=b;return c}var c=b.prototype;c.toJSON=function(){return{f:this.isAppForeground,id:this.id}};return b}(b("HeartbeatObject"));e.exports=a}),null);
__d("BDHeartbeatV2SignalCollector",["BDClientConfig","BDSignalCollectorBase","BDUtils","CustomObjectSignalValueType","HeartbeatV2Object"],(function(a,b,c,d,e,f){"use strict";var g=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.call(this,i.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(b("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(b("HeartbeatV2Object"))(b("BDClientConfig").get().getHeartbeatVersion()));return{valueOrError:a}};return a}(b("BDSignalCollectorBase")),h=null,i={signalType:38001,get:function(){h==null&&(h=new g());return h}};a=i;e.exports=a}),null);
__d("BDClientConfig",["BDLoggingConstants","BDOperationLogHelper","BDSignalWrapper"],(function(a,b,c,d,e,f){"use strict";var g="BDClientConfig",h=function(){function a(){this.reputationTier=0,this.staticSignalBufferSize=1,this.dynamicSignalBufferSize=1,this.biometricSignalBufferSize=1,this.staticSignals=[],this.dynamicSignals=[],this.biometricSignals=[],this.biometricSignalsMap=new Map(),this.heartbeatSignal=new(b("BDSignalWrapper"))([],38001),this.bufferSizeBySignalIdMap={},this.periodicCollectionIntervalMs=Number.MAX_SAFE_INTEGER,this.signalConfigGenerationTimeStampMs=0,this.suspiciousTiersFlushDurationMs=Number.MAX_SAFE_INTEGER,this.allTiersFlushDurationMs=Number.MAX_SAFE_INTEGER,this.heartbeatIntervalMs=-1,this.parsingDone=!1,this.sid=-1,this.hbVersion="",this.bufferSizeBySignalIdMap[38001]=1}var c=a.prototype;c.setClientReputationTier=function(a){this.reputationTier=a;return this};c.getClientReputationTier=function(){return this.reputationTier};c.setStaticSignalBufferSize=function(a){a>0?this.staticSignalBufferSize=a:b("BDOperationLogHelper").logError(g,b("BDLoggingConstants").OPERATIONS.INVALID_BUFFER_SIZE,{size:a.toString(),type:"s"});return this};c.getStaticSignalBufferSize=function(){return this.staticSignalBufferSize};c.setDynamicSignalBufferSize=function(a){a>1?this.dynamicSignalBufferSize=a:b("BDOperationLogHelper").logError(g,b("BDLoggingConstants").OPERATIONS.INVALID_BUFFER_SIZE,{size:a.toString(),type:"d"});return this};c.getDynamicSignalBufferSize=function(){return this.dynamicSignalBufferSize};c.setBiometricSignalBufferSize=function(a){a>1?this.biometricSignalBufferSize=a:b("BDOperationLogHelper").logError(g,b("BDLoggingConstants").OPERATIONS.INVALID_BUFFER_SIZE,{size:a.toString(),type:"b"});return this};c.setSID=function(a){this.sid=a;return this};c.setHeartbeatVersion=function(a){this.hbVersion=a;return this};c.getHeartbeatVersion=function(){return this.hbVersion};c.getBiometricSignalBufferSize=function(){return this.biometricSignalBufferSize};c.setConfigGenerationTimeStamp=function(a){this.signalConfigGenerationTimeStampMs=a;return this};c.getConfigGenerationTimeStamp=function(){return this.signalConfigGenerationTimeStampMs};c.setHeartbeatIntervalMinutes=function(a){this.heartbeatIntervalMs=a*60*1e3;return this};c.getHeartbeatIntervalMs=function(){return this.heartbeatIntervalMs};c.setSuspiciousTiersFlushDurationMinutes=function(a){a>0?this.suspiciousTiersFlushDurationMs=a*60*1e3:b("BDOperationLogHelper").logError(g,b("BDLoggingConstants").OPERATIONS.INVALID_DURATION,{size:a.toString(),type:"fds"});return this};c.getSuspiciousTiersFlushDurationMs=function(){return this.suspiciousTiersFlushDurationMs};c.setAllTiersFlushDurationMinutes=function(a){a>0?this.allTiersFlushDurationMs=a*60*1e3:b("BDOperationLogHelper").logError(g,b("BDLoggingConstants").OPERATIONS.INVALID_DURATION,{size:a.toString(),type:"fda"});return this};c.getAllTiersFlushDurationMs=function(){return this.allTiersFlushDurationMs};c.getFlushDurationByReputationTierMs=function(){return this.reputationTier===262144?this.allTiersFlushDurationMs:this.suspiciousTiersFlushDurationMs};c.addMultipleSignalsToClientConfig=function(a){var b=this;a.forEach(function(a){return b.addSignalToClientConfig(a)});return this};c.addSignalToClientConfig=function(a){var c=a.getSignalFlags(),d=a.getSignalId();if(d===38e3)return this;var e=new(b("BDSignalWrapper"))(c,d);if(d===38001){this.heartbeatSignal=e;return this}!c.includes(2)?this.staticSignals.push(e):c.includes(4)?this.biometricSignals.push(e):this.dynamicSignals.push(e);a.getBufferSize()>0&&(this.bufferSizeBySignalIdMap[a.getSignalId()]=a.getBufferSize());return this};c.setPeriodicCollectionIntervalSeconds=function(a){a>0?this.periodicCollectionIntervalMs=a*1e3:b("BDOperationLogHelper").logError(g,b("BDLoggingConstants").OPERATIONS.INVALID_DURATION,{size:a.toString(),type:"pi"});return this};c.getPeriodicCollectionIntervalMs=function(){return this.periodicCollectionIntervalMs};c.getDynamicSignals=function(){return this.dynamicSignals};c.getStaticSignals=function(){return this.staticSignals};c.getBiometricSignals=function(){return this.biometricSignals};c.getBiometricSignalsMap=function(){this.biometricSignalsMap.size===0&&this.biometricSignals.length>0&&(this.biometricSignalsMap=this.biometricSignals.reduce(function(a,b){return a.set(b.signalType,b)},new Map()));return this.biometricSignalsMap};c.getHeartbeatSignal=function(){return this.heartbeatSignal};c.getBufferSizeBySignalId=function(a){return this.bufferSizeBySignalIdMap[a]};c.setParsingDone=function(a){this.parsingDone=a};c.isParsingDone=function(){return this.parsingDone};return a}(),i=null;a={get:function(){i==null&&(i=new h());return i}};c=a;e.exports=c}),null);
__d("BDCollectionTypeEnum",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({STATIC:0,DYNAMIC:1,BIOMETRIC:2});e.exports=a}),null);
__d("BotDetection_SignalFlags",[],(function(a,b,c,d,e,f){a=Object.freeze({ACTIVE:1,DYNAMIC:2,BIOMETRIC:4,DEPRECATED:8,WEB:16,IOS_NATIVE:32,ANDROID_NATIVE:64,EQUAL_BY_VALUE:128,EQUAL_BY_CONTEXT:256,EQUAL_BY_TIMESTAMP:512,SUSPICIOUS_TIER:1024,PARANOID_TIER:2048,RANDOM_SAMPLE_TIER_DEPRECATED:4096,BENIGN_TIER:262144,EMPLOYEES_TIER:524288,BUNDLE:8192,ONSITE:16384,OFFSITE:32768,OFFSITE_SENSITIVE:65536,SENSITIVE:131072});e.exports=a}),null);
__d("BDServerSignalConfig",["BDLoggingConstants","BDOperationLogHelper","BotDetection_SignalFlags"],(function(a,b,c,d,e,f){"use strict";var g="BDServerSignalConfig";a=function(){function a(a,b,c){this.parsedSignalFlags=[],this.signalId=a,this.signalFlags=b,this.bufferSize=c}var c=a.prototype;c.getSignalId=function(){return this.signalId};c.getSignalFlags=function(){var a=this;if(this.parsedSignalFlags.length===0){var c=Object.keys(b("BotDetection_SignalFlags"));c.forEach(function(c){(b("BotDetection_SignalFlags")[c]&a.signalFlags)===b("BotDetection_SignalFlags")[c]&&a.parsedSignalFlags.push(b("BotDetection_SignalFlags")[c])})}this.parsedSignalFlags.length===0&&b("BDOperationLogHelper").logError(g,b("BDLoggingConstants").OPERATIONS.SIGNAL_FLAGS_MISSING,{id:this.signalId.toString(),flags:this.signalFlags.toString()});return this.parsedSignalFlags};c.getBufferSize=function(){return this.bufferSize!=null?this.bufferSize:0};return a}();e.exports=a}),null);
__d("BDServerConfig",["BDClientConfig","BDLoggingConstants","BDOperationLogHelper","BDServerSignalConfig"],(function(a,b,c,d,e,f){"use strict";f.parseConfig=a;var g="BDServerConfig";function a(a){var c=[];try{var d=JSON.parse(a.sc),e=new Map(d.c);e.forEach(function(a,d){return c.push(new(b("BDServerSignalConfig"))(d,a))});if(e.size===0){b("BDOperationLogHelper").logError(g,b("BDLoggingConstants").OPERATIONS.EMPTY_SIGNAL_CONFIG);return}e=b("BDClientConfig").get();e.setClientReputationTier(a.rt).setPeriodicCollectionIntervalSeconds(a.i).addMultipleSignalsToClientConfig(c).setConfigGenerationTimeStamp(d.t).setAllTiersFlushDurationMinutes(a.fda).setSuspiciousTiersFlushDurationMinutes(a.fds).setHeartbeatIntervalMinutes(a.hbi).setStaticSignalBufferSize(a.sbs).setDynamicSignalBufferSize(a.dbs).setBiometricSignalBufferSize(a.bbs).setSID(a.sid).setHeartbeatVersion(a.hbv).setParsingDone(!0)}catch(a){b("BDOperationLogHelper").logError(g,b("BDLoggingConstants").OPERATIONS.PARSE_CONFIG_ERROR,{e:a})}}}),null);
__d("BDSignalBuffer",["BDClientConfig","BDCollectionTypeEnum","BDLoggingConstants","BDOperationLogHelper","BDSignalBufferData"],(function(a,b,c,d,e,f){"use strict";f.initialize=a;f.clearBuffer=h;f.appendSignal=c;f.clearBiometricSignals=d;f.getLastSignalFormatBySignalId=e;f.retrieveSignal=i;f.retrieveSignals=j;f.getSignalsAsJSONString=k;f._getSignalIdsByCollectionType=l;var g="BDSignalBuffer";function a(a,c,d){if(a in b("BDSignalBufferData"))return;var e=1;c!==void 0&&(e=c);b("BDSignalBufferData")[a]={values:[],max_buffer_size:e,signal_flags:(c=d)!=null?c:[]}}function h(a){if(a in b("BDSignalBufferData"))b("BDSignalBufferData")[a].values=[];else throw new Error("Tried to clear signal buffer that was not intialized:")}function c(a,c){if(a in b("BDSignalBufferData")){var d=b("BDSignalBufferData")[a],e=d.max_buffer_size;d.values.length>=e&&d.values.shift();d.values.push(c);b("BDOperationLogHelper").logInfo(g,b("BDLoggingConstants").OPERATIONS.APPEND_SIGNAL,{id:a.toString()})}else{b("BDOperationLogHelper").logError(g,b("BDLoggingConstants").OPERATIONS.APPEND_SIGNAL_FAIL,{id:a.toString()});throw new Error("Tried to append signal that was not intialized:")}}function d(){var a=b("BDClientConfig").get();a=a.getBiometricSignals();a.forEach(function(a){a.signalType in b("BDSignalBufferData")&&h(a.signalType)})}function e(a){var c;a=b("BDSignalBufferData")[a];c=a==null?void 0:(c=a.values)==null?void 0:c.length;return c!=null&&c>0?a.values[c-1]:{valueOrError:void 0}}function i(a){return b("BDSignalBufferData")[a].values}function j(a){var c={};for(var d=0;d<a.length;d++){var e=a[d];e in b("BDSignalBufferData")&&(c[e]=this.retrieveSignal(e).map(function(a){return a.valueOrError}))}return c}function k(a){a=this._getSignalIdsByCollectionType(a);return JSON.stringify(this.retrieveSignals(a))}function l(a){var c=b("BDClientConfig").get(),d=[];a.forEach(function(a){switch(a){case b("BDCollectionTypeEnum").STATIC:d=[].concat(d,c.getStaticSignals());break;case b("BDCollectionTypeEnum").DYNAMIC:d=[].concat(d,c.getDynamicSignals());break;case b("BDCollectionTypeEnum").BIOMETRIC:d=[].concat(d,c.getBiometricSignals());break}});return d.map(function(a){return a.signalType})}}),null);
__d("BdPdcSignalsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1743095");c=b("FalcoLoggerInternal").create("bd_pdc_signals",a);e.exports=c}),null);
__d("SignalCollectionManager",["regeneratorRuntime","Promise","BDBiometricSignalCollectorBase","BDClientConfig","BDLoggingConstants","BDOperationLogHelper","BDSignalBuffer","SignalValueTypeDef"],(function(a,b,c,d,e,f){"use strict";var g="SignalCollectionManager",h=function(){function a(){var a=this;this.$1=!1;this.$6=function(c){if(c instanceof CustomEvent&&c.detail!=null&&c.detail.data!=null){var d=b("BDClientConfig").get().getBiometricSignalsMap().get(c.detail.signalId);d!=null&&a.$4(c.detail.data,d)}}}var c=a.prototype;c.collectSignals=function(a,c){var d=this,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:e=[];a.forEach(function(a){a.signalFlags.includes(4)?d.$2(a,c):e.push(d.$3(a,c))});f.next=4;return b("regeneratorRuntime").awrap(b("Promise").all(e));case 4:case"end":return f.stop()}},null,this)};c.isEqualToLastCollectedSignal=function(a,c){var d=b("BDSignalBuffer").getLastSignalFormatBySignalId(c.signalType);return d.valueOrError==void 0?!1:a.isEqual(d.valueOrError,new Set(c.signalFlags))};c.getCircularBufferSize=function(a){var c=b("BDClientConfig").get(),d=c.getBufferSizeBySignalId(a.signalType);if(d!=null&&c.getBufferSizeBySignalId(a.signalType)>0)return d;if(!a.signalFlags.includes(2))return c.getStaticSignalBufferSize();else if(a.signalFlags.includes(4))return c.getBiometricSignalBufferSize();else return c.getDynamicSignalBufferSize()};c.$3=function(a,c){var d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:d=a.getSignalCollector(c);if(!(d!=null)){f.next=12;break}f.prev=2;f.next=5;return b("regeneratorRuntime").awrap(d.executeAsyncSignalCollection());case 5:e=f.sent;this.$4(e,a);f.next=12;break;case 9:f.prev=9,f.t0=f["catch"](2),b("BDOperationLogHelper").logError(g,b("BDLoggingConstants").OPERATIONS.BD_EXCEPTION,{error:f.t0});case 12:case"end":return f.stop()}},null,this,[[2,9]])};c.$2=function(a,c){this.$5();a=a.getSignalCollector(c);a!=null&&a instanceof b("BDBiometricSignalCollectorBase").BDBiometricSignalCollectorBase&&a.listenForSignals()};c.$5=function(){if(this.$1)return;window.addEventListener(b("BDBiometricSignalCollectorBase").BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME,this.$6);this.$1=!0};c.$4=function(a,c){c.getBufferConfig()==null&&b("BDSignalBuffer").initialize(c.signalType,this.getCircularBufferSize(c),c.signalFlags),a.valueOrError&&!this.isEqualToLastCollectedSignal(a.valueOrError,c)&&b("BDSignalBuffer").appendSignal(c.signalType,a)};return a}(),i=null;a={get:function(){i==null&&(i=new h());return i}};c=a;e.exports=c}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("javascript-blowfish-1.0.5",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){var a=function(b,c){this.key=b,(c==="ecb"||c==="cbc")&&(this.mode=c),this.sBox0=a.sBox0.slice(),this.sBox1=a.sBox1.slice(),this.sBox2=a.sBox2.slice(),this.sBox3=a.sBox3.slice(),this.pArray=a.pArray.slice(),this.generateSubkeys(b)};a.prototype={sBox0:null,sBox1:null,sBox2:null,sBox3:null,pArray:null,key:null,mode:"ecb",iv:"abc12345",keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encrypt:function(a,b){if(this.mode==="ecb")return this.encryptECB(a);if(this.mode==="cbc")return this.encryptCBC(a,b);throw new Error("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u044f.")},decrypt:function(a,b){if(this.mode==="ecb")return this.decryptECB(a);if(this.mode==="cbc")return this.decryptCBC(a,b);throw new Error("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u044f.")},encryptECB:function(a){a=this.utf8Decode(a);var b=Math.ceil(a.length/8),c="";for(var d=0;d<b;d++){var e=a.substr(d*8,8);if(e.length<8){var f=8-e.length;while(0<f--)e+="\0"}var g;f=this.split64by32(e);e=f[0];g=f[1];f=this.encipher(e,g);e=f[0];g=f[1];c+=this.num2block32(e)+this.num2block32(g)}return c},encryptCBC:function(a,b){a=this.utf8Decode(a);var c=Math.ceil(a.length/8),d;b=this.split64by32(b);d=b[0];b=b[1];var e="";for(var f=0;f<c;f++){var g=a.substr(f*8,8);if(g.length<8){var h=8-g.length;while(0<h--)g+="\0"}var i;h=this.split64by32(g);g=h[0];i=h[1];g=this.xor(g,d);i=this.xor(i,b);h=this.encipher(g,i);g=h[0];i=h[1];d=g;b=i;e+=this.num2block32(g)+this.num2block32(i)}return e},decryptECB:function(a){var b=Math.ceil(a.length/8),c="";for(var d=0;d<b;d++){var e=a.substr(d*8,8);if(e.length<8)throw new Error("\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0430: \u0434\u043b\u0438\u043d\u043d\u0430 \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043a\u0440\u0430\u0442\u043d\u0430 8 \u0431\u0430\u044b\u0439\u0442\u0430\u043c.");var f,g;e=this.split64by32(e);f=e[0];g=e[1];e=this.decipher(f,g);f=e[0];g=e[1];c+=this.num2block32(f)+this.num2block32(g)}c=this.utf8Encode(c);return c},decryptCBC:function(a,b){var c=Math.ceil(a.length/8),d,e,f;b=this.split64by32(b);d=b[0];b=b[1];var g="";for(var h=0;h<c;h++){var i=a.substr(h*8,8);if(i.length<8)throw new Error("\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0430: \u0434\u043b\u0438\u043d\u043d\u0430 \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043a\u0440\u0430\u0442\u043d\u0430 8 \u0431\u0430\u0439\u0442\u0430\u043c.");var j,k;i=this.split64by32(i);j=i[0];k=i[1];e=j;f=k;i=this.decipher(j,k);j=i[0];k=i[1];j=this.xor(j,d);k=this.xor(k,b);d=e;b=f;g+=this.num2block32(j)+this.num2block32(k)}g=this.utf8Encode(g);return g},F:function(a){var b=a>>>24,c=a<<8>>>24,d=a<<16>>>24;a=a<<24>>>24;b=this.addMod32(this.sBox0[b],this.sBox1[c]);b=this.xor(b,this.sBox2[d]);b=this.addMod32(b,this.sBox3[a]);return b},encipher:function(a,b){var c;for(var d=0;d<16;d++)a=this.xor(a,this.pArray[d]),b=this.xor(this.F(a),b),c=a,a=b,b=c;c=a;a=b;b=c;b=this.xor(b,this.pArray[16]);a=this.xor(a,this.pArray[17]);return[a,b]},decipher:function(a,b){var c;a=this.xor(a,this.pArray[17]);b=this.xor(b,this.pArray[16]);c=a;a=b;b=c;for(var d=15;d>=0;d--)c=a,a=b,b=c,b=this.xor(this.F(a),b),a=this.xor(a,this.pArray[d]);return[a,b]},generateSubkeys:function(a){var b=0,c=0,d,e;for(d=0;d<18;d++){for(e=4;e>0;e--)b=this.fixNegative(b<<8|a.charCodeAt(c)),c=(c+1)%a.length;this.pArray[d]=this.xor(this.pArray[d],b);b=0}e=[0,0];for(d=0;d<18;d+=2)e=this.encipher(e[0],e[1]),this.pArray[d]=e[0],this.pArray[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox0[d]=e[0],this.sBox0[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox1[d]=e[0],this.sBox1[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox2[d]=e[0],this.sBox2[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox3[d]=e[0],this.sBox3[d+1]=e[1]},block32toNum:function(a){return this.fixNegative(a.charCodeAt(0)<<24|a.charCodeAt(1)<<16|a.charCodeAt(2)<<8|a.charCodeAt(3))},num2block32:function(a){return String.fromCharCode(a>>>24)+String.fromCharCode(a<<8>>>24)+String.fromCharCode(a<<16>>>24)+String.fromCharCode(a<<24>>>24)},xor:function(a,b){return this.fixNegative(a^b)},addMod32:function(a,b){return this.fixNegative(a+b|0)},fixNegative:function(a){return a>>>0},split64by32:function(a){var b=a.substring(0,4);a=a.substring(4,8);return[this.block32toNum(b),this.block32toNum(a)]},utf8Decode:function(a){var b="";for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(d&63|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(d&63|128))}return b},utf8Encode:function(a){var b="",c=0,d=0,e=0,f;while(c<a.length)d=a.charCodeAt(c),d<128?(b+=String.fromCharCode(d),c++):d>191&&d<224?(e=a.charCodeAt(c+1),b+=String.fromCharCode((d&31)<<6|e&63),c+=2):(e=a.charCodeAt(c+1),f=a.charCodeAt(c+2),b+=String.fromCharCode((d&15)<<12|(e&63)<<6|f&63),c+=3);return b},base64Encode:function(a){var b="",c,d,e,f,g,h,i=0;while(i<a.length)c=a.charCodeAt(i++),d=a.charCodeAt(i++),e=a.charCodeAt(i++),f=c>>2,c=(c&3)<<4|d>>4,g=(d&15)<<2|e>>6,h=e&63,isNaN(d)?g=h=64:isNaN(e)&&(h=64),b=b+this.keyStr.charAt(f)+this.keyStr.charAt(c)+this.keyStr.charAt(g)+this.keyStr.charAt(h);return b},base64Decode:function(a){var b="",c,d,e,f,g,h=0;a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(h<a.length)d=this.keyStr.indexOf(a.charAt(h++)),e=this.keyStr.indexOf(a.charAt(h++)),f=this.keyStr.indexOf(a.charAt(h++)),g=this.keyStr.indexOf(a.charAt(h++)),d=d<<2|e>>4,e=(e&15)<<4|f>>2,c=(f&3)<<6|g,b=b+String.fromCharCode(d),f!=64&&(b=b+String.fromCharCode(e)),g!=64&&(b=b+String.fromCharCode(c));return b},trimZeros:function(a){return a.replace(/\0+$/g,"")}};a.pArray=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731];a.sBox0=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946];a.sBox1=[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055];a.sBox2=[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504];a.sBox3=[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462];g.exports=a}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
__d("javascript-blowfish",["javascript-blowfish-1.0.5"],(function(a,b,c,d,e,f){e.exports=b("javascript-blowfish-1.0.5")()}),null);
__d("BDClientSignalCollectionTrigger",["regeneratorRuntime","Promise","BDClientConfig","BDCollectionTypeEnum","BDLoggingConstants","BDOperationLogHelper","BdPdcSignalsFalcoEvent","BDServerConfig","BDSignalBuffer","BDUtils","SignalCollectionManager","WebStorage","javascript-blowfish"],(function(a,b,c,d,e,f){"use strict";var g,h=b("BDLoggingConstants").OPERATIONS,i="BDClientSignalCollectionTrigger",j="signal_flush_timestamp",k=!1,l=!1,m=!1,n=0,o=0,p=0,q=30,r=5,s,t,u=b("BDUtils").uuid(),v=b("BDClientConfig").get(),w=Object.freeze({NONE:0,VITAL:1,CRITICAL:2}),x={startSignalCollection:function(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:if(k){c.next=15;break}k=!0;b("BDServerConfig").parseConfig(a);if(v.isParsingDone()){c.next=7;break}b("BDOperationLogHelper").logError(i,h.PARSE_CONFIG_ERROR,{config:JSON.stringify(a)});k=!1;return c.abrupt("return");case 7:a!=null&&(o=a.hbcbc&&a.hbcbc>0?a.hbcbc:o,p=a.hbvbc&&a.hbvbc>0?a.hbvbc:p,q=a.hbbi&&a.hbbi>0?a.hbbi:q);x.startHeartbeatDelayed();t=new(b("Promise"))(function(a,c){try{v.getClientReputationTier()!==0&&(v.getDynamicSignals().length>0&&(x.collectDynamicSignals(),b("BDOperationLogHelper").logInfo(i,h.DYNAMIC_SIGNAL_COLLECTION_STARTED,{ts:Date.now().toString()})),v.getBiometricSignals().length>0&&(x.collectBiometricSignals(),b("BDOperationLogHelper").logInfo(i,h.BIOMETRIC_SIGNAL_COLLECTION_STARTED,{ts:Date.now().toString()}))),a()}catch(a){c(a)}});if(!(v.getClientReputationTier()!==0)){c.next=15;break}c.next=13;return b("regeneratorRuntime").awrap(t);case 13:c.next=15;return b("regeneratorRuntime").awrap(x.startSignalPosting());case 15:k&&!l&&!m&&r>0&&(r-=1,b("BDOperationLogHelper").logWarning(i,h.TRY_RESTARTING_HB),x.startHeartbeatDelayed());case 16:case"end":return c.stop()}},null,this)},retrieveSignals:function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(t);case 2:a.next=4;return b("regeneratorRuntime").awrap(x.postSignals([b("BDCollectionTypeEnum").DYNAMIC,b("BDCollectionTypeEnum").BIOMETRIC,b("BDCollectionTypeEnum").STATIC]));case 4:case"end":return a.stop()}},null,this)},postSignals:function(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(x.collectStaticSignals());case 2:x._postSignalsHelper(b("BDSignalBuffer").getSignalsAsJSONString(a),w.NONE)&&x.setTimestampInStorage(Date.now(),j);case 3:case"end":return c.stop()}},null,this)},_postSignalsHelper:function(a,c){if(a.length<=2)return!1;var d=v.getConfigGenerationTimeStamp(),e=v.getClientReputationTier(),f=x.encryptDataUsingAsid(u,a);a=function(){return{asid:u,ct:d,rt:e,sjd:f,sid:v.sid}};var g=!1;try{c===w.CRITICAL?b("BdPdcSignalsFalcoEvent").logCritical(a):c===w.VITAL?b("BdPdcSignalsFalcoEvent").logImmediately(a):b("BdPdcSignalsFalcoEvent").log(a),g=!0}catch(a){b("BDOperationLogHelper").logError(i,h.BANZAI_LOG_ERROR,a),g=!1}finally{return g}},getInitialVector:function(a){if(a.length!==16){b("BDOperationLogHelper").logError(i,h.INVALID_LENGTH);return""}var c="";for(var d=0;d<8;d++)c+=String.fromCharCode(a.charCodeAt(d)^a.charCodeAt(8+d));return c},encryptDataUsingAsid:function(a,c){if(a.length!==36){b("BDOperationLogHelper").logError(i,h.INVALID_GUID);return c}a=a.slice(19,23)+a.slice(24,36);var d=x.getInitialVector(a);a=new(b("javascript-blowfish"))(a,"cbc");return a.base64Encode(a.encrypt(c,d))},startSignalPosting:function(){var a,c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:a=x.getTimestampInStorage(j);c=Date.now()-a;if(!(c>=v.getFlushDurationByReputationTierMs())){d.next=7;break}d.next=5;return b("regeneratorRuntime").awrap(x.postSignalsIntermittently());case 5:d.next=8;break;case 7:window.setTimeout(function(){x.postSignalsIntermittently()},v.getFlushDurationByReputationTierMs()-c);case 8:case"end":return d.stop()}},null,this)},postSignalsIntermittently:function(){x.postSignals([b("BDCollectionTypeEnum").STATIC]),window.setInterval(function(){x.postSignals([b("BDCollectionTypeEnum").STATIC,b("BDCollectionTypeEnum").DYNAMIC,b("BDCollectionTypeEnum").BIOMETRIC])},v.getFlushDurationByReputationTierMs())},setTimestampInStorage:function(a,c){var d=(g||(g=b("WebStorage"))).getLocalStorage();if(!d){b("BDOperationLogHelper").logWarning(i,h.GET_LOCAL_STORAGE_ERROR);return}d=g.setItemGuarded(d,c,a.toString());d!=null&&b("BDOperationLogHelper").logWarning(i,h.WEB_STORAGE,{error:d.message})},getTimestampInStorage:function(a){var c=(g||(g=b("WebStorage"))).getLocalStorage();if(!c){b("BDOperationLogHelper").logWarning(i,h.GET_LOCAL_STORAGE_ERROR);return 0}c=c.getItem(a);if(c==null)return 0;a=Number.parseInt(c,10);return Number.isFinite(a)?a:0},resetHeartbeatStartedForTest:function(){l=!1,m=!1},startHeartbeatDelayed:function(){if(l||m)return;var a=x.getTimestampInStorage(x.HEARTBEAT_TIMESTAMP_STORAGE_KEY);a=Date.now()-a;try{a>=v.getHeartbeatIntervalMs()?x.startHeartbeat():(window.setTimeout(function(){return x.startHeartbeat()},v.getHeartbeatIntervalMs()-a),m=!0)}catch(c){b("BDOperationLogHelper").logError(i,h.HB_START_FAILURE,{lastBeatSince:a.toString(),hbi:v.getHeartbeatIntervalMs().toString(),e:c})}},HEARTBEAT_TIMESTAMP_STORAGE_KEY:"hb_timestamp",startHeartbeat:function(){!l&&v.getHeartbeatIntervalMs()>0&&(x.collectHeartbeatTimes(o,p),n!==0&&(window.clearInterval(n),b("BDOperationLogHelper").logWarning(i,h.HB_ALREADY_RUNNING)),n=window.setInterval(function(){return x.collectHeartbeatTimes(o,p)},v.getHeartbeatIntervalMs()),l=!0)},collectHeartbeatTimes:function(a,b){if(a<=0&&b<=0)return;a>0&&x.collectHeartbeat(w.CRITICAL);b>0&&x.collectHeartbeat(w.VITAL);(a>1||b>1)&&window.setTimeout(function(){return x.collectHeartbeatTimes(a-1,b-1)},q*1e3)},collectHeartbeat:function(a){var c;c=v==null?void 0:(c=v.getHeartbeatSignal())==null?void 0:(c=c.getSignalCollector(v.getClientReputationTier()))==null?void 0:c.executeSignalCollection();if(c==null){b("BDOperationLogHelper").logError(i,h.HB_COLLECTION_FAILED,{urgency:a.toString()});return}else b("BDOperationLogHelper").logInfo(i,h.HB_COLLECTED,{urgency:a.toString()});x.postHeartbeat(a,c)&&x.setTimestampInStorage(Date.now(),x.HEARTBEAT_TIMESTAMP_STORAGE_KEY)},postHeartbeat:function(a,b){var c={};c[38001]=[b==null?void 0:b.valueOrError];b=JSON.stringify(c);return x._postSignalsHelper(b,a)},collectStaticSignals:function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(x.collectSignalsOneTime(v.getStaticSignals()));case 2:case"end":return a.stop()}},null,this)},collectDynamicSignals:function(){x.stopDynamicSignalCollection(),s=window.setInterval(function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(x.collectSignalsOneTime(v.getDynamicSignals()));case 2:case"end":return a.stop()}},null,this)},v.getPeriodicCollectionIntervalMs())},collectBiometricSignals:function(){x.collectSignalsOneTime(v.getBiometricSignals())},stopDynamicSignalCollection:function(){s!=null&&(window.clearInterval(s),s=null)},collectSignalsOneTime:function(a){var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:c=v.getClientReputationTier();if(!(c!==0)){d.next=4;break}d.next=4;return b("regeneratorRuntime").awrap(b("SignalCollectionManager").get().collectSignals(a,c));case 4:case"end":return d.stop()}},null,this)}};e.exports=x}),null);
__d("BDCometSignalCollectionTrigger",["BDClientSignalCollectionTrigger","BDSignalCollectionData"],(function(a,b,c,d,e,f){"use strict";f.initSignalCollection=a;function a(){b("BDClientSignalCollectionTrigger").startSignalCollection(b("BDSignalCollectionData"))}}),null);
__d("isAdsExcelAddinURI",[],(function(a,b,c,d,e,f){e.exports=a;var g=new RegExp("(^|\\.)fbaddins\\.com$","i"),h=["https"];function a(a){if(a.isEmpty()&&a.toString()!=="#")return!1;return!a.getDomain()&&!a.getProtocol()?!1:h.indexOf(a.getProtocol())!==-1&&g.test(a.getDomain())}}),null);
__d("isValidAsyncSignalURI",[],(function(a,b,c,d,e,f){e.exports=a;var g=new RegExp("((^|\\.)instagram\\.com$)|((^|\\.)wit\\.ai$)|((^|\\.)accountkit\\.com$)","i"),h=["https"];function a(a){if(a.isEmpty()&&a.toString()!=="#")return!1;return!a.getDomain()&&!a.getProtocol()?!1:h.includes(a.getProtocol())&&g.test(a.getDomain())}}),null);
__d("AsyncSignal",["Promise","ErrorGuard","QueryString","Run","TimeSlice","TrackingConfig","URI","ZeroRewrites","getAsyncParams","isAdsExcelAddinURI","isFacebookURI","isMessengerDotComURI","isValidAsyncSignalURI","isWorkplaceDotComURI","memoize","promiseDone"],(function(a,b,c,d,e,f){var g,h,i;function a(a,c){this.data=c||{},this.uri=a.toString(),b("TrackingConfig").domain&&this.uri.charAt(0)=="/"&&(this.uri=b("TrackingConfig").domain+this.uri)}a.prototype.setHandler=function(a){this.handler=a;return this};a.prototype.setTimeout=function(a){this.timeout=a;return this};a.prototype.send=function(){b("TimeSlice").guard(this._send.bind(this),"AsyncSignal send",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};a.prototype._send=function(){var a=this.handler,c=this.data;c.asyncSignal=(Math.random()*1e4|0)+1;var d=b("ZeroRewrites").rewriteURI(new(g||(g=b("URI")))(this.uri));d=b("isFacebookURI")(d)||b("isMessengerDotComURI")(d)||b("isAdsExcelAddinURI")(d)||b("isWorkplaceDotComURI")(d)||b("isValidAsyncSignalURI")(d);if(d)Object.assign(c,b("getAsyncParams")("POST"));else throw new Error("'"+this.uri+"' is an external URL, you should not send async signals to offsite links.");var e=b("QueryString").appendToUrl(this.uri,c);i||(i=new(b("Promise"))(function(a){b("Run").onAfterLoad(a)}));d=i.then(function(){return new(b("Promise"))(function(a,b){var c=new Image();c.onload=a;c.onerror=c.onabort=b;c.src=e})});if(a){var f=!1,j=b("memoize")(function(){(h||(h=b("ErrorGuard"))).applyWithGuard(a,null,[f])});b("promiseDone")(d.then(function(){f=!0,j()},j));this.timeout&&setTimeout(j,this.timeout)}return this};e.exports=a}),null);
__d("AsyncTypedRequest",["AsyncRequest"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){b=a.call(this,b)||this;b.setReplaceTransportMarkers();return b}var c=b.prototype;c.promisePayload=function(b){return a.prototype.promisePayload.call(this,b)};c.setPayloadHandler=function(b){a.prototype.setPayloadHandler.call(this,b);return this};return b}(b("AsyncRequest"));e.exports=a}),null);
__d("StringTransformations",[],(function(a,b,c,d,e,f){"use strict";a={unicodeEscape:function(a){return a.replace(/[^A-Za-z0-9\-\.\:\_\$\/\+\=]/g,function(a){a=a.charCodeAt(0).toString(16);return"\\u"+("0000"+a.toUpperCase()).slice(-4)})},unicodeUnescape:function(a){return a.replace(/(\\u[0-9A-Fa-f]{4})/g,function(a){return String.fromCharCode(parseInt(a.slice(2),16))})}};e.exports=a}),null);
__d("Chromedome",["fbt"],(function(a,b,c,d,e,f,g){f.start=a;function a(a){if(top!==window||document.domain==null||!/(^|\.)facebook\.(com|sg)$/.test(document.domain))return;a=g._("D\u1eebng l\u1ea1i!");var b=g._("\u0110\u00e2y l\u00e0 m\u1ed9t t\u00ednh n\u0103ng c\u1ee7a tr\u00ecnh duy\u1ec7t d\u00e0nh cho c\u00e1c nh\u00e0 ph\u00e1t tri\u1ec3n. N\u1ebfu ai \u0111\u00f3 b\u1ea3o b\u1ea1n sao ch\u00e9p-d\u00e1n n\u1ed9i dung n\u00e0o \u0111\u00f3 v\u00e0o \u0111\u00e2y \u0111\u1ec3 b\u1eadt m\u1ed9t t\u00ednh n\u0103ng c\u1ee7a Facebook ho\u1eb7c \"hack\" t\u00e0i kho\u1ea3n c\u1ee7a ng\u01b0\u1eddi kh\u00e1c, th\u00ec \u0111\u00f3 l\u00e0 h\u00e0nh vi l\u1eeba \u0111\u1ea3o v\u00e0 s\u1ebd khi\u1ebfn h\u1ecd c\u00f3 th\u1ec3 truy c\u1eadp v\u00e0o t\u00e0i kho\u1ea3n Facebook c\u1ee7a b\u1ea1n."),c=g._("Xem {url} \u0111\u1ec3 bi\u1ebft th\u00eam th\u00f4ng tin.",[g._param("url","https://www.facebook.com/selfxss")]);if(window.chrome||window.safari){var d="font-family:helvetica; font-size:20px; ";[[a,d+"font-size:50px; font-weight:bold; color:red; -webkit-text-stroke:1px black;"],[b,d],[c,d],["",""]].map(function(a){window.setTimeout(console.log.bind(console,"\n%c"+a[0].toString(),a[1]))})}else{a=[""," .d8888b.  888                       888","d88P  Y88b 888                       888","Y88b.      888                       888",' "Y888b.   888888  .d88b.  88888b.   888','    "Y88b. 888    d88""88b 888 "88b  888','      "888 888    888  888 888  888  Y8P',"Y88b  d88P Y88b.  Y88..88P 888 d88P",' "Y8888P"   "Y888  "Y88P"  88888P"   888',"                           888","                           888","                           888"];d=(""+b.toString()).match(/.{35}.+?\s+|.+$/g);if(d!=null){b=Math.floor(Math.max(0,(a.length-d.length)/2));for(var e=0;e<a.length||e<d.length;e++){var f=a[e];a[e]=f+new Array(45-f.length).join(" ")+(d[e-b]||"")}}console.log("\n\n\n"+a.join("\n")+"\n\n"+c.toString()+"\n");return}}}),null);
__d("WebStorageMonster",["AsyncRequest","CacheStorage","Event","NetworkStatus","StringTransformations","UserActivity","WebStorage","WebStorageMonsterLoggingURI","ifRequired","isEmpty","killswitch","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";var g,h,i=1e4,j=5,k=!1;function l(a){var c={};for(var d in a){var e=a.getItem(d),f=b("StringTransformations").unicodeEscape(d);typeof e==="string"&&(c[f]=e.length)}return c}function m(a){var c=(g||(g=b("WebStorage"))).getLocalStorage();if(!c||!a.keys)return;p._getLocalStorageKeys().forEach(function(b){a.keys.includes(b)&&c.removeItem(b)})}function n(a){var c=(g||(g=b("WebStorage"))).getLocalStorage();c&&p._getLocalStorageKeys().forEach(function(b){a.some(function(a){return new RegExp(a).test(b)})||c.removeItem(b)})}function o(a,c){a===void 0&&(a=!1);c===void 0&&(c=i);if(b("UserActivity").isActive(c)){var d=Math.max(i,Math.floor(c/j));b("setTimeoutAcrossTransitions")(function(){o(a,d)},d)}else{p.cleanNow(a);var e=!b("killswitch")("WEB_STORAGE_MONSTER_DONT_RESCHEDULE_ON_RUN");if(e){var f=c*j;b("setTimeoutAcrossTransitions")(function(){o(a,f)},f)}}}var p={registerLogoutForm:function(a,c){b("Event").listen(a,"submit",function(a){p.cleanOnLogout(c)})},schedule:function(a){a===void 0&&(a=!1);if(k)return;k=!0;o(a)},cleanNow:function(a){a===void 0&&(a=!1);var c=Date.now(),d={},e=(g||(g=b("WebStorage"))).getLocalStorage();e&&(d.local_storage=l(e));e=g.getSessionStorage();e&&(d.session_storage=l(e));e=!(h||(h=b("isEmpty")))(d);var f=Date.now();d.logtime=f-c;if(e){var i,j=b("WebStorageMonsterLoggingURI").uri;if(j===null)return null;var k=function(){new(b("AsyncRequest"))(j).setData(d).setHandler(function(c){c=c.getPayload();c.keys&&(c.keys=c.keys.map(b("StringTransformations").unicodeUnescape));a||m(c);b("NetworkStatus").reportSuccess()}).setErrorHandler(function(){b("NetworkStatus").reportError()}).setOption("retries",2).send()};if(b("NetworkStatus").isOnline())k();else{f=function(a){a=a.online;a&&(k(),i.remove())};i=b("NetworkStatus").onChange(f)}}},cleanOnLogout:function(a){b("CacheStorage").disablePersistentWrites();b("ifRequired")("AsyncStorage",function(a){a.disablePersistentWrites()});a?n(a):n([]);a=(g||(g=b("WebStorage"))).getSessionStorage();a&&a.clear();b("ifRequired")("AsyncStorage",function(a){a.clear(function(){})})},_getLocalStorageKeys:function(){var a=(g||(g=b("WebStorage"))).getLocalStorage();return a?Object.keys(a):[]}};a=p;e.exports=a}),null);
__d("BootloaderEventsPerf",["invariant","Bootloader","BootloaderEvents","objectEntries","objectValues"],(function(a,b,c,d,e,f,g){f.computeHRData=a;f.computeBLData=c;f.flattenData=d;var h={count:0,downloaded:0,duration:0};function i(a,b,c){return Math.max(0,((c=c)!=null?c:0)-Math.max(a,(c=b)!=null?c:0))}function j(){return{blocking:babelHelpers["extends"]({},h),nonblocking:babelHelpers["extends"]({},h),"default":babelHelpers["extends"]({},h)}}function k(a,b){a.count++,b&&(a.downloaded++,a.duration=Math.max(a.duration,b))}function l(a,c,d,e){var f=b("Bootloader").getResourceState(c);k(a,i(d,f.loadStart,f.loadEnd));f.loadError!=null&&e.add(c)}function m(a,c,d,e){var f=j();for(var a=b("objectEntries")(a),h=Array.isArray(a),i=0,a=h?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(h){if(i>=a.length)break;k=a[i++]}else{i=a.next();if(i.done)break;k=i.value}k=k;var m=k[0];k=k[1];for(var k=k,n=Array.isArray(k),o=0,k=n?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=k.length)break;p=k[o++]}else{o=k.next();if(o.done)break;p=o.value}p=p;var q=p[0];p=p[1].type;var r=void 0;switch(p){case"async":r=d;break;case"js":case"css":r=f;break;default:p,g(0,3721)}l(r[m],q,c,e)}}return f}function a(a){var b,c=a.startTime,d=new Set(),e=m(a.rsrcs,c,j(),d);return{source:a.source,sourceDetail:a.sourceDetail,timeslice_context:(b=a.timesliceContext)==null?void 0:b.name,start_time:c,err_count:d.size,resources:{untiered:e},durations:{jsmods_wait:a.jsmodsStart-c,jsmods:a.jsmodsEnd-a.jsmodsStart,jsmods_done_wait:a.jsmodsEnd-c,download_done_wait:a.logTime-c}}}function c(a){var c=a.startTime,d=0,e=0,f=0,g=0;for(var h=a.components,l=Array.isArray(h),n=0,h=l?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(l){if(n>=h.length)break;o=h[n++]}else{n=h.next();if(n.done)break;o=n.value}o=o;o=b("Bootloader").getComponentTiming(o);d=Math.max(d,o.tierTwoEnd-o.tierTwoStart);e=Math.max(e,o.tierTwoEnd-c);f=Math.max(f,o.tierThreeEnd-o.tierThreeStart);g=Math.max(g,o.tierThreeEnd-c)}o=new Set();n=j();l=m(a.tierOne,c,n,o);h=m(a.tierTwo,c,n,o);var p=m(a.tierThree,c,n,o),q=n.blocking.downloaded!=0,r=j(),s=b("BootloaderEvents").newResourceMapSet(),t=new Set(),u=[a.tierOne,a.tierTwo,a.tierThree];for(var v=0;v<u.length;v++){var w=u[v];for(var w=b("objectValues")(w),x=Array.isArray(w),y=0,w=x?w:w[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var z;if(x){if(y>=w.length)break;z=w[y++]}else{y=w.next();if(y.done)break;z=y.value}z=z;for(var z=z.keys(),A=Array.isArray(z),B=0,z=A?z:z[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var C;if(A){if(B>=z.length)break;C=z[B++]}else{B=z.next();if(B.done)break;C=B.value}C=C;t.add(C)}}}C=0;B=0;A=0;for(var z=a.beRequests.values(),y=Array.isArray(z),x=0,z=y?z:z[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(y){if(x>=z.length)break;w=z[x++]}else{x=z.next();if(x.done)break;w=x.value}u=w;C+=i(c,c,u.requestStart);B+=u.serverGenTime;A+=u.jsmodsEnd-u.jsmodsStart;k(r[q?"blocking":"nonblocking"],u.responseStart-u.requestStart);for(var v=b("objectEntries")(u.rsrcs),w=Array.isArray(v),u=0,v=w?v:v[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var D;if(w){if(u>=v.length)break;D=v[u++]}else{u=v.next();if(u.done)break;D=u.value}D=D;var E=D[0];D=D[1];for(var D=D,F=Array.isArray(D),G=0,D=F?D:D[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var H;if(F){if(G>=D.length)break;H=D[G++]}else{G=D.next();if(G.done)break;H=G.value}H=H;var I=H[0];H=H[1];t.has(I)||s[E].set(I,H)}}}I=m(s,c,n,o);return{ref:a.ref,components:a.components,timeslice_context:(H=a.timesliceContext)==null?void 0:H.name,start_time:c,err_count:o.size,resources:{t1:l,t2:h,t3:p,be:r,unpredicted:I,async:n},durations:{be_start_wait:C,be_server_gen:B,be_jsmods:A,callback_wait:a.callbackStart-c,callback:a.callbackEnd-a.callbackStart,bootload_done_wait:a.callbackEnd-c,rdfd_requirelazy:d,rdfd_done_wait:e,rd_requirelazy:f,rd_done_wait:g}}}function d(a){a.start_time;var c=a.resources,d=a.durations;a=babelHelpers.objectWithoutPropertiesLoose(a,["start_time","resources","durations"]);for(var c=b("objectEntries")(c),e=Array.isArray(c),f=0,c=e?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=c.length)break;g=c[f++]}else{f=c.next();if(f.done)break;g=f.value}g=g;var h=g[0];g=g[1];for(var g=b("objectEntries")(g),i=Array.isArray(g),j=0,g=i?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(i){if(j>=g.length)break;k=g[j++]}else{j=g.next();if(j.done)break;k=j.value}k=k;var l=k[0];k=k[1];for(var k=b("objectEntries")(k),m=Array.isArray(k),n=0,k=m?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=k.length)break;o=k[n++]}else{n=k.next();if(n.done)break;o=n.value}o=o;var p=o[0];o=o[1];a[h+"_"+l+"_resources_"+p]=Math.round(Number(o))}}}for(var p=b("objectEntries")(d),o=Array.isArray(p),n=0,p=o?p:p[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(o){if(n>=p.length)break;m=p[n++]}else{n=p.next();if(n.done)break;m=n.value}k=m;l=k[0];j=k[1];a[l+"_duration"]=Math.round(Number(j))}return a}}),null);
__d("JavascriptWebErrorFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1828905");c=b("FalcoLoggerInternal").create("javascript_web_error",a);e.exports=c}),null);
__d("ErrorTransport",["JavascriptWebErrorFalcoEvent"],(function(a,b,c,d,e,f){"use strict";f.log=a;function a(a){b("JavascriptWebErrorFalcoEvent").log(function(){return a})}}),null);
__d("AccessibilityWebAssistiveTechTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:AccessibilityWebAssistiveTechLoggerConfig")}),null);
__d("ErrorFilter",["performanceNow"],(function(a,b,c,d,e,f){"use strict";f.shouldLog=a;var g,h=6,i=6e4,j=10*i,k=new Map(),l=0;function m(){var a=(g||(g=b("performanceNow")))();if(a>l+i){var c=a-j;for(var d=k,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(e){if(f>=d.length)break;h=d[f++]}else{f=d.next();if(f.done)break;h=f.value}h=h;var m=h[0];h=h[1];h.lastAccessed<c&&k["delete"](m)}l=a}}function n(a){m();var c=(g||(g=b("performanceNow")))(),d=k.get(a);if(d==null){k.set(a,{dropped:0,logged:[c],lastAccessed:c});return 1}a=d.dropped;var e=d.logged;d.lastAccessed=c;while(e[0]<c-i)e.shift();if(e.length<h){d.dropped=0;e.push(c);return a+1}else{d.dropped++;return null}}function a(a){return n(a.hash)}}),null);
__d("ErrorPoster",["ErrorDynamicData","ErrorFilter","ErrorTransport"],(function(a,b,c,d,e,f){"use strict";f.createErrorPayload=o;f.postError=a;var g=1024,h=[],i=0;function j(a){return String(a)}function k(a){return a==null?null:String(a)}function l(a,b){var c={};b&&b.forEach(function(a){c[a]=!0});Object.keys(a).forEach(function(b){a[b]?c[b]=!0:c[b]&&delete c[b]});return Object.keys(c)}function m(a){return((a=a)!=null?a:[]).map(function(a){return{column:k(a.column),identifier:a.identifier,line:k(a.line),script:a.script}})}function n(a){a=String(a);return a.length>g?a.substring(0,g-3)+"...":a}function o(a,c){var d;d={appId:k(c.appId),cavalry_lid:c.cavalry_lid,access_token:b("ErrorDynamicData").access_token,ancestor_hash:a.hash,cerror:c.cerror,clientTime:j(a.clientTime),column:a.column,componentStackFrames:m(a.componentStackFrames),events:a.events,extra:l(a.extra,c.extra),forcedKey:a.forcedKey,guardList:a.guardList,line:a.line,loggingFramework:c.loggingFramework,messageFormat:n(a.messageFormat),messageParams:a.messageParams.map(n),name:a.name,sample_weight:k(c.sample_weight),script:a.script,site_category:c.site_category,stackFrames:m(a.stackFrames),type:a.type,page_time:k(a.page_time),project:a.project,push_phase:c.push_phase,report_source:c.report_source,report_source_ref:c.report_source_ref,script_path:c.script_path,server_revision:k(c.server_revision),spin:k(c.spin),svn_rev:String(c.client_revision),additional_client_revisions:Array.from((d=c.additional_client_revisions)!=null?d:[]).map(j),taalOpcodes:a.taalOpcodes==null?null:a.taalOpcodes.map(function(a){return a}),web_session_id:c.web_session_id,version:"3",xFBDebug:a.xFBDebug};c=a.blameModule;var e=a.deferredSource;c!=null&&(d.blameModule=String(c));e&&e.stackFrames&&(d.deferredSource={stackFrames:m(e.stackFrames)});a.metadata&&(d.metadata=a.metadata);a.loadingUrls&&(d.loadingUrls=a.loadingUrls);a.serverHash!=null&&(d.serverHash=a.serverHash);a.windowLocationURL!=null&&(d.windowLocationURL=a.windowLocationURL);a.loggingSource!=null&&(d.loggingSource=a.loggingSource);return d}function a(a,c){i++;var d=b("ErrorFilter").shouldLog(a);if(d==null)return!1;c=o(a,c);Object.assign(c,{ancestors:h.slice(),clientWeight:j(d),page_position:j(i)});h.length<15&&h.push(a.hash);b("ErrorTransport").log(c);return!0}}),null);
__d("ComposerStoryCreateMutation.graphql",[],(function(a,aa,ba,ca,b,da){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"UFI2CommentsProvider_commentsKey"},aa={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextEnableComment"},ba={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsAdPreview"},ca={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsAggregatedShare"},b={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsStorySet"},da={defaultValue:null,kind:"LocalArgument",name:"displayCommentsFeedbackContext"},ea={defaultValue:null,kind:"LocalArgument",name:"feedLocation"},fa={defaultValue:null,kind:"LocalArgument",name:"feedbackSource"},ga={defaultValue:null,kind:"LocalArgument",name:"focusCommentID"},ha={defaultValue:null,kind:"LocalArgument",name:"gridMediaWidth"},ia={defaultValue:null,kind:"LocalArgument",name:"input"},ja={defaultValue:!1,kind:"LocalArgument",name:"isDraftGeminiPost"},ka={defaultValue:null,kind:"LocalArgument",name:"isFeed"},la={defaultValue:null,kind:"LocalArgument",name:"isFunFactPost"},ma={defaultValue:null,kind:"LocalArgument",name:"isFundraiser"},na={defaultValue:null,kind:"LocalArgument",name:"isGroup"},oa={defaultValue:!1,kind:"LocalArgument",name:"isLivingRoom"},pa={defaultValue:null,kind:"LocalArgument",name:"isPageNewsFeed"},qa={defaultValue:!1,kind:"LocalArgument",name:"isSocialLearning"},ra={defaultValue:null,kind:"LocalArgument",name:"isTimeline"},sa={defaultValue:null,kind:"LocalArgument",name:"privacySelectorRenderLocation"},ta={defaultValue:null,kind:"LocalArgument",name:"renderLocation"},ua={defaultValue:null,kind:"LocalArgument",name:"scale"},va={defaultValue:!1,kind:"LocalArgument",name:"useDefaultActor"},wa=[{kind:"Variable",name:"data",variableName:"input"}],xa={alias:null,args:null,kind:"ScalarField",name:"story_id",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},ya={alias:null,args:null,kind:"ScalarField",name:"legacy_story_hideable_id",storageKey:null},d=[c],e=[{kind:"Variable",name:"location",variableName:"renderLocation"}],za={alias:null,args:[{kind:"Literal",name:"site",value:"comet"}],kind:"ScalarField",name:"url",storageKey:'url(site:"comet")'},Aa={alias:null,args:null,concreteType:"LearningCourseModule",kind:"LinkedField",name:"module",plural:!1,selections:d,storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},g=[f],Ba={alias:"docs_and_files",args:null,concreteType:"GroupFilesAndDocsConnection",kind:"LinkedField",name:"group_docs_and_files",plural:!1,selections:g,storageKey:null},Ca={alias:null,args:null,kind:"ScalarField",name:"logging_token",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},Da={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"cache_id",storageKey:null}],type:"Cacheable",abstractKey:"__isCacheable"},j={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},k=[j],Ea={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:k,storageKey:null},Fa={args:null,kind:"FragmentSpread",name:"CometFeedUnit_feedUnit"},Ga={kind:"InlineFragment",selections:d,type:"Story",abstractKey:null},Ha={alias:null,args:null,kind:"ScalarField",name:"creation_time",storageKey:null},Ia={alias:null,args:null,concreteType:"BackdatedTime",kind:"LinkedField",name:"backdated_time",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"time",storageKey:null}],storageKey:null},Ja=[Fa],l=[i,c],Ka={alias:null,args:null,kind:"ScalarField",name:"group_id",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"debug_info",storageKey:null},o={alias:null,args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ad_id",storageKey:null},i],storageKey:null},La={alias:null,args:null,kind:"ScalarField",name:"context_actor_hovercard",storageKey:null},Ma={alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"associated_group",plural:!1,selections:[La,c],storageKey:null},c],storageKey:null},p={documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFeedUnitStoryStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"},q={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFeedUnitGoodwillMemoryStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"GoodwillCometStory",abstractKey:null},r={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometPYMKQPFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"PaginatedPeopleYouMayKnowFeedUnit",abstractKey:null},Na={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFriendRequestsFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"FriendRequestsFeedUnit",abstractKey:null},s={alias:null,args:null,concreteType:"QuickPromotionFeedUnitItem",kind:"LinkedField",name:"quick_promotion_items",plural:!0,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"quick_promotion",plural:!1,selections:d,storageKey:null}],storageKey:null},Oa={kind:"InlineFragment",selections:[s,{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFeedUnitQuickPromotionStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"QuickPromotionNativeTemplateFeedUnit",abstractKey:null},Pa={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"GroupsCometGYSJFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"GroupsYouShouldJoinFeedUnit",abstractKey:null},Qa={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometGroupsSuggestionFeedUnitStrategy_unit",fragmentPropName:"unit",kind:"ModuleImport"}],type:"GroupsSuggestionUnit",abstractKey:null},Ra={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometPYMIQPFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"PaginatedGroupsPeopleYouMayInviteFeedUnit",abstractKey:null},Sa={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometPYMAQPFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"PagesYouMayAdvertiseFeedUnit",abstractKey:null},Ta={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"GeminiPYSFQPFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"PeopleYouShouldFollowAtWorkFeedUnit",abstractKey:null},Ua={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometSPFFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"SuggestedPublicEntitiesToFollowFeedUnit",abstractKey:null},Va={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CoronavirusCommunityHelpFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"CoronavirusCommunityHelpFeedUnit",abstractKey:null},Wa={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometMarketplaceShowcaseFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"ShowcaseMarketplaceFeedUnit",abstractKey:null},Xa={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometEndOfFeedUpsellStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"EndOfFeedUpsellFeedUnit",abstractKey:null};s={kind:"InlineFragment",selections:[s],type:"QuickPromotionFeedUnit",abstractKey:null};var Ya={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"TrackingData",kind:"LinkedField",name:"trackingdata",plural:!1,selections:d,storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"viewability_config",storageKey:null},{alias:null,args:null,concreteType:"CometClientViewConfig",kind:"LinkedField",name:"client_view_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_delay_log_impression",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"use_banzai_signal_imp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"use_banzai_vital_imp",storageKey:null}],storageKey:null}],type:"Story",abstractKey:null}],type:"TrackableFeedUnit",abstractKey:"__isTrackableFeedUnit"},Za={kind:"InlineFragment",selections:[i,{kind:"InlineFragment",selections:[n,o,Ma,p],type:"Story",abstractKey:null},q,r,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,s,Ya],type:"FeedUnit",abstractKey:"__isFeedUnit"},$a={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},v=[u],ab={alias:null,args:null,concreteType:"LearningCourseUnitModulesEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"LearningCourseModule",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:"contentType",args:null,kind:"ScalarField",name:"content_type",storageKey:null},c,{alias:"isCompleted",args:null,kind:"ScalarField",name:"has_viewer_completed",storageKey:null},t,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"thumbnail",plural:!1,selections:v,storageKey:null}],storageKey:null}],storageKey:null},w={kind:"Variable",name:"use_default_actor",variableName:"useDefaultActor"},x=[w],bb={kind:"TypeDiscriminator",abstractKey:"__isActor"},y={kind:"Variable",name:"scale",variableName:"scale"},z={alias:"profile_picture_depth_0",args:[{kind:"Literal",name:"height",value:32},y,{kind:"Literal",name:"width",value:32}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:v,storageKey:null},cb=[{kind:"Literal",name:"height",value:24},y,{kind:"Literal",name:"width",value:24}],A={alias:"profile_picture_depth_1",args:cb,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:v,storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"gender",storageKey:null},C={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]},db={kind:"InlineFragment",selections:[B,C],type:"User",abstractKey:null},eb={alias:null,args:x,concreteType:null,kind:"LinkedField",name:"viewer_actor",plural:!1,selections:[i,c,bb,t,z,A,db],storageKey:null},fb=[{kind:"Variable",name:"feedback_source_integer",variableName:"feedbackSource"}];w={alias:null,args:[{kind:"Variable",name:"location",variableName:"feedLocation"},w],kind:"ScalarField",name:"can_viewer_comment",storageKey:null};var gb={alias:null,args:null,kind:"ScalarField",name:"subscription_target_id",storageKey:null},hb={alias:null,args:null,kind:"ScalarField",name:"broadcast_is_ama_enabled",storageKey:null},ib={alias:null,args:null,kind:"ScalarField",name:"broadcast_status",storageKey:null},jb={alias:null,args:null,kind:"ScalarField",name:"is_gaming_video",storageKey:null},kb={alias:null,args:x,kind:"ScalarField",name:"comment_composer_placeholder",storageKey:null},lb={alias:"comment_count",args:null,concreteType:"TopLevelCommentsConnection",kind:"LinkedField",name:"top_level_comments",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null}],storageKey:null},mb={alias:"toplevel_comment_count",args:[{kind:"Literal",name:"orderby",value:"toplevel"}],concreteType:"TopLevelCommentsConnection",kind:"LinkedField",name:"top_level_comments",plural:!1,selections:g,storageKey:'top_level_comments(orderby:"toplevel")'},nb={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"threading_config",plural:!1,selections:[i],storageKey:null},ob={alias:null,args:null,kind:"ScalarField",name:"can_viewer_pin_live_comments",storageKey:null},pb={alias:null,args:null,concreteType:"BroadcastPinnedCommentEvent",kind:"LinkedField",name:"latest_pinned_comment_event",plural:!1,selections:[{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"pinned_comment",plural:!1,selections:d,storageKey:null},c],storageKey:null},qb={alias:null,args:null,concreteType:"WorkAMAUFIAnswerEventActionLinksCommentModuleRenderer",kind:"LinkedField",name:"work_answer_event_action_links_comment_renderer",plural:!1,selections:[{documentName:"CometUFICommentActionLinks_feedback_work_answer_event_action_links_comment_renderer",fragmentName:"GeminiUFIAMABroadcastAnswerActionLinks_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],storageKey:null},D={kind:"Variable",name:"feed_context_enable_comment",variableName:"displayCommentsContextEnableComment"},E={kind:"Variable",name:"feed_context_fb_feed_location",variableName:"feedLocation"},F={kind:"Variable",name:"feed_context_is_ad_preview",variableName:"displayCommentsContextIsAdPreview"},G={kind:"Variable",name:"feed_context_is_aggregated_share",variableName:"displayCommentsContextIsAggregatedShare"},H={kind:"Variable",name:"feed_context_is_story_set",variableName:"displayCommentsContextIsStorySet"},I={kind:"Variable",name:"feedback_context",variableName:"displayCommentsFeedbackContext"},rb={kind:"Variable",name:"feedback_source",variableName:"feedbackSource"},J={kind:"Variable",name:"focus_comment_id",variableName:"focusCommentID"},K={kind:"Literal",name:"is_initial_fetch",value:!0},sb=[D,E,F,G,H,I,rb,J,K,{kind:"Literal",name:"is_top_level",value:!0}],tb={alias:null,args:null,kind:"ScalarField",name:"comment_order",storageKey:null},ub={alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"expanded_sub_reply_parents",plural:!0,selections:d,storageKey:null},vb={alias:null,args:null,kind:"ScalarField",name:"is_initially_expanded",storageKey:null},wb={alias:null,args:null,kind:"ScalarField",name:"page_size",storageKey:null},xb={alias:null,args:null,kind:"ScalarField",name:"reply_comment_order",storageKey:null},yb={alias:null,args:null,kind:"ScalarField",name:"should_render_composer_preemptively",storageKey:null},zb={alias:null,args:null,kind:"ScalarField",name:"after_count",storageKey:null},Ab={alias:null,args:null,kind:"ScalarField",name:"before_count",storageKey:null},Bb={alias:null,args:null,kind:"ScalarField",name:"legacy_fbid",storageKey:null},L={alias:null,args:null,concreteType:"WorkUserInfo",kind:"LinkedField",name:"work_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_active_account",storageKey:null}],storageKey:null},M={alias:null,args:null,kind:"ScalarField",name:"is_verified",storageKey:null},N={alias:null,args:null,kind:"ScalarField",name:"short_name",storageKey:null};z={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"author",plural:!1,selections:[i,c,t,bb,z,A,{kind:"InlineFragment",selections:[m],type:"Entity",abstractKey:"__isEntity"},{kind:"InlineFragment",selections:[L,M,N,m,B,C],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[M,m],type:"Page",abstractKey:null}],storageKey:null};A={alias:null,args:null,kind:"ScalarField",name:"is_author_weak_reference",storageKey:null};C={alias:null,args:null,kind:"ScalarField",name:"created_time",storageKey:null};var Cb={alias:null,args:null,kind:"ScalarField",name:"spam_display_mode",storageKey:null},Db={alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:["StoryAttachmentAnimatedImageShareStyleRenderer","StoryAttachmentDonationStyleRenderer","StoryAttachmentFallbackStyleRenderer","StoryAttachmentPhotoStyleRenderer","StoryAttachmentQuiltImageStyleRenderer","StoryAttachmentStickerStyleRenderer","StoryAttachmentStickerAvatarStyleRenderer","StoryAttachmentVideoAutoplayStyleRenderer","StoryAttachmentVideoStyleRenderer","StoryAttachmentTipJarPaymentStyleRenderer","StoryAttachmentCommentPlaceInfoStyleRenderer","StoryAttachmentChatCommandStyleRenderer","StoryAttachmentPageInCommentStyleRenderer","StoryAttachmentInstantGamesTournamentActivityStyleRenderer","StoryAttachmentInstantGamesUpdateCommentStyleRenderer","StoryAttachmentSubscriptionGiftStyleRenderer"]}],concreteType:null,kind:"LinkedField",name:"style_type_renderer",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentAnimatedImageShareAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentAnimatedImageShareStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentDonationAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentDonationStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentFallbackAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentFallbackStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentImageAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentPhotoStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentQuiltImageAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentQuiltImageStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentStickerAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentStickerStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentStickerAvatarAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentStickerAvatarStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentVideoAutoplayAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentVideoAutoplayStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentVideoAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentVideoStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentTipJarPaymentAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentTipJarPaymentStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentPlaceInfoAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentCommentPlaceInfoStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentChatCommandAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentChatCommandStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentPageInCommentAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentPageInCommentStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentInstantGamesTournamentActivityAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentInstantGamesTournamentActivityStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentInstantGamesUpdateCommentAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentInstantGamesUpdateCommentStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFISubscriptionGiftingAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentSubscriptionGiftStyleRenderer",abstractKey:null}],storageKey:'style_type_renderer(supported:["StoryAttachmentAnimatedImageShareStyleRenderer","StoryAttachmentDonationStyleRenderer","StoryAttachmentFallbackStyleRenderer","StoryAttachmentPhotoStyleRenderer","StoryAttachmentQuiltImageStyleRenderer","StoryAttachmentStickerStyleRenderer","StoryAttachmentStickerAvatarStyleRenderer","StoryAttachmentVideoAutoplayStyleRenderer","StoryAttachmentVideoStyleRenderer","StoryAttachmentTipJarPaymentStyleRenderer","StoryAttachmentCommentPlaceInfoStyleRenderer","StoryAttachmentChatCommandStyleRenderer","StoryAttachmentPageInCommentStyleRenderer","StoryAttachmentInstantGamesTournamentActivityStyleRenderer","StoryAttachmentInstantGamesUpdateCommentStyleRenderer","StoryAttachmentSubscriptionGiftStyleRenderer"])'},{alias:null,args:null,kind:"ScalarField",name:"style_list",storageKey:null}],storageKey:null},O={kind:"Variable",name:"feed_location",variableName:"feedLocation"},P=[O],Eb={alias:null,args:P,kind:"ScalarField",name:"comment_menu_tooltip",storageKey:null},Fb={alias:null,args:P,kind:"ScalarField",name:"should_show_comment_menu",storageKey:null},Gb={alias:null,args:null,concreteType:"PrivateReplyContext",kind:"LinkedField",name:"private_reply_context",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],storageKey:null},Hb={alias:null,args:null,concreteType:"PrivateReplyContext",kind:"LinkedField",name:"page_private_reply",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"private_reply_render",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometUFICommentPrivateReplyLink_feedback",fragmentName:"CometUFICommentPrivateReplyLinkRenderer_privateReplyCometRenderer",fragmentPropName:"privateReplyCometRenderer",kind:"ModuleImport"}],type:"PagesMessagingPrivateReplyCometRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentPrivateReplyLink_feedback",fragmentName:"BizInboxCommentPrivateReplyLinkRenderer_privateReplyBizRenderer",fragmentPropName:"privateReplyBizRenderer",kind:"ModuleImport"}],type:"BizMessagingPrivateReplyRenderer",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:d,storageKey:null}],storageKey:null},Q={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},Ib={alias:null,args:x,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"viewer_feedback_reaction_info",plural:!1,selections:[Q,c],storageKey:null},Jb={alias:null,args:null,concreteType:"FeedbackReaction",kind:"LinkedField",name:"supported_reactions",plural:!0,selections:[Q],storageKey:null};Q={alias:null,args:[{kind:"Literal",name:"orderby",value:["COUNT_DESC","REACTION_TYPE"]}],concreteType:"TopReactionsConnection",kind:"LinkedField",name:"top_reactions",plural:!1,selections:[{alias:null,args:null,concreteType:"TopReactionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"reaction_count",storageKey:null},{alias:null,args:null,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"node",plural:!1,selections:[Q,c,{alias:null,args:null,kind:"ScalarField",name:"reaction_type",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:'top_reactions(orderby:["COUNT_DESC","REACTION_TYPE"])'};var Kb={alias:null,args:null,concreteType:"ReactorsOfContentConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[f,{alias:null,args:null,kind:"ScalarField",name:"is_empty",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"count_reduced",storageKey:null}],storageKey:null},Lb={alias:null,args:x,kind:"ScalarField",name:"can_viewer_react",storageKey:null},Mb={alias:null,args:null,concreteType:"PublicConversationsExperimentContext",kind:"LinkedField",name:"public_conversations_context",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"comment_vote_ui_version",storageKey:null}],storageKey:null},Nb={alias:null,args:null,kind:"ScalarField",name:"should_show_top_reactions",storageKey:null};D=[D,E,F,G,H,I,rb,J,K,{kind:"Literal",name:"is_top_level",value:!1}];E={alias:null,args:null,kind:"ScalarField",name:"upvote_downvote_total",storageKey:null};F={alias:null,args:null,kind:"ScalarField",name:"viewer_comment_vote_state",storageKey:null};G={alias:null,args:null,kind:"ScalarField",name:"work_ama_answer_status",storageKey:null};H={alias:null,args:null,concreteType:"PageAdminActorInfo",kind:"LinkedField",name:"page_admin_actor_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"creator_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creator_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creator_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"page_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"profile_uri",storageKey:null}],storageKey:null};I={alias:null,args:null,kind:"ScalarField",name:"is_author_banned_by_content_owner",storageKey:null};J={alias:null,args:null,kind:"ScalarField",name:"can_viewer_upvote_downvote",storageKey:null};K={alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"comment_parent",plural:!1,selections:[c,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"author",plural:!1,selections:[i,t,c,{kind:"InlineFragment",selections:[N,B],type:"User",abstractKey:null}],storageKey:null}],storageKey:null};N={alias:null,args:null,concreteType:"EditHistoryConnection",kind:"LinkedField",name:"edit_history",plural:!1,selections:g,storageKey:null};B={alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"parent_feedback",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_viewer_ban_user",storageKey:null},w,c,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"viewer_acts_as_page",plural:!1,selections:d,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_fbid",storageKey:null},{alias:null,args:null,concreteType:"PoliticalFigureData",kind:"LinkedField",name:"political_figure_data",plural:!1,selections:[t,{alias:null,args:null,concreteType:"PoliticalOffice",kind:"LinkedField",name:"political_office",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"generic_title",storageKey:null},c],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"best_profile",plural:!1,selections:l,storageKey:null},c],storageKey:null}],storageKey:null};var R=[{kind:"Literal",name:"translation_type",value:"ORIGINAL"}],S={alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null},U=[{kind:"Literal",name:"delight_surface",value:"COMMENT"}],V=[y];u=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scale",storageKey:null},u,{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}];var W={kind:"InlineFragment",selections:d,type:"Node",abstractKey:"__isNode"},Ob={alias:null,args:null,kind:"ScalarField",name:"category_type",storageKey:null},Pb={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},X={alias:null,args:null,concreteType:"WorkForeignEntityInfo",kind:"LinkedField",name:"work_foreign_entity_info",plural:!1,selections:[Pb],storageKey:null};L={kind:"InlineFragment",selections:[X,L],type:"User",abstractKey:null};X={kind:"InlineFragment",selections:[X,{alias:null,args:null,kind:"ScalarField",name:"work_official_status",storageKey:null}],type:"Group",abstractKey:null};var Y={alias:null,args:null,kind:"ScalarField",name:"entity_is_weak_reference",storageKey:null};U={alias:null,args:R,concreteType:null,kind:"LinkedField",name:"preferred_body",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"translation_type",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DelightAtRange",kind:"LinkedField",name:"delight_ranges",plural:!0,selections:[S,T,{alias:null,args:null,concreteType:"TextDelightCampaign",kind:"LinkedField",name:"campaign",plural:!1,selections:[i,{alias:null,args:U,concreteType:"TextDelightStylePair",kind:"LinkedField",name:"delight_styles",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"style",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:'delight_styles(delight_surface:"COMMENT")'},{alias:null,args:U,concreteType:"DelightsAnimation",kind:"LinkedField",name:"delight_asset",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"animation_uri",storageKey:null}],storageKey:'delight_asset(delight_surface:"COMMENT")'},c],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ImageAtRange",kind:"LinkedField",name:"image_ranges",plural:!0,selections:[S,T,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity_with_image",plural:!1,selections:[i,{alias:null,args:V,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:u,storageKey:null},W],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"InlineStyleAtRange",kind:"LinkedField",name:"inline_style_ranges",plural:!0,selections:[S,T,{alias:null,args:null,kind:"ScalarField",name:"inline_style",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AggregatedEntitiesAtRange",kind:"LinkedField",name:"aggregated_ranges",plural:!0,selections:[S,T,f,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"sample_entities",plural:!0,selections:[i,{kind:"InlineFragment",selections:[c,t],type:"User",abstractKey:null},W],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[i,{kind:"TypeDiscriminator",abstractKey:"__isEntity"},za,{alias:"mobileUrl",args:[{kind:"Literal",name:"site",value:"mobile"}],kind:"ScalarField",name:"url",storageKey:'url(site:"mobile")'},{kind:"InlineFragment",selections:[c,{kind:"InlineFragment",selections:[{alias:"profile_url",args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"Entity",abstractKey:"__isEntity"}],type:"Actor",abstractKey:"__isActor"},{kind:"InlineFragment",selections:[{documentName:"CometTextWithEntitiesRelay_textWithEntities",fragmentName:"GroupsCometHashtagsStoryMessageHashtagLink_hashtag",fragmentPropName:"hashtag",kind:"ModuleImport"}],type:"GroupHashtag",abstractKey:null},{kind:"InlineFragment",selections:[Ob,{alias:null,args:null,kind:"ScalarField",name:"verification_status",storageKey:null},c,M,{documentName:"CometTextWithEntitiesRelay_textWithEntities",fragmentName:"PagesCometPageLink_page",fragmentPropName:"page",kind:"ModuleImport"}],type:"Page",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"external_url",storageKey:null}],type:"ExternalUrl",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"time_index",storageKey:null}],type:"VideoTimeIndex",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"web_link",plural:!1,selections:[i,m,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"fbclid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lynx_mode",storageKey:null}],type:"ExternalWebLink",abstractKey:null}],storageKey:null}],type:"WebLinkable",abstractKey:"__isWebLinkable"},L,X,W],storageKey:null},Y,S,T],storageKey:null},{alias:null,args:null,concreteType:"ColorAtRange",kind:"LinkedField",name:"color_ranges",plural:!0,selections:[S,T,{alias:null,args:null,kind:"ScalarField",name:"hex_rgb_color_with_pound_key",storageKey:null}],storageKey:null},j],type:"TextWithEntities",abstractKey:null}],storageKey:'preferred_body(translation_type:"ORIGINAL")'};M={alias:null,args:null,concreteType:"PostTranslatability",kind:"LinkedField",name:"translatability_for_viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"source_dialect_name",storageKey:null}],storageKey:null};var Qb={alias:null,args:null,kind:"ScalarField",name:"translation_available_for_viewer",storageKey:null},Rb={alias:null,args:null,kind:"ScalarField",name:"is_hidden_by_content_owner",storageKey:null},Sb={alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"if_viewer_can_share",plural:!1,selections:[c,{documentName:"CometUFICommentActionLinks_comment__if_viewer_can_share",fragmentName:"CometUFICommentShareActionLink_comment",fragmentPropName:"comment",kind:"ModuleImport"}],storageKey:null};R={alias:"body_renderer",args:R,concreteType:null,kind:"LinkedField",name:"preferred_body",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometUFICommentBody_comment",fragmentName:"CometUFICommentBodyTextWithEntities_textWithEntities",fragmentPropName:"textWithEntities",kind:"ModuleImport"}],type:"TextWithEntities",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentBody_comment",fragmentName:"CometUFICommentBodyComposedTextWithEntities_composedTextWithEntities",fragmentPropName:"composedTextWithEntities",kind:"ModuleImport"}],type:"FBMarkdownCommentBody",abstractKey:null}],storageKey:'preferred_body(translation_type:"ORIGINAL")'};var Tb={alias:null,args:null,kind:"ScalarField",name:"timestamp_in_video",storageKey:null},Ub={alias:null,args:null,kind:"ScalarField",name:"written_while_video_was_live",storageKey:null},Vb={alias:null,args:P,concreteType:null,kind:"LinkedField",name:"author_user_signals_renderer",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometUFICommentBody_comment_author_user_signals_renderer",fragmentName:"CometUFICommentActorMultipleUserSignalsRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"CometUFICommentActorMultipleUserSignalsRenderer",abstractKey:null}],storageKey:null},Z={kind:"Literal",name:"is_comet",value:!0};Z={alias:null,args:null,concreteType:"GroupCommentInfo",kind:"LinkedField",name:"group_comment_info",plural:!1,selections:[{alias:null,args:null,concreteType:"GroupMembership",kind:"LinkedField",name:"author_membership",plural:!1,selections:[{alias:null,args:P,concreteType:"RenderableGroupMemberTag",kind:"LinkedField",name:"top_member_tag",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"tag_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"member_id",storageKey:null},Ka,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"small_icon",plural:!1,selections:v,storageKey:null}],storageKey:null},c],storageKey:null},{alias:"author_badge",args:[O,Z,{kind:"Literal",name:"whitelist",value:"ORIGINAL_POST_AUTHOR"}],concreteType:"GroupCommentInfoCommentMemberBadgesConnection",kind:"LinkedField",name:"comment_member_badges",plural:!1,selections:[{alias:null,args:null,concreteType:"GroupCommentInfoCommentMemberBadgesEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"RenderableGroupMemberTag",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"badge_name",plural:!1,selections:k,storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"badge_description",plural:!1,selections:k,storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"group",plural:!1,selections:d,storageKey:null},{alias:null,args:[O,Z],kind:"ScalarField",name:"is_author_with_member_profile",storageKey:null},{documentName:"CometUFICommentActorLink_comment",fragmentName:"CometUFIGroupCommentActorLink_groupCommentInfo",fragmentPropName:"groupCommentInfo",kind:"ModuleImport"}],storageKey:null};var Wb={alias:null,args:null,kind:"ScalarField",name:"has_constituent_badge",storageKey:null},Xb={alias:null,args:null,kind:"ScalarField",name:"can_see_constituent_badge_upsell",storageKey:null},Yb={alias:null,args:null,kind:"ScalarField",name:"legacy_token",storageKey:null},Zb={alias:null,args:null,kind:"ScalarField",name:"question_and_answer_type",storageKey:null},$b={alias:null,args:null,kind:"ScalarField",name:"is_author_original_poster",storageKey:null},ac={alias:null,args:null,kind:"ScalarField",name:"is_viewer_comment_poster",storageKey:null},bc={alias:null,args:null,kind:"ScalarField",name:"is_author_bot",storageKey:null},cc={alias:null,args:null,kind:"ScalarField",name:"is_author_non_coworker",storageKey:null},dc={alias:null,args:P,concreteType:null,kind:"LinkedField",name:"author_user_signals_renderer",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometUFICommentActorLinkBadges_comment",fragmentName:"CometUFICommentActorSingleUserSignalRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"CometUFICommentActorSingleUserSignalRenderer",abstractKey:null}],storageKey:null};O={alias:null,args:[O,{kind:"Literal",name:"supported",value:["CometUFICommentActorConstituentBadge","CometUFICommentActorVerifiedBadge","CometUFICommentActorGroupMemberBadge","CometUFICommentActorGroupMemberAuthorBadge","CometUFICommentActorSingleUserSignalRenderer","CometUFICommentActorAMAQuestionAnswerBadge","GeminiUFICommentActorDeactivatedAccountBadge","GeminiUFICommentActorBotBadge","GeminiUFICommentActorNonCoworkerBadge","CometUFICommentPostAuthorBadge"]}],concreteType:null,kind:"LinkedField",name:"author_badge_renderers",plural:!0,selections:[i,{kind:"InlineFragment",selections:[{documentName:"useCometUFICommentActorLinkBadges_comment",fragmentName:"CometUFICommentActorConstituentBadge3DWrapper_badge",fragmentPropName:"badge",kind:"ModuleImport"}],type:"CometUFICommentActorConstituentBadge",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"useCometUFICommentActorLinkBadges_comment",fragmentName:"CometUFICommentActorVerifiedBadge3DWrapper_badge",fragmentPropName:"badge",kind:"ModuleImport"}],type:"CometUFICommentActorVerifiedBadge",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"useCometUFICommentActorLinkBadges_comment",fragmentName:"CometUFICommentActorGroupMemberBadge3DWrapper_badge",fragmentPropName:"badge",kind:"ModuleImport"}],type:"CometUFICommentActorGroupMemberBadge",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"useCometUFICommentActorLinkBadges_comment",fragmentName:"CometUFICommentActorGroupMemberAuthorBadge3DWrapper_badge",fragmentPropName:"badge",kind:"ModuleImport"}],type:"CometUFICommentActorGroupMemberAuthorBadge",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"useCometUFICommentActorLinkBadges_comment",fragmentName:"CometUFICommentActorSingleUserSignalRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"CometUFICommentActorSingleUserSignalRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"useCometUFICommentActorLinkBadges_comment",fragmentName:"CometUFICommentActorAMAQuestionAnswerBadge3DWrapper_badge",fragmentPropName:"badge",kind:"ModuleImport"}],type:"CometUFICommentActorAMAQuestionAnswerBadge",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"useCometUFICommentActorLinkBadges_comment",fragmentName:"GeminiUFICommentActorDeactivatedAccountBadge3DWrapper_badge",fragmentPropName:"badge",kind:"ModuleImport"}],type:"GeminiUFICommentActorDeactivatedAccountBadge",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"useCometUFICommentActorLinkBadges_comment",fragmentName:"GeminiUFICommentActorBotBadge3DWrapper_badge",fragmentPropName:"badge",kind:"ModuleImport"}],type:"GeminiUFICommentActorBotBadge",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"useCometUFICommentActorLinkBadges_comment",fragmentName:"GeminiUFICommentActorNonCoworkerBadge3DWrapper_badge",fragmentPropName:"badge",kind:"ModuleImport"}],type:"GeminiUFICommentActorNonCoworkerBadge",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"useCometUFICommentActorLinkBadges_comment",fragmentName:"CometUFICommentPostAuthorBadge3DWrapper_badge",fragmentPropName:"badge",kind:"ModuleImport"}],type:"CometUFICommentPostAuthorBadge",abstractKey:null}],storageKey:null};var ec={alias:null,args:P,concreteType:"IdentityBadge",kind:"LinkedField",name:"identity_badges_web",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"badge_asset",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"multiple_badge_asset",storageKey:null},j,{alias:null,args:null,kind:"ScalarField",name:"information_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"information_asset",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"information_description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"identity_badge_type",storageKey:null}],storageKey:null};P={alias:null,args:P,kind:"ScalarField",name:"can_show_multiple_identity_badges",storageKey:null};var fc={alias:null,args:null,kind:"ScalarField",name:"can_viewer_disable_preview",storageKey:null},gc={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null};V={alias:null,args:null,concreteType:"InlineSurveyStoryActionLink",kind:"LinkedField",name:"inline_survey_config",plural:!1,selections:[{alias:null,args:V,concreteType:"Image",kind:"LinkedField",name:"favicon",plural:!1,selections:u,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"followup_choices",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"followup_question",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"main_choices",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"main_question",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"privacy_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"session_blob",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thankyou_text",storageKey:null},gc,{alias:null,args:null,kind:"ScalarField",name:"tessa_survey_config_id",storageKey:null},{documentName:"CometUFIComment_comment",fragmentName:"CometUFICommentQualitySurvey_inlineSurveyConfig",fragmentPropName:"inlineSurveyConfig",kind:"ModuleImport"}],storageKey:null};var hc={alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"attached_story",plural:!1,selections:l,storageKey:null},ic={alias:null,args:null,concreteType:"WorkAMAUFIAnsweredEventCommentModuleRenderer",kind:"LinkedField",name:"work_answered_event_comment_renderer",plural:!1,selections:[{documentName:"CometUFIComment_comment_work_answered_event_comment_renderer",fragmentName:"CometUFIAMABroadcastAnswerEventRow_data",fragmentPropName:"data",kind:"ModuleImport"}],storageKey:null},jc={alias:null,args:[{kind:"Literal",name:"supported",value:["StarsElevatedCommentData"]}],concreteType:null,kind:"LinkedField",name:"elevated_comment_data",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometUFIComment_comment_elevated_comment_data",fragmentName:"GFIStarsElevatedCommentContent_starsElevatedCommentData",fragmentPropName:"starsElevatedCommentData",kind:"ModuleImport"}],type:"StarsElevatedCommentData",abstractKey:null}],storageKey:'elevated_comment_data(supported:["StarsElevatedCommentData"])'};j={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"body",plural:!1,selections:[j,{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[i,W],storageKey:null},Y,S,T],storageKey:null}],storageKey:null};Y={alias:null,args:null,kind:"ScalarField",name:"is_markdown_enabled",storageKey:null};S={alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"reply_parent_comment",plural:!1,selections:d,storageKey:null};T={alias:"threading_depth",args:null,kind:"ScalarField",name:"depth",storageKey:null};var kc={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"optimistic_action",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"optimistic_error_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"optimistic_error",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"client_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reply_comment_parent_fbid",storageKey:null}]},lc={alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},mc={alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null},nc={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[lc,mc,{alias:null,args:null,kind:"ScalarField",name:"has_previous_page",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"start_cursor",storageKey:null}],storageKey:null},oc={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"ufi2_connection_generation",storageKey:null}]},pc=["feedback_source","focus_comment_id","comment_order"],qc={kind:"Variable",name:"__dynamicKey",variableName:"UFI2CommentsProvider_commentsKey"},rc={alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"associated_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visibility",storageKey:null},c],storageKey:null},sc=[{kind:"Literal",name:"first",value:1}],tc={kind:"TypeDiscriminator",abstractKey:"__isFeedUnit"},uc={kind:"InlineFragment",selections:d,type:"CommunityChatFeedObject",abstractKey:null},vc={kind:"InlineFragment",selections:d,type:"CommunityTabTrendingPOGFeedUnit",abstractKey:null},wc={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i,tc,{kind:"InlineFragment",selections:[n,c,o,Ma,p],type:"Story",abstractKey:null},q,r,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,s,Ya,W,uc,vc],storageKey:null},xc={alias:null,args:[{kind:"Literal",name:"supported",value:["CometFeedStoryGroupConflictAlertContextLayoutStrategy","CometFeedStoryServicesLocalBusinessUpdatesContextLayoutStrategy","CometFeedStoryCoronavirusHubHelpContextLayoutStrategy","CometFeedStoryAggregatedContextLayoutStrategy","CometFeedStoryDefaultContextLayoutStrategy","CometFeedStorySocialLearningModuleContextLayoutStrategy"]}],concreteType:null,kind:"LinkedField",name:"context_layout",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryContextSection_story",fragmentName:"CometFeedStoryGroupConflictAlertContextLayoutStrategy_contextLayout",fragmentPropName:"contextLayout",kind:"ModuleImport"}],type:"CometFeedStoryGroupConflictAlertContextLayoutStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryContextSection_story",fragmentName:"CometFeedStoryServicesLocalBusinessUpdatesContextLayoutStrategy_contextLayout",fragmentPropName:"contextLayout",kind:"ModuleImport"}],type:"CometFeedStoryServicesLocalBusinessUpdatesContextLayoutStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryContextSection_story",fragmentName:"CometFeedStoryCoronavirusHubHelpContextLayoutStrategy_contextLayout",fragmentPropName:"contextLayout",kind:"ModuleImport"}],type:"CometFeedStoryCoronavirusHubHelpContextLayoutStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryContextSection_story",fragmentName:"CometFeedStoryAggregatedContextLayoutStrategy_contextLayout",fragmentPropName:"contextLayout",kind:"ModuleImport"}],type:"CometFeedStoryAggregatedContextLayoutStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryContextSection_story",fragmentName:"CometFeedStoryDefaultContextLayoutStrategy_contextLayout",fragmentPropName:"contextLayout",kind:"ModuleImport"}],type:"CometFeedStoryDefaultContextLayoutStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryContextSection_story",fragmentName:"CometFeedStorySocialLearningModuleContextLayoutStrategy_contextLayout",fragmentPropName:"contextLayout",kind:"ModuleImport"}],type:"CometFeedStorySocialLearningModuleContextLayoutStrategy",abstractKey:null}],storageKey:'context_layout(supported:["CometFeedStoryGroupConflictAlertContextLayoutStrategy","CometFeedStoryServicesLocalBusinessUpdatesContextLayoutStrategy","CometFeedStoryCoronavirusHubHelpContextLayoutStrategy","CometFeedStoryAggregatedContextLayoutStrategy","CometFeedStoryDefaultContextLayoutStrategy","CometFeedStorySocialLearningModuleContextLayoutStrategy"])'},yc={alias:null,args:[{kind:"Literal",name:"supported",value:["CometFeedStoryInformTreatmentFooterStrategy","CometStoryInsightsFooterStrategy","CometFeedStoryJobsFooterStrategy","CometFeedStoryGroupAdminHashtagsFooterStrategy","CometFeedStoryGroupTopicsFooterStrategy","CometProfilePlusStoryFooterStrategy","CometFeedStoryAutoAttachedUserFundingCTAFooterStrategy","CometFeedStoryStonehengeFooterStrategy","CometFeedStoryWoodhengeFooterStrategy","CometFeedStorySocialLearningModuleFooterStrategy","CometFeedStorySocialLearningMallCTAFooterStrategy","CometFeedStoryGroupInsightsFooterStrategy","CometFeedStoryCoronavirusCrisisMessageFooterStrategy","CometFeedStoryProfileCommercePostFooterStrategy"]}],concreteType:null,kind:"LinkedField",name:"footer",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryInformTreatmentFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStoryInformTreatmentFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryInsightsFooterStrategy_insights",fragmentPropName:"insights",kind:"ModuleImport"}],type:"CometStoryInsightsFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryJobsFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStoryJobsFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryGroupAdminHashtagsFooterStrategy_storySection",fragmentPropName:"storySection",kind:"ModuleImport"}],type:"CometFeedStoryGroupAdminHashtagsFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryGroupTopicsFooterStrategy_topics",fragmentPropName:"topics",kind:"ModuleImport"}],type:"CometFeedStoryGroupTopicsFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryProfilePlusPostFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometProfilePlusStoryFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryAutoAttachedUserFundingCTAFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStoryAutoAttachedUserFundingCTAFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryStonehengeFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStoryStonehengeFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryWoodhengeFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStoryWoodhengeFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStorySocialLearningModuleFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStorySocialLearningModuleFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStorySocialLearningMallCTAFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStorySocialLearningMallCTAFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryGroupInsightsFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStoryGroupInsightsFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryCoronavirusCrisisMessageFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStoryCoronavirusCrisisMessageFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryProfileCommercePostFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStoryProfileCommercePostFooterStrategy",abstractKey:null}],storageKey:'footer(supported:["CometFeedStoryInformTreatmentFooterStrategy","CometStoryInsightsFooterStrategy","CometFeedStoryJobsFooterStrategy","CometFeedStoryGroupAdminHashtagsFooterStrategy","CometFeedStoryGroupTopicsFooterStrategy","CometProfilePlusStoryFooterStrategy","CometFeedStoryAutoAttachedUserFundingCTAFooterStrategy","CometFeedStoryStonehengeFooterStrategy","CometFeedStoryWoodhengeFooterStrategy","CometFeedStorySocialLearningModuleFooterStrategy","CometFeedStorySocialLearningMallCTAFooterStrategy","CometFeedStoryGroupInsightsFooterStrategy","CometFeedStoryCoronavirusCrisisMessageFooterStrategy","CometFeedStoryProfileCommercePostFooterStrategy"])'},zc={alias:null,args:null,kind:"ScalarField",name:"encrypted_tracking",storageKey:null},Ac={alias:null,args:e,kind:"ScalarField",name:"should_host_actor_link_in_watch",storageKey:null},$={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"tombstone_actions",plural:!0,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"action_type",storageKey:null}],storageKey:null};u={alias:null,args:null,concreteType:"TombstoneFeedUnit",kind:"LinkedField",name:"tombstone_feedunit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_hidden_from_client",storageKey:null},{alias:null,args:null,concreteType:"Tombstone",kind:"LinkedField",name:"tombstone",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"action",storageKey:null},c,Ka,{alias:null,args:null,kind:"ScalarField",name:"author_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"feedback_id",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"executed_action",plural:!1,selections:[i,{kind:"TypeDiscriminator",abstractKey:"__isNFXAction"},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"icon",plural:!1,selections:u,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"context",storageKey:null},Pb,c],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"canUndo",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_loading",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"negativeFeedbackActionID",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subTitle",storageKey:null},gc,{alias:null,args:null,concreteType:"DeletedPostTombstoneContent",kind:"LinkedField",name:"deleted_post_tombstone",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"member_stats_text",storageKey:null},$],storageKey:null},{alias:null,args:null,concreteType:"DeclinedPendingPostTombstoneContent",kind:"LinkedField",name:"declined_pending_post_tombstone",plural:!1,selections:[$],storageKey:null}],storageKey:null}],storageKey:null};$={alias:null,args:[{kind:"Literal",name:"supported",value:["CometStoryAggregatedStoriesStrategy"]}],concreteType:null,kind:"LinkedField",name:"aggregated_stories",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"ProfileCometTimelineGridStoryAttachment_story__aggregated_stories",fragmentName:"ProfileCometTimelineGridStoryAggregatedStoryRenderer_aggregatedStories",fragmentPropName:"aggregatedStories",kind:"ModuleImport"}],type:"CometStoryAggregatedStoriesStrategy",abstractKey:null}],storageKey:'aggregated_stories(supported:["CometStoryAggregatedStoriesStrategy"])'};var Bc={alias:null,args:[{kind:"Literal",name:"supported",value:["CometFeedStoryFormattedBackgroundMessageRenderingStrategy","CometFeedStoryDefaultMessageRenderingStrategy"]}],concreteType:null,kind:"LinkedField",name:"message",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"ProfileCometTimelineGridStoryAttachment_story__message",fragmentName:"ProfileCometTimelineGridStoryFormattedBackgroundMessageRenderer_message",fragmentPropName:"message",kind:"ModuleImport"}],type:"CometFeedStoryFormattedBackgroundMessageRenderingStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"ProfileCometTimelineGridStoryAttachment_story__message",fragmentName:"ProfileCometTimelineGridStoryDefaultMessageRenderer_message",fragmentPropName:"message",kind:"ModuleImport"}],type:"CometFeedStoryDefaultMessageRenderingStrategy",abstractKey:null}],storageKey:'message(supported:["CometFeedStoryFormattedBackgroundMessageRenderingStrategy","CometFeedStoryDefaultMessageRenderingStrategy"])'},Cc={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"message",plural:!1,selections:k,storageKey:null},Dc={alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:[{kind:"Variable",name:"render_location",variableName:"renderLocation"},{kind:"Literal",name:"supported",value:["StoryAttachmentAlbumStyleRenderer","StoryAttachmentPhotoStyleRenderer","StoryAttachmentVideoStyleRenderer","StoryAttachmentLifeEventStyleRenderer","StoryAttachmentProfileIntroCardBioStyleRenderer","StoryAttachmentMapStyleRenderer","StoryAttachmentShareStyleRenderer","StoryAttachmentFunFactsStyleRenderer"]}],concreteType:null,kind:"LinkedField",name:"style_type_renderer",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"ProfileCometTimelineGridStoryAttachment_story",fragmentName:"ProfileCometTimelineGridStoryAlbumAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentAlbumStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"ProfileCometTimelineGridStoryAttachment_story",fragmentName:"ProfileCometTimelineGridStoryPhotoAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentPhotoStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"ProfileCometTimelineGridStoryAttachment_story",fragmentName:"ProfileCometTimelineGridStoryVideoAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentVideoStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"ProfileCometTimelineGridStoryAttachment_story",fragmentName:"ProfileCometTimelineGridStoryLifeEventAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentLifeEventStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"ProfileCometTimelineGridStoryAttachment_story",fragmentName:"ProfileCometTimelineGridStoryProfileIntroCardBioAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentProfileIntroCardBioStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"ProfileCometTimelineGridStoryAttachment_story",fragmentName:"ProfileCometTimelineGridStoryMapAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentMapStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"ProfileCometTimelineGridStoryAttachment_story",fragmentName:"ProfileCometTimelineGridStoryShareAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentShareStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"ProfileCometTimelineGridStoryAttachment_story",fragmentName:"ProfileCometTimelineGridStoryFunFactsPromptAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentFunFactsStyleRenderer",abstractKey:null}],storageKey:null}],storageKey:null},Ec=[{kind:"Literal",name:"first",value:8}],Fc=[y,{kind:"Literal",name:"width",value:500}],Gc=[{alias:null,args:null,concreteType:"FunFactPrompt",kind:"LinkedField",name:"fun_fact_prompt",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fun_fact_prompt_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"emoji",storageKey:null},c],storageKey:null}];return{fragment:{argumentDefinitions:[a,aa,ba,ca,b,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va],kind:"Fragment",metadata:null,name:"ComposerStoryCreateMutation",selections:[{alias:null,args:wa,concreteType:"StoryCreateResponsePayload",kind:"LinkedField",name:"story_create",plural:!1,selections:[xa,{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"story",plural:!1,selections:[c,ya,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"default_actor",plural:!1,selections:d,storageKey:null},{condition:"isLivingRoom",kind:"Condition",passingValue:!0,selections:[{alias:null,args:e,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action_links",plural:!0,selections:[za],storageKey:null}],storageKey:null}]},{condition:"isSocialLearning",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"SocialLearningInfoUnitModule",kind:"LinkedField",name:"social_learning_info_unit_module",plural:!1,selections:[{alias:null,args:null,concreteType:"LearningCourseInfo",kind:"LinkedField",name:"info",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"GroupsCometSocialLearningUnitCourseProgress_courseInfo"}],storageKey:null},Aa,{alias:null,args:null,concreteType:"LearningCourseUnit",kind:"LinkedField",name:"unit",plural:!1,selections:[c,{args:null,kind:"FragmentSpread",name:"GroupsCometSocialLearningLeftRailUnit_unit"},{args:null,kind:"FragmentSpread",name:"GroupsCometSocialLearningUnitList_unit"},{args:null,kind:"FragmentSpread",name:"GroupsCometSocialLearningUnit_unit"}],storageKey:null}],storageKey:null}]},{condition:"isGroup",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"to",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"GroupsCometAdminOnboardingRHCCard_group"},{args:null,kind:"FragmentSpread",name:"GroupsGeminiFeedReminders_group"},{kind:"InlineFragment",selections:[c,Ba,{args:null,kind:"FragmentSpread",name:"useGroupsCometMallTabs_group"}],type:"Group",abstractKey:null}],storageKey:null}]},{condition:"isDraftGeminiPost",kind:"Condition",passingValue:!0,selections:[{alias:"gemini_group_draft_summary",args:null,concreteType:null,kind:"LinkedField",name:"to",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"GroupsGeminiDraftPostsSummary_group"}],storageKey:null}]}],storageKey:null},Ca,{condition:"isFeed",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"NewsFeedEdge",kind:"LinkedField",name:"feed_story_edge",plural:!1,selections:[h,{args:null,kind:"FragmentSpread",name:"CometNewsFeedUnit_edge"}],storageKey:null}]},{condition:"isGroup",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"GroupFeedEdge",kind:"LinkedField",name:"group_feed_story_edge",plural:!1,selections:[h,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i,{args:null,kind:"FragmentSpread",name:"CometFeedUnitStoryStrategy_feedUnit"},{args:null,kind:"FragmentSpread",name:"CometFeedUnitContainerSection_feedUnit"},Da,{kind:"InlineFragment",selections:[Ea,{args:null,kind:"FragmentSpread",name:"GroupsCometSectionHeader_groupsSectionHeaderUnit"}],type:"GroupsSectionHeaderUnit",abstractKey:null},Fa,Ga],storageKey:null}],storageKey:null}]},{condition:"isTimeline",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"TimelineFeedUnitsEdge",kind:"LinkedField",name:"timeline_feed_units_edge",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[Fa,Ga,{args:null,kind:"FragmentSpread",name:"ProfileCometTimelineGridStory_story"},{kind:"InlineDataFragmentSpread",name:"groupTimelineStories_story",selections:[{kind:"InlineFragment",selections:[c,Ha,Ia],type:"Story",abstractKey:null}]}],storageKey:null}],storageKey:null}]},{condition:"isFundraiser",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"FundraiserWithPresenceToFeedPostsEdge",kind:"LinkedField",name:"fundraiser_feed_story_edge",plural:!1,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"node",plural:!1,selections:Ja,storageKey:null}],storageKey:null}]},{condition:"isPageNewsFeed",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"PagesNewsFeedEdge",kind:"LinkedField",name:"pages_news_feed_edge",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:Ja,storageKey:null}],storageKey:null}]},{condition:"isFunFactPost",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometAppCollectionFunFactsRendererSection_user"}],storageKey:null}]}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[ia,da,aa,ba,ca,b,ea,fa,ga,ha,ua,sa,ta,va,ka,ma,la,na,ra,oa,qa,pa,a,ja],kind:"Operation",name:"ComposerStoryCreateMutation",selections:[{alias:null,args:wa,concreteType:"StoryCreateResponsePayload",kind:"LinkedField",name:"story_create",plural:!1,selections:[xa,{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"story",plural:!1,selections:[c,ya,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"default_actor",plural:!1,selections:l,storageKey:null},{condition:"isLivingRoom",kind:"Condition",passingValue:!0,selections:[{alias:null,args:e,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action_links",plural:!0,selections:[i,za],storageKey:null}],storageKey:null}]},{condition:"isSocialLearning",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"SocialLearningInfoUnitModule",kind:"LinkedField",name:"social_learning_info_unit_module",plural:!1,selections:[{alias:null,args:null,concreteType:"LearningCourseInfo",kind:"LinkedField",name:"info",plural:!1,selections:[{alias:"completedRequiredUnits",args:null,kind:"ScalarField",name:"completed_required_units_count",storageKey:null},{alias:"totalRequiredUnits",args:null,kind:"ScalarField",name:"required_units_count",storageKey:null},{alias:"unitProgressText",args:[{kind:"Literal",name:"string_enum",value:"UNIT_PROGRESS"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"UNIT_PROGRESS")'},c],storageKey:null},Aa,{alias:null,args:null,concreteType:"LearningCourseUnit",kind:"LinkedField",name:"unit",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"is_synchronizing",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_optional",storageKey:null},{alias:"makeUnitOptionalText",args:[{kind:"Literal",name:"string_enum",value:"MAKE_UNIT_OPTIONAL"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"MAKE_UNIT_OPTIONAL")'},{alias:"makeUnitOptionalToastText",args:[{kind:"Literal",name:"string_enum",value:"MAKE_UNIT_OPTIONAL_TOAST"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"MAKE_UNIT_OPTIONAL_TOAST")'},{alias:null,args:null,concreteType:"LearningCourseInfo",kind:"LinkedField",name:"learning_course_info",plural:!1,selections:[{alias:"reorderPostsDialogTitleText",args:[{kind:"Literal",name:"string_enum",value:"REORDER_POSTS_DIALOG_TITLE"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"REORDER_POSTS_DIALOG_TITLE")'},{alias:"reorderPostsDialogMenuItemText",args:[{kind:"Literal",name:"string_enum",value:"REORDER_POSTS_MENU_ITEM"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"REORDER_POSTS_MENU_ITEM")'},c,Ka,{alias:"editUnitMenuItemText",args:[{kind:"Literal",name:"string_enum",value:"EDIT_UNIT_MENU_ITEM"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"EDIT_UNIT_MENU_ITEM")'},{alias:"unitHeaderExpandedTitleText",args:[{kind:"Literal",name:"string_enum",value:"UNIT_HEADER_EXPANDED_TITLE"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"UNIT_HEADER_EXPANDED_TITLE")'},{alias:"unitHeaderExpandedDescriptionText",args:[{kind:"Literal",name:"string_enum",value:"UNIT_HEADER_EXPANDED_DESCRIPTION"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"UNIT_HEADER_EXPANDED_DESCRIPTION")'}],storageKey:null},{alias:"modules",args:null,concreteType:"LearningCourseUnitModulesConnection",kind:"LinkedField",name:"learning_course_unit_modules",plural:!1,selections:[f,{alias:null,args:null,concreteType:"LearningCourseUnitModulesEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"LearningCourseModule",kind:"LinkedField",name:"node",plural:!1,selections:[c,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"name_with_sync_source_attribution",plural:!1,selections:k,storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"story",plural:!1,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"attached_story",plural:!1,selections:[m,c],storageKey:null},c,Za],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:"learningCourseInfo",args:null,concreteType:"LearningCourseInfo",kind:"LinkedField",name:"learning_course_info",plural:!1,selections:[{alias:"deleteUnitHeaderText",args:[{kind:"Literal",name:"string_enum",value:"DELETE_UNIT_HEADER"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"DELETE_UNIT_HEADER")'},{alias:"deleteUnitBodyText",args:[{kind:"Literal",name:"string_enum",value:"DELETE_UNIT_BODY"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"DELETE_UNIT_BODY")'},{alias:"deleteUnitButtonText",args:[{kind:"Literal",name:"string_enum",value:"DELETE_UNIT_BUTTON"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"DELETE_UNIT_BUTTON")'},c],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"delete_synced_headline",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"delete_synced_text",storageKey:null},$a,t,{alias:"unitSavedToastText",args:[{kind:"Literal",name:"string_enum",value:"UNIT_SAVED_TOAST"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"UNIT_SAVED_TOAST")'},{alias:"unitTitleText",args:[{kind:"Literal",name:"string_enum",value:"UNIT_TITLE"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"UNIT_TITLE")'},{alias:"modulePreviews",args:[{kind:"Literal",name:"first",value:3}],concreteType:"LearningCourseUnitModulesConnection",kind:"LinkedField",name:"learning_course_unit_modules",plural:!1,selections:[f,ab],storageKey:"learning_course_unit_modules(first:3)"},{alias:"learningCourseUnitModules",args:null,concreteType:"LearningCourseUnitModulesConnection",kind:"LinkedField",name:"learning_course_unit_modules",plural:!1,selections:[ab],storageKey:null},{alias:null,args:null,concreteType:"LearningCourseUnitModulesConnection",kind:"LinkedField",name:"learning_course_unit_modules",plural:!1,selections:g,storageKey:null},{alias:"completedRequiredPostsCount",args:null,kind:"ScalarField",name:"completed_required_modules_count",storageKey:null},{alias:"requiredPostsCount",args:null,kind:"ScalarField",name:"required_modules_count",storageKey:null},{alias:"showCompletion",args:null,kind:"ScalarField",name:"show_completion",storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"story",plural:!1,selections:[{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[eb,c,{alias:null,args:fb,kind:"ScalarField",name:"is_eligible_for_real_time_updates",storageKey:null},w,{alias:null,args:fb,kind:"ScalarField",name:"is_eligible_for_enhanced_comment_updates",storageKey:null},gb,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"associated_video",plural:!1,selections:[hb,c,ib,jb],storageKey:null},kb,lb,mb,nb,ob,pb,qb,{alias:null,args:sb,concreteType:"DisplayCommentsConnection",kind:"LinkedField",name:"display_comments",plural:!1,selections:[tb,ub,vb,wb,xb,yb,zb,Ab,f,{alias:null,args:null,concreteType:"DisplayCommentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"node",plural:!1,selections:[c,Bb,z,A,C,Cb,Db,Eb,Fb,Gb,{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[c,Hb,eb,Ib,Jb,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"associated_video",plural:!1,selections:[c,hb,ib,jb],storageKey:null},Q,Kb,w,Lb,kb,Mb,Nb,lb,mb,nb,ob,pb,qb,gb,{alias:null,args:D,concreteType:"DisplayCommentsConnection",kind:"LinkedField",name:"display_comments",plural:!1,selections:[{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"highlighted_comments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"author",plural:!1,selections:[i,t,{alias:"profilePictureForReplyExpander",args:cb,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:v,storageKey:null},c,db],storageKey:null},C,c],storageKey:null},tb,ub,vb,wb,xb,yb,zb,Ab,f,{alias:null,args:null,concreteType:"DisplayCommentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"node",plural:!1,selections:[c,Bb,z,A,C,Cb,Db,Eb,Fb,Gb,{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[c,Hb,{alias:null,args:x,concreteType:null,kind:"LinkedField",name:"viewer_actor",plural:!1,selections:l,storageKey:null},Ib,Jb,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"associated_video",plural:!1,selections:d,storageKey:null},Q,Kb,w,Lb,kb,Mb,Nb,{alias:"sub_replies_count",args:[{kind:"Literal",name:"orderby",value:"sub_replies"}],concreteType:"TopLevelCommentsConnection",kind:"LinkedField",name:"top_level_comments",plural:!1,selections:g,storageKey:'top_level_comments(orderby:"sub_replies")'}],storageKey:null},E,F,G,H,I,J,K,N,B,U,M,Qb,m,Rb,Sb,R,Tb,Ub,Vb,Z,Wb,Xb,Yb,Zb,$b,ac,bc,cc,dc,O,ec,P,fc,V,hc,ic,jc,j,Y,{alias:null,args:null,kind:"ScalarField",name:"is_subreply_parent_deleted",storageKey:null},S,T,i,kc],storageKey:null},h],storageKey:null},nc,oc],storageKey:null},{alias:null,args:D,filters:pc,handle:"ufi2_comments",key:"UFI2CommentsProvider_feedback_display_comments",kind:"LinkedHandle",name:"display_comments",dynamicKey:qc},rc],storageKey:null},E,F,G,H,I,J,K,N,B,U,M,Qb,m,Rb,Sb,R,Tb,Ub,Vb,Z,Wb,Xb,Yb,Zb,$b,ac,bc,cc,dc,O,ec,P,fc,V,hc,ic,jc,j,Y,S,T,i,kc],storageKey:null},h],storageKey:null},nc,oc],storageKey:null},{alias:null,args:sb,filters:pc,handle:"ufi2_comments",key:"UFI2CommentsProvider_feedback_display_comments",kind:"LinkedHandle",name:"display_comments",dynamicKey:qc},rc,{alias:null,args:[rb],concreteType:null,kind:"LinkedField",name:"top_level_comment_list_renderer",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometUFITopLevelCommentListRenderer_feedback",fragmentName:"CometMediaViewerUFITopLevelCommentList_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"MediaViewerTopLevelCommentListRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFITopLevelCommentListRenderer_feedback",fragmentName:"CometFeedUFITopLevelCommentList_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"FeedTopLevelCommentListRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFITopLevelCommentListRenderer_feedback",fragmentName:"CometWatchUFITopLevelCommentList_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"WatchTopLevelCommentListRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFITopLevelCommentListRenderer_feedback",fragmentName:"LiveProducerTopLevelCommentList_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"LiveProducerTopLevelCommentListRenderer",abstractKey:null}],storageKey:null},{alias:null,args:[{kind:"Literal",name:"supported",value:["DefaultCometUFISummaryAndActionsRenderer","LiveVideoCometUFISummaryAndActionsRenderer","UnauthenticatedUCometUFISummaryAndActionsRenderer"]}],concreteType:null,kind:"LinkedField",name:"comet_ufi_summary_and_actions_renderer",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometUFISummaryAndActions_feedback",fragmentName:"CometUFIDefaultSummaryAndActionsRenderer_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"DefaultCometUFISummaryAndActionsRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFISummaryAndActions_feedback",fragmentName:"CometUFILiveVideoSummaryAndActionsRenderer_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"LiveVideoCometUFISummaryAndActionsRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFISummaryAndActions_feedback",fragmentName:"CometUnauthenticatedUFISummaryAndActionsRenderer_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"UnauthenticatedUCometUFISummaryAndActionsRenderer",abstractKey:null}],storageKey:'comet_ufi_summary_and_actions_renderer(supported:["DefaultCometUFISummaryAndActionsRenderer","LiveVideoCometUFISummaryAndActionsRenderer","UnauthenticatedUCometUFISummaryAndActionsRenderer"])'}],storageKey:null},c],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_recommended_posts",storageKey:null}],storageKey:null}],storageKey:null}]},{condition:"isGroup",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"to",plural:!1,selections:[i,c,{kind:"InlineFragment",selections:[{alias:"viewer_tools_rhc",args:null,concreteType:null,kind:"LinkedField",name:"viewer_tools",plural:!0,selections:[i,{kind:"InlineFragment",selections:[{documentName:"GroupsCometAdminOnboardingRHCCard_group",fragmentName:"GroupsCometAdminOnboardingInviteMemberRHCItem_groupTool",fragmentPropName:"groupTool",kind:"ModuleImport"}],type:"GroupOnboardingAdminInviteMemberTool",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"GroupsCometAdminOnboardingRHCCard_group",fragmentName:"GroupsCometAdminOnboardingChooseCoverPhotoRHCItem_groupTool",fragmentPropName:"groupTool",kind:"ModuleImport"}],type:"GroupOnboardingAdminChooseCoverPhotoTool",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"GroupsCometAdminOnboardingRHCCard_group",fragmentName:"GroupsCometAdminOnboardingWriteGroupDescriptionRHCItem_groupTool",fragmentPropName:"groupTool",kind:"ModuleImport"}],type:"GroupOnboardingAdminWriteGroupDescriptionTool",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"GroupsCometAdminOnboardingRHCCard_group",fragmentName:"GroupsCometAdminOnboardingWriteFirstPostRHCItem_groupTool",fragmentPropName:"groupTool",kind:"ModuleImport"}],type:"GroupOnboardingAdminWriteFirstPostTool",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"GroupAdminEducationWizard",kind:"LinkedField",name:"admin_education_wizard",plural:!1,selections:[{alias:null,args:null,concreteType:"GroupAdminEducationWizardCard",kind:"LinkedField",name:"dismiss_card",plural:!1,selections:[$a,gc],storageKey:null},{alias:null,args:null,concreteType:"GroupAdminEducationWizardCard",kind:"LinkedField",name:"end_card",plural:!1,selections:[gc],storageKey:null},{alias:null,args:null,concreteType:"GroupAdminEducationWizardStep",kind:"LinkedField",name:"wizard_steps",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_completed",storageKey:null},c],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wizard_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wizard_subtitle",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewer_admin_type",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"work_group_reminder_list_renderer",plural:!0,selections:[i,{kind:"InlineFragment",selections:[{documentName:"GroupsGeminiFeedReminders_group",fragmentName:"GroupsGeminiScheduledPostsReminderRenderer_reminderRenderer",fragmentPropName:"reminderRenderer",kind:"ModuleImport"}],type:"CometGroupScheduledPostsRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"GroupsGeminiFeedReminders_group",fragmentName:"GroupsGeminiPendingMembersReminderRenderer_reminderRenderer",fragmentPropName:"reminderRenderer",kind:"ModuleImport"}],type:"CometGroupPendingMembersReminderRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"GroupsGeminiFeedReminders_group",fragmentName:"GroupsGeminiPendingPostsReminderRenderer_reminderRenderer",fragmentPropName:"reminderRenderer",kind:"ModuleImport"}],type:"CometGroupPendingPostsReminderRenderer",abstractKey:null}],storageKey:null},Ba,{alias:null,args:null,kind:"ScalarField",name:"group_address",storageKey:null},{alias:null,args:null,concreteType:"GroupContentViewsConnection",kind:"LinkedField",name:"group_content_views",plural:!1,selections:[{alias:null,args:null,concreteType:"GroupContentViewsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"GroupContentView",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"content_view_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"content_view_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"content_view_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_default_selected_content_view",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},m],type:"Group",abstractKey:null}],storageKey:null}]},{condition:"isDraftGeminiPost",kind:"Condition",passingValue:!0,selections:[{alias:"gemini_group_draft_summary",args:null,concreteType:null,kind:"LinkedField",name:"to",plural:!1,selections:[i,c,{kind:"InlineFragment",selections:[{alias:"groupID",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:"ownDrafts",args:null,concreteType:"GroupDraftPostsConnection",kind:"LinkedField",name:"draft_posts",plural:!1,selections:g,storageKey:null},{alias:"uniqueDrafteesCount",args:null,kind:"ScalarField",name:"draft_posts_created_for_others_distinct_final_author_count",storageKey:null},{alias:"draftsForOthers",args:sc,concreteType:"GroupDraftPostsCreatedForOthersConnection",kind:"LinkedField",name:"draft_posts_created_for_others",plural:!1,selections:[f,{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actors",plural:!0,selections:[i,t,c],storageKey:null},c],storageKey:null}],storageKey:"draft_posts_created_for_others(first:1)"},{alias:"uniqueDraftersCount",args:null,kind:"ScalarField",name:"draft_posts_created_for_the_viewer_distinct_drafters_count",storageKey:null},{alias:"draftedByOthers",args:sc,concreteType:"GroupDraftPostsCreatedForTheViewerConnection",kind:"LinkedField",name:"draft_posts_created_for_the_viewer",plural:!1,selections:[f,{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"work_shared_draft_drafter",plural:!1,selections:[t,c],storageKey:null},c],storageKey:null}],storageKey:"draft_posts_created_for_the_viewer(first:1)"}],type:"Group",abstractKey:null}],storageKey:null}]}],storageKey:null},Ca,{condition:"isFeed",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"NewsFeedEdge",kind:"LinkedField",name:"feed_story_edge",plural:!1,selections:[h,{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},wc,{alias:null,args:null,concreteType:"FeedBackendData",kind:"LinkedField",name:"feed_backend_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"qid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_qid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vsid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vspos",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_recent_vpv_fetch_tracking_data",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deduplication_key",storageKey:null}],storageKey:null}]},{condition:"isGroup",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"GroupFeedEdge",kind:"LinkedField",name:"group_feed_story_edge",plural:!1,selections:[h,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i,tc,{kind:"InlineFragment",selections:[c,{alias:null,args:null,kind:"ScalarField",name:"matched_terms",storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"attached_story",plural:!1,selections:[c,{alias:null,args:e,concreteType:"CometStorySections",kind:"LinkedField",name:"comet_sections",plural:!1,selections:[xc,yc],storageKey:null},zc,Ac,{kind:"ClientExtension",selections:[u]}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"call_to_action",plural:!1,selections:[i,{kind:"TypeDiscriminator",abstractKey:"__isStoryLevelCallToAction"},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"triggers",plural:!0,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"trigger_event",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:e,concreteType:"CometStorySections",kind:"LinkedField",name:"comet_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:["CometFeedStoryInitiallyCollapsedContentStrategy","CometFeedStoryDefaultContentStrategy"]}],concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStory_story",fragmentName:"CometFeedStoryInitiallyCollapsedContentStrategy_content",fragmentPropName:"content",kind:"ModuleImport"}],type:"CometFeedStoryInitiallyCollapsedContentStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStory_story",fragmentName:"CometFeedStoryDefaultContentStrategy_content",fragmentPropName:"content",kind:"ModuleImport"}],type:"CometFeedStoryDefaultContentStrategy",abstractKey:null}],storageKey:'content(supported:["CometFeedStoryInitiallyCollapsedContentStrategy","CometFeedStoryDefaultContentStrategy"])'},{alias:null,args:[{kind:"Literal",name:"supported",value:["CometStorySideUFILayoutStrategy","CometStoryDefaultLayoutStrategy"]}],concreteType:null,kind:"LinkedField",name:"layout",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStory_story__layout",fragmentName:"CometFeedStorySideUFILayoutStrategy_layout",fragmentPropName:"layout",kind:"ModuleImport"}],type:"CometStorySideUFILayoutStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStory_story__layout",fragmentName:"CometFeedStoryDefaultLayoutStrategy_layout",fragmentPropName:"layout",kind:"ModuleImport"}],type:"CometStoryDefaultLayoutStrategy",abstractKey:null}],storageKey:'layout(supported:["CometStorySideUFILayoutStrategy","CometStoryDefaultLayoutStrategy"])'},{alias:null,args:[{kind:"Literal",name:"supported",value:["CometFeedStoryCopyrightViolationHeaderStrategy"]}],concreteType:null,kind:"LinkedField",name:"copyright_violation_header",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryCopyrightViolationHeaderSection_story",fragmentName:"CometFeedStoryCopyrightViolationHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometFeedStoryCopyrightViolationHeaderStrategy",abstractKey:null}],storageKey:'copyright_violation_header(supported:["CometFeedStoryCopyrightViolationHeaderStrategy"])'},{alias:null,args:[{kind:"Literal",name:"supported",value:["CometFeedStoryGroupConflictAlertHeaderStrategy","CometGroupsAlertedContentHeaderStrategy","CometStoryGroupPendingQueueMemberPostApprovalHeaderStrategy","CometStoryCrisisCloseListingHeaderStrategy","CometFeedStoryAlbumHeaderStrategy","CometStoryPostUpsellHeaderStrategy","CometFeedStoryStoryHeaderStrategy","CometFeedStoryFallbackHeaderStrategy","CometFeedStoryCommerceHeaderStrategy","CometStorySocialLearningModuleHeaderStrategy","GeminiFeedStoryImportantHeaderStrategy","CometStoryPhotoReviewCTAHeaderStrategy","CometFeedStoryQuiltsUpgradePromptHeaderStrategy","CometFeedStoryQuiltsDowngradePromptHeaderStrategy"]}],concreteType:null,kind:"LinkedField",name:"header",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometFeedStoryGroupConflictAlertHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometFeedStoryGroupConflictAlertHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometGroupsAlertedContentHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometGroupsAlertedContentHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometStoryGroupPendingQueueMemberPostApprovalHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometStoryGroupPendingQueueMemberPostApprovalHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometStoryCrisisCloseListingHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometStoryCrisisCloseListingHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometFeedStoryAlbumHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometFeedStoryAlbumHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometStoryPostUpsellHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometStoryPostUpsellHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometFeedStoryStoryHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometFeedStoryStoryHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometFeedStoryFallbackHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometFeedStoryFallbackHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometFeedStoryCommerceHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometFeedStoryCommerceHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometStorySocialLearningModuleHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometStorySocialLearningModuleHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"GeminiFeedStoryImportantHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"GeminiFeedStoryImportantHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometStoryPhotoReviewCTAHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometStoryPhotoReviewCTAHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometFeedStoryQuiltsUpgradePromptHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometFeedStoryQuiltsUpgradePromptHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometFeedStoryQuiltsDowngradePromptHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometFeedStoryQuiltsDowngradePromptHeaderStrategy",abstractKey:null}],storageKey:'header(supported:["CometFeedStoryGroupConflictAlertHeaderStrategy","CometGroupsAlertedContentHeaderStrategy","CometStoryGroupPendingQueueMemberPostApprovalHeaderStrategy","CometStoryCrisisCloseListingHeaderStrategy","CometFeedStoryAlbumHeaderStrategy","CometStoryPostUpsellHeaderStrategy","CometFeedStoryStoryHeaderStrategy","CometFeedStoryFallbackHeaderStrategy","CometFeedStoryCommerceHeaderStrategy","CometStorySocialLearningModuleHeaderStrategy","GeminiFeedStoryImportantHeaderStrategy","CometStoryPhotoReviewCTAHeaderStrategy","CometFeedStoryQuiltsUpgradePromptHeaderStrategy","CometFeedStoryQuiltsDowngradePromptHeaderStrategy"])'},xc,{alias:null,args:[{kind:"Literal",name:"supported",value:["CometFeedStoryAYMTPagePostFooterChannelStrategy","CometFeedStoryAYMTNewsFeedPostFooterChannelStrategy"]}],concreteType:null,kind:"LinkedField",name:"aymt_footer",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryAYMTFooterSection_story",fragmentName:"CometFeedStoryAYMTPagePostFooterChannelStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometFeedStoryAYMTPagePostFooterChannelStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryAYMTFooterSection_story",fragmentName:"CometFeedStoryAYMTNewsFeedPostFooterChannelStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometFeedStoryAYMTNewsFeedPostFooterChannelStrategy",abstractKey:null}],storageKey:'aymt_footer(supported:["CometFeedStoryAYMTPagePostFooterChannelStrategy","CometFeedStoryAYMTNewsFeedPostFooterChannelStrategy"])'},yc,{alias:null,args:[{kind:"Literal",name:"supported",value:["CometStoryFeedbackGroupConflictAlertUFIStrategy","CometStoryFeedbackMemoriesStrategy","CometStoryFeedbackGroupContentModerationQueueStrategy","CometStoryFeedbackGroupViewerContentDeletedPostStrategy","CometStoryFeedbackGroupDraftPostStrategy","GeminiStoryFeedbackGroupDraftedForOthersStrategy","CometStoryFeedbackGroupViewerContentPublishedPostStrategy","CometStoryFeedbackGroupScheduledPostStrategy","CometStoryFeedbackGroupScheduledPendingPostStrategy","CometStoryFeedbackGroupViewerContentScheduledPostStrategy","CometStoryFeedbackPendingPostStrategy","GeminiOnGalahadStoryFeedbackUFIStrategy","CometStoryFeedbackGroupPendingPostStrategy","CometStoryFeedbackGroupViewerContentPendingPostStrategy","CometStoryFeedbackGroupAnonymousPostUFIStrategy","CometStoryFeedbackUFIStrategy","CometStoryFeedbackDiscoveryHubUFIStrategy"]}],concreteType:null,kind:"LinkedField",name:"feedback",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackGroupConflictAlertUFIStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackGroupConflictAlertUFIStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackMemoriesStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackMemoriesStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackGroupContentModerationQueueStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackGroupContentModerationQueueStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackGroupViewerContentDeletedPostStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackGroupViewerContentDeletedPostStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackGroupDraftPostStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackGroupDraftPostStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"GeminiFeedStoryFeedbackGroupDraftedForOthersStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"GeminiStoryFeedbackGroupDraftedForOthersStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackGroupViewerContentPublishedPostStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackGroupViewerContentPublishedPostStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackGroupScheduledPostStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackGroupScheduledPostStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackGroupScheduledPendingPostStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackGroupScheduledPendingPostStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackGroupViewerContentScheduledPostStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackGroupViewerContentScheduledPostStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackPendingPostStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackPendingPostStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"GeminiOnGalahadFeedStoryFeedbackUFIStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"GeminiOnGalahadStoryFeedbackUFIStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackGroupPendingPostStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackGroupPendingPostStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackGroupViewerContentPendingPostStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackGroupViewerContentPendingPostStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackGroupAnonymousPostUFIStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackGroupAnonymousPostUFIStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackUFIStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackUFIStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackDiscoveryHubUFIStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackDiscoveryHubUFIStrategy",abstractKey:null}],storageKey:'feedback(supported:["CometStoryFeedbackGroupConflictAlertUFIStrategy","CometStoryFeedbackMemoriesStrategy","CometStoryFeedbackGroupContentModerationQueueStrategy","CometStoryFeedbackGroupViewerContentDeletedPostStrategy","CometStoryFeedbackGroupDraftPostStrategy","GeminiStoryFeedbackGroupDraftedForOthersStrategy","CometStoryFeedbackGroupViewerContentPublishedPostStrategy","CometStoryFeedbackGroupScheduledPostStrategy","CometStoryFeedbackGroupScheduledPendingPostStrategy","CometStoryFeedbackGroupViewerContentScheduledPostStrategy","CometStoryFeedbackPendingPostStrategy","GeminiOnGalahadStoryFeedbackUFIStrategy","CometStoryFeedbackGroupPendingPostStrategy","CometStoryFeedbackGroupViewerContentPendingPostStrategy","CometStoryFeedbackGroupAnonymousPostUFIStrategy","CometStoryFeedbackUFIStrategy","CometStoryFeedbackDiscoveryHubUFIStrategy"])'},{alias:null,args:[{kind:"Literal",name:"supported",value:["CometStoryMisinformationRelatedArticleStrategy","GeminiStoryPromotedPostMarkAsReadOuterFooterStrategy","CometFeedStoryPendingPostOuterFooterStrategy","CometCommunityViewFeedStoryOuterFooterStrategy","CometFeedStoryGroupConflictAlertOuterFooterStrategy"]}],concreteType:null,kind:"LinkedField",name:"outer_footer",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryOuterFooterSection_story",fragmentName:"CometFeedStoryMisinformationRelatedArticleStrategy_misinfoRelatedArticles",fragmentPropName:"misinfoRelatedArticles",kind:"ModuleImport"}],type:"CometStoryMisinformationRelatedArticleStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryOuterFooterSection_story",fragmentName:"GeminiStoryPromotedPostMarkAsReadOuterFooterStrategy_markAsRead",fragmentPropName:"markAsRead",kind:"ModuleImport"}],type:"GeminiStoryPromotedPostMarkAsReadOuterFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryOuterFooterSection_story",fragmentName:"CometFeedStoryPendingPostOuterFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStoryPendingPostOuterFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryOuterFooterSection_story",fragmentName:"CometCommunityViewFeedStoryOuterFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometCommunityViewFeedStoryOuterFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryOuterFooterSection_story",fragmentName:"CometFeedStoryGroupConflictAlertOuterFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStoryGroupConflictAlertOuterFooterStrategy",abstractKey:null}],storageKey:'outer_footer(supported:["CometStoryMisinformationRelatedArticleStrategy","GeminiStoryPromotedPostMarkAsReadOuterFooterStrategy","CometFeedStoryPendingPostOuterFooterStrategy","CometCommunityViewFeedStoryOuterFooterStrategy","CometFeedStoryGroupConflictAlertOuterFooterStrategy"])'},{alias:null,args:[{kind:"Literal",name:"supported",value:["CometStoryDefaultCallToActionStrategy"]}],concreteType:null,kind:"LinkedField",name:"call_to_action",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryCallToActionSection_story",fragmentName:"CometFeedStoryDefaultCallToActionStrategy_cta",fragmentPropName:"cta",kind:"ModuleImport"}],type:"CometStoryDefaultCallToActionStrategy",abstractKey:null}],storageKey:'call_to_action(supported:["CometStoryDefaultCallToActionStrategy"])'}],storageKey:null},zc,Ac,{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[c,{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"associated_group",plural:!1,selections:[c,La],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"click_tracking_linkshim_cb",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"encrypted_click_tracking",storageKey:null},n,o,{kind:"ClientExtension",selections:[u,{alias:null,args:null,kind:"ScalarField",name:"optimistic_loading_type",storageKey:null},{alias:null,args:null,concreteType:"OptimisticMediaAttachmentData",kind:"LinkedField",name:"optimistic_media_attachments",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"entID",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"objectURL",storageKey:null},Pb,{alias:null,args:null,kind:"ScalarField",name:"useCDNPreview",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creation_session_id",storageKey:null}]},p],type:"Story",abstractKey:null},q,r,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,Da,{kind:"InlineFragment",selections:[Ea,{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"target_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_viewer_see_sorting_switcher",storageKey:null},c],storageKey:null},{alias:null,args:null,concreteType:"StoryHeader",kind:"LinkedField",name:"story_header",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"style_infos",plural:!0,selections:[i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"GroupFeedSortingSwitcher",kind:"LinkedField",name:"viewer_available_sorting_switchers",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"option_description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"option_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sorting_setting",storageKey:null},i],storageKey:null}],type:"GroupsSectionHeaderStyleInfo",abstractKey:null}],storageKey:null}],storageKey:null}],type:"GroupsSectionHeaderUnit",abstractKey:null},s,Ya,W,uc,vc],storageKey:null}],storageKey:null}]},{condition:"isTimeline",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"TimelineFeedUnitsEdge",kind:"LinkedField",name:"timeline_feed_units_edge",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i,tc,{kind:"InlineFragment",selections:[n,c,o,Ma,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actors",plural:!0,selections:[i,bb,c,{kind:"InlineFragment",selections:[m,{kind:"InlineFragment",selections:[Ob],type:"Page",abstractKey:null},L,X],type:"Entity",abstractKey:"__isEntity"}],storageKey:null},{alias:null,args:e,concreteType:"CometStorySections",kind:"LinkedField",name:"comet_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:["GroupMemberProfileActionLink","GroupMemberAnonProfileActionLink","VideoHomeActorActionLink"]}],concreteType:null,kind:"LinkedField",name:"action_link",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryActorLink_story",fragmentName:"CometFeedStoryTitleGroupMemberActor_groupMemberProfileActionLink",fragmentPropName:"groupMemberProfileActionLink",kind:"ModuleImport"}],type:"GroupMemberProfileActionLink",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryActorLink_story",fragmentName:"CometFeedStoryTitleGroupAnonProfileActor_actionLink",fragmentPropName:"actionLink",kind:"ModuleImport"}],type:"GroupMemberAnonProfileActionLink",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryActorLink_story",fragmentName:"CometFeedStoryTitleVideoHomeActor_actionLink",fragmentPropName:"actionLink",kind:"ModuleImport"}],type:"VideoHomeActorActionLink",abstractKey:null}],storageKey:'action_link(supported:["GroupMemberProfileActionLink","GroupMemberAnonProfileActionLink","VideoHomeActorActionLink"])'},{alias:null,args:[{kind:"Literal",name:"supported",value:["CometFeedStoryActorVideoStrategy","CometFeedStoryActorPhotoStrategy"]}],concreteType:null,kind:"LinkedField",name:"actor_photo",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryActorPhotoSection_story",fragmentName:"CometFeedStoryActorVideoStrategy_actorPhoto",fragmentPropName:"actorPhoto",kind:"ModuleImport"}],type:"CometFeedStoryActorVideoStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryActorPhotoSection_story",fragmentName:"CometFeedStoryActorPhotoStrategy_actorPhoto",fragmentPropName:"actorPhoto",kind:"ModuleImport"}],type:"CometFeedStoryActorPhotoStrategy",abstractKey:null}],storageKey:'actor_photo(supported:["CometFeedStoryActorVideoStrategy","CometFeedStoryActorPhotoStrategy"])'},{alias:null,args:[{kind:"Literal",name:"supported",value:["CometFeedStoryPrivacySelectorStrategy","CometFeedStoryAudienceStrategy"]}],concreteType:null,kind:"LinkedField",name:"audience",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryAudienceSection_story",fragmentName:"CometFeedStoryPrivacySelectorStrategy_audience",fragmentPropName:"audience",kind:"ModuleImport"}],type:"CometFeedStoryPrivacySelectorStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryAudienceSection_story",fragmentName:"CometFeedStoryAudienceStrategy_audience",fragmentPropName:"audience",kind:"ModuleImport"}],type:"CometFeedStoryAudienceStrategy",abstractKey:null}],storageKey:'audience(supported:["CometFeedStoryPrivacySelectorStrategy","CometFeedStoryAudienceStrategy"])'},{alias:null,args:[{kind:"Literal",name:"supported",value:["CometFeedStoryBackdatedTimestampStrategy","CometFeedStoryScheduledTimestampStrategy","CometFeedStoryMinimizedTimestampStrategy","CometFeedStoryTimestampStrategy"]}],concreteType:null,kind:"LinkedField",name:"timestamp",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryTimestampSection_story",fragmentName:"CometFeedStoryBackdatedTimestampStrategy_timestamp",fragmentPropName:"timestamp",kind:"ModuleImport"}],type:"CometFeedStoryBackdatedTimestampStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryTimestampSection_story",fragmentName:"CometFeedStoryScheduledTimestampStrategy_timestamp",fragmentPropName:"timestamp",kind:"ModuleImport"}],type:"CometFeedStoryScheduledTimestampStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryTimestampSection_story",fragmentName:"CometFeedStoryMinimizedTimestampStrategy_timestamp",fragmentPropName:"timestamp",kind:"ModuleImport"}],type:"CometFeedStoryMinimizedTimestampStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryTimestampSection_story",fragmentName:"CometFeedStoryTimestampStrategy_timestamp",fragmentPropName:"timestamp",kind:"ModuleImport"}],type:"CometFeedStoryTimestampStrategy",abstractKey:null}],storageKey:'timestamp(supported:["CometFeedStoryBackdatedTimestampStrategy","CometFeedStoryScheduledTimestampStrategy","CometFeedStoryMinimizedTimestampStrategy","CometFeedStoryTimestampStrategy"])'},$,Bc],storageKey:null},zc,Cc,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"summary",plural:!1,selections:k,storageKey:null},{alias:null,args:[{kind:"Literal",name:"site",value:"www"}],kind:"ScalarField",name:"url",storageKey:'url(site:"www")'},Ea,Dc,{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"attached_story",plural:!1,selections:[Dc,{alias:null,args:e,concreteType:"CometStorySections",kind:"LinkedField",name:"comet_sections",plural:!1,selections:[$,Bc],storageKey:null},c],storageKey:null},Ha,Ia,p],type:"Story",abstractKey:null},q,r,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,s,Ya,W,uc,vc],storageKey:null}],storageKey:null}]},{condition:"isFundraiser",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"FundraiserWithPresenceToFeedPostsEdge",kind:"LinkedField",name:"fundraiser_feed_story_edge",plural:!1,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"node",plural:!1,selections:[c,Za],storageKey:null}],storageKey:null}]},{condition:"isPageNewsFeed",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"PagesNewsFeedEdge",kind:"LinkedField",name:"pages_news_feed_edge",plural:!1,selections:[wc],storageKey:null}]},{condition:"isFunFactPost",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{alias:"pageAnswers",args:Ec,concreteType:"UserToFunFactAnswersConnection",kind:"LinkedField",name:"fun_fact_answers",plural:!1,selections:[{alias:null,args:null,concreteType:"UserToFunFactAnswersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"node",plural:!1,selections:[Cc,{alias:null,args:null,concreteType:"TextFormatMetadata",kind:"LinkedField",name:"text_format_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"avatar_story_text_format_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"background_color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"background_gradient_color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"background_gradient_direction",storageKey:null},{alias:null,args:Fc,concreteType:"Image",kind:"LinkedField",name:"background_image",plural:!1,selections:v,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"font_weight",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"font_style",storageKey:null},{alias:null,args:Fc,concreteType:"Image",kind:"LinkedField",name:"portrait_background_image",plural:!1,selections:v,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text_align",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"preset_id",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"style_infos",plural:!0,selections:[i,{kind:"InlineFragment",selections:Gc,type:"AskedFunFactPromptAttachmentStyleInfo",abstractKey:null},{kind:"InlineFragment",selections:Gc,type:"FunFactPromptAttachmentStyleInfo",abstractKey:null},W],storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"subattachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[i,{alias:null,args:[{kind:"Literal",name:"height",value:150},y,{kind:"Literal",name:"width",value:150}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:v,storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null}],type:"Photo",abstractKey:null},W,{kind:"InlineFragment",selections:d,type:"ComposerMediaTemplatePreview",abstractKey:null},{kind:"InlineFragment",selections:d,type:"GenericAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:d,type:"MontageImage",abstractKey:null},{kind:"InlineFragment",selections:d,type:"MontageVideo",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},m,c,i],storageKey:null},h],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[lc,mc],storageKey:null}],storageKey:"fun_fact_answers(first:8)"},{alias:"pageAnswers",args:Ec,filters:null,handle:"connection",key:"ProfileCometAppCollectionFunFactsRendererItems_pageAnswers",kind:"LinkedHandle",name:"fun_fact_answers"},c],storageKey:null}]}],storageKey:null}]},params:{id:"3561136347340999",metadata:{},name:"ComposerStoryCreateMutation",operationKind:"mutation",text:null}}}();b.exports=a}),null);
__d("ComposerStoryEditMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"UFI2CommentsProvider_commentsKey"},b={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextEnableComment"},c={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsAdPreview"},d={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsAggregatedShare"},e={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsStorySet"},f={defaultValue:null,kind:"LocalArgument",name:"displayCommentsFeedbackContext"},aa={defaultValue:null,kind:"LocalArgument",name:"feedLocation"},ba={defaultValue:null,kind:"LocalArgument",name:"feedbackSource"},ca={defaultValue:null,kind:"LocalArgument",name:"focusCommentID"},da={defaultValue:null,kind:"LocalArgument",name:"input"},ea={defaultValue:null,kind:"LocalArgument",name:"isGroupViewerContent"},fa={defaultValue:!1,kind:"LocalArgument",name:"isSocialLearning"},ga={defaultValue:null,kind:"LocalArgument",name:"privacySelectorRenderLocation"},ha={defaultValue:null,kind:"LocalArgument",name:"renderLocation"},ia={defaultValue:null,kind:"LocalArgument",name:"scale"},ja={defaultValue:!1,kind:"LocalArgument",name:"useDefaultActor"},ka=[{kind:"Variable",name:"data",variableName:"input"}],g={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},h=[g],la={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"post_content_state",storageKey:null}],type:"GroupPostStoryFeedback",abstractKey:null},ma={alias:null,args:null,concreteType:"LearningCourseModule",kind:"LinkedField",name:"module",plural:!1,selections:h,storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},j=[{kind:"Variable",name:"location",variableName:"renderLocation"}],na={alias:null,args:[{kind:"Literal",name:"supported",value:["CometFeedStoryGroupConflictAlertContextLayoutStrategy","CometFeedStoryServicesLocalBusinessUpdatesContextLayoutStrategy","CometFeedStoryCoronavirusHubHelpContextLayoutStrategy","CometFeedStoryAggregatedContextLayoutStrategy","CometFeedStoryDefaultContextLayoutStrategy","CometFeedStorySocialLearningModuleContextLayoutStrategy"]}],concreteType:null,kind:"LinkedField",name:"context_layout",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryContextSection_story",fragmentName:"CometFeedStoryGroupConflictAlertContextLayoutStrategy_contextLayout",fragmentPropName:"contextLayout",kind:"ModuleImport"}],type:"CometFeedStoryGroupConflictAlertContextLayoutStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryContextSection_story",fragmentName:"CometFeedStoryServicesLocalBusinessUpdatesContextLayoutStrategy_contextLayout",fragmentPropName:"contextLayout",kind:"ModuleImport"}],type:"CometFeedStoryServicesLocalBusinessUpdatesContextLayoutStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryContextSection_story",fragmentName:"CometFeedStoryCoronavirusHubHelpContextLayoutStrategy_contextLayout",fragmentPropName:"contextLayout",kind:"ModuleImport"}],type:"CometFeedStoryCoronavirusHubHelpContextLayoutStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryContextSection_story",fragmentName:"CometFeedStoryAggregatedContextLayoutStrategy_contextLayout",fragmentPropName:"contextLayout",kind:"ModuleImport"}],type:"CometFeedStoryAggregatedContextLayoutStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryContextSection_story",fragmentName:"CometFeedStoryDefaultContextLayoutStrategy_contextLayout",fragmentPropName:"contextLayout",kind:"ModuleImport"}],type:"CometFeedStoryDefaultContextLayoutStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryContextSection_story",fragmentName:"CometFeedStorySocialLearningModuleContextLayoutStrategy_contextLayout",fragmentPropName:"contextLayout",kind:"ModuleImport"}],type:"CometFeedStorySocialLearningModuleContextLayoutStrategy",abstractKey:null}],storageKey:'context_layout(supported:["CometFeedStoryGroupConflictAlertContextLayoutStrategy","CometFeedStoryServicesLocalBusinessUpdatesContextLayoutStrategy","CometFeedStoryCoronavirusHubHelpContextLayoutStrategy","CometFeedStoryAggregatedContextLayoutStrategy","CometFeedStoryDefaultContextLayoutStrategy","CometFeedStorySocialLearningModuleContextLayoutStrategy"])'},oa={alias:null,args:[{kind:"Literal",name:"supported",value:["CometFeedStoryInformTreatmentFooterStrategy","CometStoryInsightsFooterStrategy","CometFeedStoryJobsFooterStrategy","CometFeedStoryGroupAdminHashtagsFooterStrategy","CometFeedStoryGroupTopicsFooterStrategy","CometProfilePlusStoryFooterStrategy","CometFeedStoryAutoAttachedUserFundingCTAFooterStrategy","CometFeedStoryStonehengeFooterStrategy","CometFeedStoryWoodhengeFooterStrategy","CometFeedStorySocialLearningModuleFooterStrategy","CometFeedStorySocialLearningMallCTAFooterStrategy","CometFeedStoryGroupInsightsFooterStrategy","CometFeedStoryCoronavirusCrisisMessageFooterStrategy","CometFeedStoryProfileCommercePostFooterStrategy"]}],concreteType:null,kind:"LinkedField",name:"footer",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryInformTreatmentFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStoryInformTreatmentFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryInsightsFooterStrategy_insights",fragmentPropName:"insights",kind:"ModuleImport"}],type:"CometStoryInsightsFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryJobsFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStoryJobsFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryGroupAdminHashtagsFooterStrategy_storySection",fragmentPropName:"storySection",kind:"ModuleImport"}],type:"CometFeedStoryGroupAdminHashtagsFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryGroupTopicsFooterStrategy_topics",fragmentPropName:"topics",kind:"ModuleImport"}],type:"CometFeedStoryGroupTopicsFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryProfilePlusPostFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometProfilePlusStoryFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryAutoAttachedUserFundingCTAFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStoryAutoAttachedUserFundingCTAFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryStonehengeFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStoryStonehengeFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryWoodhengeFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStoryWoodhengeFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStorySocialLearningModuleFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStorySocialLearningModuleFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStorySocialLearningMallCTAFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStorySocialLearningMallCTAFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryGroupInsightsFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStoryGroupInsightsFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryCoronavirusCrisisMessageFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStoryCoronavirusCrisisMessageFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFooterSection_story",fragmentName:"CometFeedStoryProfileCommercePostFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStoryProfileCommercePostFooterStrategy",abstractKey:null}],storageKey:'footer(supported:["CometFeedStoryInformTreatmentFooterStrategy","CometStoryInsightsFooterStrategy","CometFeedStoryJobsFooterStrategy","CometFeedStoryGroupAdminHashtagsFooterStrategy","CometFeedStoryGroupTopicsFooterStrategy","CometProfilePlusStoryFooterStrategy","CometFeedStoryAutoAttachedUserFundingCTAFooterStrategy","CometFeedStoryStonehengeFooterStrategy","CometFeedStoryWoodhengeFooterStrategy","CometFeedStorySocialLearningModuleFooterStrategy","CometFeedStorySocialLearningMallCTAFooterStrategy","CometFeedStoryGroupInsightsFooterStrategy","CometFeedStoryCoronavirusCrisisMessageFooterStrategy","CometFeedStoryProfileCommercePostFooterStrategy"])'},pa={alias:null,args:null,kind:"ScalarField",name:"encrypted_tracking",storageKey:null},qa={alias:null,args:j,kind:"ScalarField",name:"should_host_actor_link_in_watch",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"group_id",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},m=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scale",storageKey:null},l,{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],n={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},p={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"tombstone_actions",plural:!0,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"action_type",storageKey:null}],storageKey:null};p={alias:null,args:null,concreteType:"TombstoneFeedUnit",kind:"LinkedField",name:"tombstone_feedunit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_hidden_from_client",storageKey:null},{alias:null,args:null,concreteType:"Tombstone",kind:"LinkedField",name:"tombstone",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"action",storageKey:null},g,k,{alias:null,args:null,kind:"ScalarField",name:"author_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"feedback_id",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"executed_action",plural:!1,selections:[i,{kind:"TypeDiscriminator",abstractKey:"__isNFXAction"},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"icon",plural:!1,selections:m,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"context",storageKey:null},n,g],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"canUndo",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_loading",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"negativeFeedbackActionID",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subTitle",storageKey:null},o,{alias:null,args:null,concreteType:"DeletedPostTombstoneContent",kind:"LinkedField",name:"deleted_post_tombstone",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"member_stats_text",storageKey:null},p],storageKey:null},{alias:null,args:null,concreteType:"DeclinedPendingPostTombstoneContent",kind:"LinkedField",name:"declined_pending_post_tombstone",plural:!1,selections:[p],storageKey:null}],storageKey:null}],storageKey:null};var ra={documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFeedUnitStoryStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"},sa={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFeedUnitGoodwillMemoryStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"GoodwillCometStory",abstractKey:null},ta={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometPYMKQPFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"PaginatedPeopleYouMayKnowFeedUnit",abstractKey:null},ua={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFriendRequestsFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"FriendRequestsFeedUnit",abstractKey:null},va={documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometFeedUnitQuickPromotionStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"},wa={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"GroupsCometGYSJFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"GroupsYouShouldJoinFeedUnit",abstractKey:null},xa={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometGroupsSuggestionFeedUnitStrategy_unit",fragmentPropName:"unit",kind:"ModuleImport"}],type:"GroupsSuggestionUnit",abstractKey:null},ya={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometPYMIQPFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"PaginatedGroupsPeopleYouMayInviteFeedUnit",abstractKey:null},za={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometPYMAQPFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"PagesYouMayAdvertiseFeedUnit",abstractKey:null},Aa={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"GeminiPYSFQPFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"PeopleYouShouldFollowAtWorkFeedUnit",abstractKey:null},Ba={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometSPFFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"SuggestedPublicEntitiesToFollowFeedUnit",abstractKey:null},Ca={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CoronavirusCommunityHelpFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"CoronavirusCommunityHelpFeedUnit",abstractKey:null},Da={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometMarketplaceShowcaseFeedUnitStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"ShowcaseMarketplaceFeedUnit",abstractKey:null},Ea={kind:"InlineFragment",selections:[{documentName:"CometFeedUnitContainerSection_feedUnit",fragmentName:"CometEndOfFeedUpsellStrategy_feedUnit",fragmentPropName:"feedUnit",kind:"ModuleImport"}],type:"EndOfFeedUpsellFeedUnit",abstractKey:null},q=[i,g],r={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},t=[s],u={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},Fa={alias:null,args:null,concreteType:"QuickPromotionFeedUnitItem",kind:"LinkedField",name:"quick_promotion_items",plural:!0,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"quick_promotion",plural:!1,selections:h,storageKey:null}],storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null};l=[l];var Ga={alias:null,args:null,concreteType:"LearningCourseUnitModulesEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"LearningCourseModule",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:"contentType",args:null,kind:"ScalarField",name:"content_type",storageKey:null},g,{alias:"isCompleted",args:null,kind:"ScalarField",name:"has_viewer_completed",storageKey:null},v,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"thumbnail",plural:!1,selections:l,storageKey:null}],storageKey:null}],storageKey:null},w=[r],x={kind:"Variable",name:"use_default_actor",variableName:"useDefaultActor"},y=[x],z={kind:"TypeDiscriminator",abstractKey:"__isActor"},A={kind:"Variable",name:"scale",variableName:"scale"},B={alias:"profile_picture_depth_0",args:[{kind:"Literal",name:"height",value:32},A,{kind:"Literal",name:"width",value:32}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:l,storageKey:null},Ha=[{kind:"Literal",name:"height",value:24},A,{kind:"Literal",name:"width",value:24}],C={alias:"profile_picture_depth_1",args:Ha,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:l,storageKey:null},D={alias:null,args:null,kind:"ScalarField",name:"gender",storageKey:null},E={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]},Ia={kind:"InlineFragment",selections:[D,E],type:"User",abstractKey:null},Ja={alias:null,args:y,concreteType:null,kind:"LinkedField",name:"viewer_actor",plural:!1,selections:[i,g,z,v,B,C,Ia],storageKey:null},Ka=[{kind:"Variable",name:"feedback_source_integer",variableName:"feedbackSource"}];x={alias:null,args:[{kind:"Variable",name:"location",variableName:"feedLocation"},x],kind:"ScalarField",name:"can_viewer_comment",storageKey:null};var La={alias:null,args:null,kind:"ScalarField",name:"subscription_target_id",storageKey:null},Ma={alias:null,args:null,kind:"ScalarField",name:"broadcast_is_ama_enabled",storageKey:null},Na={alias:null,args:null,kind:"ScalarField",name:"broadcast_status",storageKey:null},Oa={alias:null,args:null,kind:"ScalarField",name:"is_gaming_video",storageKey:null},Pa={alias:null,args:y,kind:"ScalarField",name:"comment_composer_placeholder",storageKey:null},Qa={alias:"comment_count",args:null,concreteType:"TopLevelCommentsConnection",kind:"LinkedField",name:"top_level_comments",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null}],storageKey:null},Ra={alias:"toplevel_comment_count",args:[{kind:"Literal",name:"orderby",value:"toplevel"}],concreteType:"TopLevelCommentsConnection",kind:"LinkedField",name:"top_level_comments",plural:!1,selections:w,storageKey:'top_level_comments(orderby:"toplevel")'},Sa={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"threading_config",plural:!1,selections:[i],storageKey:null},Ta={alias:null,args:null,kind:"ScalarField",name:"can_viewer_pin_live_comments",storageKey:null},Ua={alias:null,args:null,concreteType:"BroadcastPinnedCommentEvent",kind:"LinkedField",name:"latest_pinned_comment_event",plural:!1,selections:[{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"pinned_comment",plural:!1,selections:h,storageKey:null},g],storageKey:null},Va={alias:null,args:null,concreteType:"WorkAMAUFIAnswerEventActionLinksCommentModuleRenderer",kind:"LinkedField",name:"work_answer_event_action_links_comment_renderer",plural:!1,selections:[{documentName:"CometUFICommentActionLinks_feedback_work_answer_event_action_links_comment_renderer",fragmentName:"GeminiUFIAMABroadcastAnswerActionLinks_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],storageKey:null},F={kind:"Variable",name:"feed_context_enable_comment",variableName:"displayCommentsContextEnableComment"},G={kind:"Variable",name:"feed_context_fb_feed_location",variableName:"feedLocation"},H={kind:"Variable",name:"feed_context_is_ad_preview",variableName:"displayCommentsContextIsAdPreview"},I={kind:"Variable",name:"feed_context_is_aggregated_share",variableName:"displayCommentsContextIsAggregatedShare"},J={kind:"Variable",name:"feed_context_is_story_set",variableName:"displayCommentsContextIsStorySet"},K={kind:"Variable",name:"feedback_context",variableName:"displayCommentsFeedbackContext"},Wa={kind:"Variable",name:"feedback_source",variableName:"feedbackSource"},L={kind:"Variable",name:"focus_comment_id",variableName:"focusCommentID"},M={kind:"Literal",name:"is_initial_fetch",value:!0},Xa=[F,G,H,I,J,K,Wa,L,M,{kind:"Literal",name:"is_top_level",value:!0}],Ya={alias:null,args:null,kind:"ScalarField",name:"comment_order",storageKey:null},Za={alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"expanded_sub_reply_parents",plural:!0,selections:h,storageKey:null},$a={alias:null,args:null,kind:"ScalarField",name:"is_initially_expanded",storageKey:null},ab={alias:null,args:null,kind:"ScalarField",name:"page_size",storageKey:null},bb={alias:null,args:null,kind:"ScalarField",name:"reply_comment_order",storageKey:null},cb={alias:null,args:null,kind:"ScalarField",name:"should_render_composer_preemptively",storageKey:null},db={alias:null,args:null,kind:"ScalarField",name:"after_count",storageKey:null},eb={alias:null,args:null,kind:"ScalarField",name:"before_count",storageKey:null},fb={alias:null,args:null,kind:"ScalarField",name:"legacy_fbid",storageKey:null},N={alias:null,args:null,concreteType:"WorkUserInfo",kind:"LinkedField",name:"work_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_active_account",storageKey:null}],storageKey:null},O={alias:null,args:null,kind:"ScalarField",name:"is_verified",storageKey:null},P={alias:null,args:null,kind:"ScalarField",name:"short_name",storageKey:null};z={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"author",plural:!1,selections:[i,g,v,z,B,C,{kind:"InlineFragment",selections:[u],type:"Entity",abstractKey:"__isEntity"},{kind:"InlineFragment",selections:[N,O,P,u,D,E],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[O,u],type:"Page",abstractKey:null}],storageKey:null};B={alias:null,args:null,kind:"ScalarField",name:"is_author_weak_reference",storageKey:null};C={alias:null,args:null,kind:"ScalarField",name:"created_time",storageKey:null};E={alias:null,args:null,kind:"ScalarField",name:"spam_display_mode",storageKey:null};var gb={alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:["StoryAttachmentAnimatedImageShareStyleRenderer","StoryAttachmentDonationStyleRenderer","StoryAttachmentFallbackStyleRenderer","StoryAttachmentPhotoStyleRenderer","StoryAttachmentQuiltImageStyleRenderer","StoryAttachmentStickerStyleRenderer","StoryAttachmentStickerAvatarStyleRenderer","StoryAttachmentVideoAutoplayStyleRenderer","StoryAttachmentVideoStyleRenderer","StoryAttachmentTipJarPaymentStyleRenderer","StoryAttachmentCommentPlaceInfoStyleRenderer","StoryAttachmentChatCommandStyleRenderer","StoryAttachmentPageInCommentStyleRenderer","StoryAttachmentInstantGamesTournamentActivityStyleRenderer","StoryAttachmentInstantGamesUpdateCommentStyleRenderer","StoryAttachmentSubscriptionGiftStyleRenderer"]}],concreteType:null,kind:"LinkedField",name:"style_type_renderer",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentAnimatedImageShareAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentAnimatedImageShareStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentDonationAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentDonationStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentFallbackAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentFallbackStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentImageAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentPhotoStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentQuiltImageAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentQuiltImageStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentStickerAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentStickerStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentStickerAvatarAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentStickerAvatarStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentVideoAutoplayAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentVideoAutoplayStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentVideoAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentVideoStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentTipJarPaymentAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentTipJarPaymentStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentPlaceInfoAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentCommentPlaceInfoStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentChatCommandAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentChatCommandStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentPageInCommentAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentPageInCommentStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentInstantGamesTournamentActivityAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentInstantGamesTournamentActivityStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentInstantGamesUpdateCommentAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentInstantGamesUpdateCommentStyleRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFISubscriptionGiftingAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentSubscriptionGiftStyleRenderer",abstractKey:null}],storageKey:'style_type_renderer(supported:["StoryAttachmentAnimatedImageShareStyleRenderer","StoryAttachmentDonationStyleRenderer","StoryAttachmentFallbackStyleRenderer","StoryAttachmentPhotoStyleRenderer","StoryAttachmentQuiltImageStyleRenderer","StoryAttachmentStickerStyleRenderer","StoryAttachmentStickerAvatarStyleRenderer","StoryAttachmentVideoAutoplayStyleRenderer","StoryAttachmentVideoStyleRenderer","StoryAttachmentTipJarPaymentStyleRenderer","StoryAttachmentCommentPlaceInfoStyleRenderer","StoryAttachmentChatCommandStyleRenderer","StoryAttachmentPageInCommentStyleRenderer","StoryAttachmentInstantGamesTournamentActivityStyleRenderer","StoryAttachmentInstantGamesUpdateCommentStyleRenderer","StoryAttachmentSubscriptionGiftStyleRenderer"])'},{alias:null,args:null,kind:"ScalarField",name:"style_list",storageKey:null}],storageKey:null},Q={kind:"Variable",name:"feed_location",variableName:"feedLocation"},R=[Q],hb={alias:null,args:R,kind:"ScalarField",name:"comment_menu_tooltip",storageKey:null},ib={alias:null,args:R,kind:"ScalarField",name:"should_show_comment_menu",storageKey:null},jb={alias:null,args:null,concreteType:"PrivateReplyContext",kind:"LinkedField",name:"private_reply_context",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],storageKey:null},kb={alias:null,args:null,concreteType:"PrivateReplyContext",kind:"LinkedField",name:"page_private_reply",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"private_reply_render",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometUFICommentPrivateReplyLink_feedback",fragmentName:"CometUFICommentPrivateReplyLinkRenderer_privateReplyCometRenderer",fragmentPropName:"privateReplyCometRenderer",kind:"ModuleImport"}],type:"PagesMessagingPrivateReplyCometRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentPrivateReplyLink_feedback",fragmentName:"BizInboxCommentPrivateReplyLinkRenderer_privateReplyBizRenderer",fragmentPropName:"privateReplyBizRenderer",kind:"ModuleImport"}],type:"BizMessagingPrivateReplyRenderer",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:h,storageKey:null}],storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},lb={alias:null,args:y,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"viewer_feedback_reaction_info",plural:!1,selections:[S,g],storageKey:null},mb={alias:null,args:null,concreteType:"FeedbackReaction",kind:"LinkedField",name:"supported_reactions",plural:!0,selections:[S],storageKey:null};S={alias:null,args:[{kind:"Literal",name:"orderby",value:["COUNT_DESC","REACTION_TYPE"]}],concreteType:"TopReactionsConnection",kind:"LinkedField",name:"top_reactions",plural:!1,selections:[{alias:null,args:null,concreteType:"TopReactionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"reaction_count",storageKey:null},{alias:null,args:null,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"node",plural:!1,selections:[S,g,{alias:null,args:null,kind:"ScalarField",name:"reaction_type",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:'top_reactions(orderby:["COUNT_DESC","REACTION_TYPE"])'};var nb={alias:null,args:null,concreteType:"ReactorsOfContentConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"is_empty",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"count_reduced",storageKey:null}],storageKey:null},ob={alias:null,args:y,kind:"ScalarField",name:"can_viewer_react",storageKey:null},pb={alias:null,args:null,concreteType:"PublicConversationsExperimentContext",kind:"LinkedField",name:"public_conversations_context",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"comment_vote_ui_version",storageKey:null}],storageKey:null},qb={alias:null,args:null,kind:"ScalarField",name:"should_show_top_reactions",storageKey:null};F=[F,G,H,I,J,K,Wa,L,M,{kind:"Literal",name:"is_top_level",value:!1}];G={alias:null,args:null,kind:"ScalarField",name:"upvote_downvote_total",storageKey:null};H={alias:null,args:null,kind:"ScalarField",name:"viewer_comment_vote_state",storageKey:null};I={alias:null,args:null,kind:"ScalarField",name:"work_ama_answer_status",storageKey:null};J={alias:null,args:null,concreteType:"PageAdminActorInfo",kind:"LinkedField",name:"page_admin_actor_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"creator_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creator_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creator_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"page_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"profile_uri",storageKey:null}],storageKey:null};K={alias:null,args:null,kind:"ScalarField",name:"is_author_banned_by_content_owner",storageKey:null};L={alias:null,args:null,kind:"ScalarField",name:"can_viewer_upvote_downvote",storageKey:null};M={alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"comment_parent",plural:!1,selections:[g,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"author",plural:!1,selections:[i,v,g,{kind:"InlineFragment",selections:[P,D],type:"User",abstractKey:null}],storageKey:null}],storageKey:null};P={alias:null,args:null,concreteType:"EditHistoryConnection",kind:"LinkedField",name:"edit_history",plural:!1,selections:w,storageKey:null};D={alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"parent_feedback",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_viewer_ban_user",storageKey:null},x,g,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"viewer_acts_as_page",plural:!1,selections:h,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_fbid",storageKey:null},{alias:null,args:null,concreteType:"PoliticalFigureData",kind:"LinkedField",name:"political_figure_data",plural:!1,selections:[v,{alias:null,args:null,concreteType:"PoliticalOffice",kind:"LinkedField",name:"political_office",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"generic_title",storageKey:null},g],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"best_profile",plural:!1,selections:q,storageKey:null},g],storageKey:null}],storageKey:null};var T=[{kind:"Literal",name:"translation_type",value:"ORIGINAL"}],U={alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},V={alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null},W=[{kind:"Literal",name:"delight_surface",value:"COMMENT"}];A=[A];var X={kind:"InlineFragment",selections:h,type:"Node",abstractKey:"__isNode"},Y={alias:null,args:null,concreteType:"WorkForeignEntityInfo",kind:"LinkedField",name:"work_foreign_entity_info",plural:!1,selections:[n],storageKey:null},Z={alias:null,args:null,kind:"ScalarField",name:"entity_is_weak_reference",storageKey:null};W={alias:null,args:T,concreteType:null,kind:"LinkedField",name:"preferred_body",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"translation_type",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DelightAtRange",kind:"LinkedField",name:"delight_ranges",plural:!0,selections:[U,V,{alias:null,args:null,concreteType:"TextDelightCampaign",kind:"LinkedField",name:"campaign",plural:!1,selections:[i,{alias:null,args:W,concreteType:"TextDelightStylePair",kind:"LinkedField",name:"delight_styles",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"style",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:'delight_styles(delight_surface:"COMMENT")'},{alias:null,args:W,concreteType:"DelightsAnimation",kind:"LinkedField",name:"delight_asset",plural:!1,selections:[g,{alias:null,args:null,kind:"ScalarField",name:"animation_uri",storageKey:null}],storageKey:'delight_asset(delight_surface:"COMMENT")'},g],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ImageAtRange",kind:"LinkedField",name:"image_ranges",plural:!0,selections:[U,V,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity_with_image",plural:!1,selections:[i,{alias:null,args:A,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:m,storageKey:null},X],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"InlineStyleAtRange",kind:"LinkedField",name:"inline_style_ranges",plural:!0,selections:[U,V,{alias:null,args:null,kind:"ScalarField",name:"inline_style",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AggregatedEntitiesAtRange",kind:"LinkedField",name:"aggregated_ranges",plural:!0,selections:[U,V,r,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"sample_entities",plural:!0,selections:[i,{kind:"InlineFragment",selections:[g,v],type:"User",abstractKey:null},X],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[i,{kind:"TypeDiscriminator",abstractKey:"__isEntity"},{alias:null,args:[{kind:"Literal",name:"site",value:"comet"}],kind:"ScalarField",name:"url",storageKey:'url(site:"comet")'},{alias:"mobileUrl",args:[{kind:"Literal",name:"site",value:"mobile"}],kind:"ScalarField",name:"url",storageKey:'url(site:"mobile")'},{kind:"InlineFragment",selections:[g,{kind:"InlineFragment",selections:[{alias:"profile_url",args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"Entity",abstractKey:"__isEntity"}],type:"Actor",abstractKey:"__isActor"},{kind:"InlineFragment",selections:[{documentName:"CometTextWithEntitiesRelay_textWithEntities",fragmentName:"GroupsCometHashtagsStoryMessageHashtagLink_hashtag",fragmentPropName:"hashtag",kind:"ModuleImport"}],type:"GroupHashtag",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"category_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"verification_status",storageKey:null},g,O,{documentName:"CometTextWithEntitiesRelay_textWithEntities",fragmentName:"PagesCometPageLink_page",fragmentPropName:"page",kind:"ModuleImport"}],type:"Page",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"external_url",storageKey:null}],type:"ExternalUrl",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"time_index",storageKey:null}],type:"VideoTimeIndex",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"web_link",plural:!1,selections:[i,u,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"fbclid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lynx_mode",storageKey:null}],type:"ExternalWebLink",abstractKey:null}],storageKey:null}],type:"WebLinkable",abstractKey:"__isWebLinkable"},{kind:"InlineFragment",selections:[Y,N],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[Y,{alias:null,args:null,kind:"ScalarField",name:"work_official_status",storageKey:null}],type:"Group",abstractKey:null},X],storageKey:null},Z,U,V],storageKey:null},{alias:null,args:null,concreteType:"ColorAtRange",kind:"LinkedField",name:"color_ranges",plural:!0,selections:[U,V,{alias:null,args:null,kind:"ScalarField",name:"hex_rgb_color_with_pound_key",storageKey:null}],storageKey:null},s],type:"TextWithEntities",abstractKey:null}],storageKey:'preferred_body(translation_type:"ORIGINAL")'};O={alias:null,args:null,concreteType:"PostTranslatability",kind:"LinkedField",name:"translatability_for_viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"source_dialect_name",storageKey:null}],storageKey:null};N={alias:null,args:null,kind:"ScalarField",name:"translation_available_for_viewer",storageKey:null};Y={alias:null,args:null,kind:"ScalarField",name:"is_hidden_by_content_owner",storageKey:null};var rb={alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"if_viewer_can_share",plural:!1,selections:[g,{documentName:"CometUFICommentActionLinks_comment__if_viewer_can_share",fragmentName:"CometUFICommentShareActionLink_comment",fragmentPropName:"comment",kind:"ModuleImport"}],storageKey:null};T={alias:"body_renderer",args:T,concreteType:null,kind:"LinkedField",name:"preferred_body",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometUFICommentBody_comment",fragmentName:"CometUFICommentBodyTextWithEntities_textWithEntities",fragmentPropName:"textWithEntities",kind:"ModuleImport"}],type:"TextWithEntities",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentBody_comment",fragmentName:"CometUFICommentBodyComposedTextWithEntities_composedTextWithEntities",fragmentPropName:"composedTextWithEntities",kind:"ModuleImport"}],type:"FBMarkdownCommentBody",abstractKey:null}],storageKey:'preferred_body(translation_type:"ORIGINAL")'};var sb={alias:null,args:null,kind:"ScalarField",name:"timestamp_in_video",storageKey:null},tb={alias:null,args:null,kind:"ScalarField",name:"written_while_video_was_live",storageKey:null},ub={alias:null,args:R,concreteType:null,kind:"LinkedField",name:"author_user_signals_renderer",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometUFICommentBody_comment_author_user_signals_renderer",fragmentName:"CometUFICommentActorMultipleUserSignalsRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"CometUFICommentActorMultipleUserSignalsRenderer",abstractKey:null}],storageKey:null},$={kind:"Literal",name:"is_comet",value:!0};$={alias:null,args:null,concreteType:"GroupCommentInfo",kind:"LinkedField",name:"group_comment_info",plural:!1,selections:[{alias:null,args:null,concreteType:"GroupMembership",kind:"LinkedField",name:"author_membership",plural:!1,selections:[{alias:null,args:R,concreteType:"RenderableGroupMemberTag",kind:"LinkedField",name:"top_member_tag",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"tag_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"member_id",storageKey:null},k,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"small_icon",plural:!1,selections:l,storageKey:null}],storageKey:null},g],storageKey:null},{alias:"author_badge",args:[Q,$,{kind:"Literal",name:"whitelist",value:"ORIGINAL_POST_AUTHOR"}],concreteType:"GroupCommentInfoCommentMemberBadgesConnection",kind:"LinkedField",name:"comment_member_badges",plural:!1,selections:[{alias:null,args:null,concreteType:"GroupCommentInfoCommentMemberBadgesEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"RenderableGroupMemberTag",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"badge_name",plural:!1,selections:t,storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"badge_description",plural:!1,selections:t,storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"group",plural:!1,selections:h,storageKey:null},{alias:null,args:[Q,$],kind:"ScalarField",name:"is_author_with_member_profile",storageKey:null},{documentName:"CometUFICommentActorLink_comment",fragmentName:"CometUFIGroupCommentActorLink_groupCommentInfo",fragmentPropName:"groupCommentInfo",kind:"ModuleImport"}],storageKey:null};var vb={alias:null,args:null,kind:"ScalarField",name:"has_constituent_badge",storageKey:null},wb={alias:null,args:null,kind:"ScalarField",name:"can_see_constituent_badge_upsell",storageKey:null},xb={alias:null,args:null,kind:"ScalarField",name:"legacy_token",storageKey:null},yb={alias:null,args:null,kind:"ScalarField",name:"question_and_answer_type",storageKey:null},zb={alias:null,args:null,kind:"ScalarField",name:"is_author_original_poster",storageKey:null},Ab={alias:null,args:null,kind:"ScalarField",name:"is_viewer_comment_poster",storageKey:null},Bb={alias:null,args:null,kind:"ScalarField",name:"is_author_bot",storageKey:null},Cb={alias:null,args:null,kind:"ScalarField",name:"is_author_non_coworker",storageKey:null},Db={alias:null,args:R,concreteType:null,kind:"LinkedField",name:"author_user_signals_renderer",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometUFICommentActorLinkBadges_comment",fragmentName:"CometUFICommentActorSingleUserSignalRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"CometUFICommentActorSingleUserSignalRenderer",abstractKey:null}],storageKey:null};Q={alias:null,args:[Q,{kind:"Literal",name:"supported",value:["CometUFICommentActorConstituentBadge","CometUFICommentActorVerifiedBadge","CometUFICommentActorGroupMemberBadge","CometUFICommentActorGroupMemberAuthorBadge","CometUFICommentActorSingleUserSignalRenderer","CometUFICommentActorAMAQuestionAnswerBadge","GeminiUFICommentActorDeactivatedAccountBadge","GeminiUFICommentActorBotBadge","GeminiUFICommentActorNonCoworkerBadge","CometUFICommentPostAuthorBadge"]}],concreteType:null,kind:"LinkedField",name:"author_badge_renderers",plural:!0,selections:[i,{kind:"InlineFragment",selections:[{documentName:"useCometUFICommentActorLinkBadges_comment",fragmentName:"CometUFICommentActorConstituentBadge3DWrapper_badge",fragmentPropName:"badge",kind:"ModuleImport"}],type:"CometUFICommentActorConstituentBadge",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"useCometUFICommentActorLinkBadges_comment",fragmentName:"CometUFICommentActorVerifiedBadge3DWrapper_badge",fragmentPropName:"badge",kind:"ModuleImport"}],type:"CometUFICommentActorVerifiedBadge",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"useCometUFICommentActorLinkBadges_comment",fragmentName:"CometUFICommentActorGroupMemberBadge3DWrapper_badge",fragmentPropName:"badge",kind:"ModuleImport"}],type:"CometUFICommentActorGroupMemberBadge",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"useCometUFICommentActorLinkBadges_comment",fragmentName:"CometUFICommentActorGroupMemberAuthorBadge3DWrapper_badge",fragmentPropName:"badge",kind:"ModuleImport"}],type:"CometUFICommentActorGroupMemberAuthorBadge",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"useCometUFICommentActorLinkBadges_comment",fragmentName:"CometUFICommentActorSingleUserSignalRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"CometUFICommentActorSingleUserSignalRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"useCometUFICommentActorLinkBadges_comment",fragmentName:"CometUFICommentActorAMAQuestionAnswerBadge3DWrapper_badge",fragmentPropName:"badge",kind:"ModuleImport"}],type:"CometUFICommentActorAMAQuestionAnswerBadge",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"useCometUFICommentActorLinkBadges_comment",fragmentName:"GeminiUFICommentActorDeactivatedAccountBadge3DWrapper_badge",fragmentPropName:"badge",kind:"ModuleImport"}],type:"GeminiUFICommentActorDeactivatedAccountBadge",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"useCometUFICommentActorLinkBadges_comment",fragmentName:"GeminiUFICommentActorBotBadge3DWrapper_badge",fragmentPropName:"badge",kind:"ModuleImport"}],type:"GeminiUFICommentActorBotBadge",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"useCometUFICommentActorLinkBadges_comment",fragmentName:"GeminiUFICommentActorNonCoworkerBadge3DWrapper_badge",fragmentPropName:"badge",kind:"ModuleImport"}],type:"GeminiUFICommentActorNonCoworkerBadge",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"useCometUFICommentActorLinkBadges_comment",fragmentName:"CometUFICommentPostAuthorBadge3DWrapper_badge",fragmentPropName:"badge",kind:"ModuleImport"}],type:"CometUFICommentPostAuthorBadge",abstractKey:null}],storageKey:null};var Eb={alias:null,args:R,concreteType:"IdentityBadge",kind:"LinkedField",name:"identity_badges_web",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"badge_asset",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"multiple_badge_asset",storageKey:null},s,{alias:null,args:null,kind:"ScalarField",name:"information_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"information_asset",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"information_description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"identity_badge_type",storageKey:null}],storageKey:null};R={alias:null,args:R,kind:"ScalarField",name:"can_show_multiple_identity_badges",storageKey:null};var Fb={alias:null,args:null,kind:"ScalarField",name:"can_viewer_disable_preview",storageKey:null};A={alias:null,args:null,concreteType:"InlineSurveyStoryActionLink",kind:"LinkedField",name:"inline_survey_config",plural:!1,selections:[{alias:null,args:A,concreteType:"Image",kind:"LinkedField",name:"favicon",plural:!1,selections:m,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"followup_choices",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"followup_question",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"main_choices",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"main_question",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"privacy_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"session_blob",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thankyou_text",storageKey:null},o,{alias:null,args:null,kind:"ScalarField",name:"tessa_survey_config_id",storageKey:null},{documentName:"CometUFIComment_comment",fragmentName:"CometUFICommentQualitySurvey_inlineSurveyConfig",fragmentPropName:"inlineSurveyConfig",kind:"ModuleImport"}],storageKey:null};m={alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"attached_story",plural:!1,selections:q,storageKey:null};o={alias:null,args:null,concreteType:"WorkAMAUFIAnsweredEventCommentModuleRenderer",kind:"LinkedField",name:"work_answered_event_comment_renderer",plural:!1,selections:[{documentName:"CometUFIComment_comment_work_answered_event_comment_renderer",fragmentName:"CometUFIAMABroadcastAnswerEventRow_data",fragmentPropName:"data",kind:"ModuleImport"}],storageKey:null};var Gb={alias:null,args:[{kind:"Literal",name:"supported",value:["StarsElevatedCommentData"]}],concreteType:null,kind:"LinkedField",name:"elevated_comment_data",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometUFIComment_comment_elevated_comment_data",fragmentName:"GFIStarsElevatedCommentContent_starsElevatedCommentData",fragmentPropName:"starsElevatedCommentData",kind:"ModuleImport"}],type:"StarsElevatedCommentData",abstractKey:null}],storageKey:'elevated_comment_data(supported:["StarsElevatedCommentData"])'};s={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"body",plural:!1,selections:[s,{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[i,X],storageKey:null},Z,U,V],storageKey:null}],storageKey:null};X={alias:null,args:null,kind:"ScalarField",name:"is_markdown_enabled",storageKey:null};Z={alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"reply_parent_comment",plural:!1,selections:h,storageKey:null};U={alias:"threading_depth",args:null,kind:"ScalarField",name:"depth",storageKey:null};V={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"optimistic_action",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"optimistic_error_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"optimistic_error",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"client_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reply_comment_parent_fbid",storageKey:null}]};var Hb={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},Ib={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_previous_page",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"start_cursor",storageKey:null}],storageKey:null},Jb={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"ufi2_connection_generation",storageKey:null}]},Kb=["feedback_source","focus_comment_id","comment_order"],Lb={kind:"Variable",name:"__dynamicKey",variableName:"UFI2CommentsProvider_commentsKey"},Mb={alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"associated_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visibility",storageKey:null},g],storageKey:null};return{fragment:{argumentDefinitions:[a,b,c,d,e,f,aa,ba,ca,da,ea,fa,ga,ha,ia,ja],kind:"Fragment",metadata:null,name:"ComposerStoryEditMutation",selections:[{alias:null,args:ka,concreteType:"StoryEditResponsePayload",kind:"LinkedField",name:"story_edit",plural:!1,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"story",plural:!1,selections:[g,{args:null,kind:"FragmentSpread",name:"CometFeedUnitStoryStrategy_feedUnit"},{args:null,kind:"FragmentSpread",name:"CometFeedUnitContainerSection_feedUnit"},{condition:"isGroupViewerContent",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"to",plural:!1,selections:[{kind:"InlineFragment",selections:h,type:"Group",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_feedback",plural:!1,selections:[la],storageKey:null}]},{condition:"isSocialLearning",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"SocialLearningInfoUnitModule",kind:"LinkedField",name:"social_learning_info_unit_module",plural:!1,selections:[{alias:null,args:null,concreteType:"LearningCourseInfo",kind:"LinkedField",name:"info",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"GroupsCometSocialLearningUnitCourseProgress_courseInfo"}],storageKey:null},ma,{alias:null,args:null,concreteType:"LearningCourseUnit",kind:"LinkedField",name:"unit",plural:!1,selections:[g,{args:null,kind:"FragmentSpread",name:"GroupsCometSocialLearningLeftRailUnit_unit"},{args:null,kind:"FragmentSpread",name:"GroupsCometSocialLearningUnitList_unit"},{args:null,kind:"FragmentSpread",name:"GroupsCometSocialLearningUnit_unit"}],storageKey:null}],storageKey:null}]}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[da,f,b,c,d,e,aa,ba,ca,ia,ga,ha,ja,a,ea,fa],kind:"Operation",name:"ComposerStoryEditMutation",selections:[{alias:null,args:ka,concreteType:"StoryEditResponsePayload",kind:"LinkedField",name:"story_edit",plural:!1,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"story",plural:!1,selections:[g,i,{alias:null,args:null,kind:"ScalarField",name:"matched_terms",storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"attached_story",plural:!1,selections:[g,{alias:null,args:j,concreteType:"CometStorySections",kind:"LinkedField",name:"comet_sections",plural:!1,selections:[na,oa],storageKey:null},pa,qa,{kind:"ClientExtension",selections:[p]}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"call_to_action",plural:!1,selections:[i,{kind:"TypeDiscriminator",abstractKey:"__isStoryLevelCallToAction"},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"triggers",plural:!0,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"trigger_event",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:j,concreteType:"CometStorySections",kind:"LinkedField",name:"comet_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:["CometFeedStoryInitiallyCollapsedContentStrategy","CometFeedStoryDefaultContentStrategy"]}],concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStory_story",fragmentName:"CometFeedStoryInitiallyCollapsedContentStrategy_content",fragmentPropName:"content",kind:"ModuleImport"}],type:"CometFeedStoryInitiallyCollapsedContentStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStory_story",fragmentName:"CometFeedStoryDefaultContentStrategy_content",fragmentPropName:"content",kind:"ModuleImport"}],type:"CometFeedStoryDefaultContentStrategy",abstractKey:null}],storageKey:'content(supported:["CometFeedStoryInitiallyCollapsedContentStrategy","CometFeedStoryDefaultContentStrategy"])'},{alias:null,args:[{kind:"Literal",name:"supported",value:["CometStorySideUFILayoutStrategy","CometStoryDefaultLayoutStrategy"]}],concreteType:null,kind:"LinkedField",name:"layout",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStory_story__layout",fragmentName:"CometFeedStorySideUFILayoutStrategy_layout",fragmentPropName:"layout",kind:"ModuleImport"}],type:"CometStorySideUFILayoutStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStory_story__layout",fragmentName:"CometFeedStoryDefaultLayoutStrategy_layout",fragmentPropName:"layout",kind:"ModuleImport"}],type:"CometStoryDefaultLayoutStrategy",abstractKey:null}],storageKey:'layout(supported:["CometStorySideUFILayoutStrategy","CometStoryDefaultLayoutStrategy"])'},{alias:null,args:[{kind:"Literal",name:"supported",value:["CometFeedStoryCopyrightViolationHeaderStrategy"]}],concreteType:null,kind:"LinkedField",name:"copyright_violation_header",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryCopyrightViolationHeaderSection_story",fragmentName:"CometFeedStoryCopyrightViolationHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometFeedStoryCopyrightViolationHeaderStrategy",abstractKey:null}],storageKey:'copyright_violation_header(supported:["CometFeedStoryCopyrightViolationHeaderStrategy"])'},{alias:null,args:[{kind:"Literal",name:"supported",value:["CometFeedStoryGroupConflictAlertHeaderStrategy","CometGroupsAlertedContentHeaderStrategy","CometStoryGroupPendingQueueMemberPostApprovalHeaderStrategy","CometStoryCrisisCloseListingHeaderStrategy","CometFeedStoryAlbumHeaderStrategy","CometStoryPostUpsellHeaderStrategy","CometFeedStoryStoryHeaderStrategy","CometFeedStoryFallbackHeaderStrategy","CometFeedStoryCommerceHeaderStrategy","CometStorySocialLearningModuleHeaderStrategy","GeminiFeedStoryImportantHeaderStrategy","CometStoryPhotoReviewCTAHeaderStrategy","CometFeedStoryQuiltsUpgradePromptHeaderStrategy","CometFeedStoryQuiltsDowngradePromptHeaderStrategy"]}],concreteType:null,kind:"LinkedField",name:"header",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometFeedStoryGroupConflictAlertHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometFeedStoryGroupConflictAlertHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometGroupsAlertedContentHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometGroupsAlertedContentHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometStoryGroupPendingQueueMemberPostApprovalHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometStoryGroupPendingQueueMemberPostApprovalHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometStoryCrisisCloseListingHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometStoryCrisisCloseListingHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometFeedStoryAlbumHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometFeedStoryAlbumHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometStoryPostUpsellHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometStoryPostUpsellHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometFeedStoryStoryHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometFeedStoryStoryHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometFeedStoryFallbackHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometFeedStoryFallbackHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometFeedStoryCommerceHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometFeedStoryCommerceHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometStorySocialLearningModuleHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometStorySocialLearningModuleHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"GeminiFeedStoryImportantHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"GeminiFeedStoryImportantHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometStoryPhotoReviewCTAHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometStoryPhotoReviewCTAHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometFeedStoryQuiltsUpgradePromptHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometFeedStoryQuiltsUpgradePromptHeaderStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryHeaderSection_story",fragmentName:"CometFeedStoryQuiltsDowngradePromptHeaderStrategy_header",fragmentPropName:"header",kind:"ModuleImport"}],type:"CometFeedStoryQuiltsDowngradePromptHeaderStrategy",abstractKey:null}],storageKey:'header(supported:["CometFeedStoryGroupConflictAlertHeaderStrategy","CometGroupsAlertedContentHeaderStrategy","CometStoryGroupPendingQueueMemberPostApprovalHeaderStrategy","CometStoryCrisisCloseListingHeaderStrategy","CometFeedStoryAlbumHeaderStrategy","CometStoryPostUpsellHeaderStrategy","CometFeedStoryStoryHeaderStrategy","CometFeedStoryFallbackHeaderStrategy","CometFeedStoryCommerceHeaderStrategy","CometStorySocialLearningModuleHeaderStrategy","GeminiFeedStoryImportantHeaderStrategy","CometStoryPhotoReviewCTAHeaderStrategy","CometFeedStoryQuiltsUpgradePromptHeaderStrategy","CometFeedStoryQuiltsDowngradePromptHeaderStrategy"])'},na,{alias:null,args:[{kind:"Literal",name:"supported",value:["CometFeedStoryAYMTPagePostFooterChannelStrategy","CometFeedStoryAYMTNewsFeedPostFooterChannelStrategy"]}],concreteType:null,kind:"LinkedField",name:"aymt_footer",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryAYMTFooterSection_story",fragmentName:"CometFeedStoryAYMTPagePostFooterChannelStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometFeedStoryAYMTPagePostFooterChannelStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryAYMTFooterSection_story",fragmentName:"CometFeedStoryAYMTNewsFeedPostFooterChannelStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometFeedStoryAYMTNewsFeedPostFooterChannelStrategy",abstractKey:null}],storageKey:'aymt_footer(supported:["CometFeedStoryAYMTPagePostFooterChannelStrategy","CometFeedStoryAYMTNewsFeedPostFooterChannelStrategy"])'},oa,{alias:null,args:[{kind:"Literal",name:"supported",value:["CometStoryFeedbackGroupConflictAlertUFIStrategy","CometStoryFeedbackMemoriesStrategy","CometStoryFeedbackGroupContentModerationQueueStrategy","CometStoryFeedbackGroupViewerContentDeletedPostStrategy","CometStoryFeedbackGroupDraftPostStrategy","GeminiStoryFeedbackGroupDraftedForOthersStrategy","CometStoryFeedbackGroupViewerContentPublishedPostStrategy","CometStoryFeedbackGroupScheduledPostStrategy","CometStoryFeedbackGroupScheduledPendingPostStrategy","CometStoryFeedbackGroupViewerContentScheduledPostStrategy","CometStoryFeedbackPendingPostStrategy","GeminiOnGalahadStoryFeedbackUFIStrategy","CometStoryFeedbackGroupPendingPostStrategy","CometStoryFeedbackGroupViewerContentPendingPostStrategy","CometStoryFeedbackGroupAnonymousPostUFIStrategy","CometStoryFeedbackUFIStrategy","CometStoryFeedbackDiscoveryHubUFIStrategy"]}],concreteType:null,kind:"LinkedField",name:"feedback",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackGroupConflictAlertUFIStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackGroupConflictAlertUFIStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackMemoriesStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackMemoriesStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackGroupContentModerationQueueStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackGroupContentModerationQueueStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackGroupViewerContentDeletedPostStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackGroupViewerContentDeletedPostStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackGroupDraftPostStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackGroupDraftPostStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"GeminiFeedStoryFeedbackGroupDraftedForOthersStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"GeminiStoryFeedbackGroupDraftedForOthersStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackGroupViewerContentPublishedPostStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackGroupViewerContentPublishedPostStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackGroupScheduledPostStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackGroupScheduledPostStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackGroupScheduledPendingPostStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackGroupScheduledPendingPostStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackGroupViewerContentScheduledPostStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackGroupViewerContentScheduledPostStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackPendingPostStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackPendingPostStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"GeminiOnGalahadFeedStoryFeedbackUFIStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"GeminiOnGalahadStoryFeedbackUFIStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackGroupPendingPostStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackGroupPendingPostStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackGroupViewerContentPendingPostStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackGroupViewerContentPendingPostStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackGroupAnonymousPostUFIStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackGroupAnonymousPostUFIStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackUFIStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackUFIStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryFeedbackSection_story",fragmentName:"CometFeedStoryFeedbackDiscoveryHubUFIStrategy_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"CometStoryFeedbackDiscoveryHubUFIStrategy",abstractKey:null}],storageKey:'feedback(supported:["CometStoryFeedbackGroupConflictAlertUFIStrategy","CometStoryFeedbackMemoriesStrategy","CometStoryFeedbackGroupContentModerationQueueStrategy","CometStoryFeedbackGroupViewerContentDeletedPostStrategy","CometStoryFeedbackGroupDraftPostStrategy","GeminiStoryFeedbackGroupDraftedForOthersStrategy","CometStoryFeedbackGroupViewerContentPublishedPostStrategy","CometStoryFeedbackGroupScheduledPostStrategy","CometStoryFeedbackGroupScheduledPendingPostStrategy","CometStoryFeedbackGroupViewerContentScheduledPostStrategy","CometStoryFeedbackPendingPostStrategy","GeminiOnGalahadStoryFeedbackUFIStrategy","CometStoryFeedbackGroupPendingPostStrategy","CometStoryFeedbackGroupViewerContentPendingPostStrategy","CometStoryFeedbackGroupAnonymousPostUFIStrategy","CometStoryFeedbackUFIStrategy","CometStoryFeedbackDiscoveryHubUFIStrategy"])'},{alias:null,args:[{kind:"Literal",name:"supported",value:["CometStoryMisinformationRelatedArticleStrategy","GeminiStoryPromotedPostMarkAsReadOuterFooterStrategy","CometFeedStoryPendingPostOuterFooterStrategy","CometCommunityViewFeedStoryOuterFooterStrategy","CometFeedStoryGroupConflictAlertOuterFooterStrategy"]}],concreteType:null,kind:"LinkedField",name:"outer_footer",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryOuterFooterSection_story",fragmentName:"CometFeedStoryMisinformationRelatedArticleStrategy_misinfoRelatedArticles",fragmentPropName:"misinfoRelatedArticles",kind:"ModuleImport"}],type:"CometStoryMisinformationRelatedArticleStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryOuterFooterSection_story",fragmentName:"GeminiStoryPromotedPostMarkAsReadOuterFooterStrategy_markAsRead",fragmentPropName:"markAsRead",kind:"ModuleImport"}],type:"GeminiStoryPromotedPostMarkAsReadOuterFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryOuterFooterSection_story",fragmentName:"CometFeedStoryPendingPostOuterFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStoryPendingPostOuterFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryOuterFooterSection_story",fragmentName:"CometCommunityViewFeedStoryOuterFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometCommunityViewFeedStoryOuterFooterStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryOuterFooterSection_story",fragmentName:"CometFeedStoryGroupConflictAlertOuterFooterStrategy_story",fragmentPropName:"story",kind:"ModuleImport"}],type:"CometFeedStoryGroupConflictAlertOuterFooterStrategy",abstractKey:null}],storageKey:'outer_footer(supported:["CometStoryMisinformationRelatedArticleStrategy","GeminiStoryPromotedPostMarkAsReadOuterFooterStrategy","CometFeedStoryPendingPostOuterFooterStrategy","CometCommunityViewFeedStoryOuterFooterStrategy","CometFeedStoryGroupConflictAlertOuterFooterStrategy"])'},{alias:null,args:[{kind:"Literal",name:"supported",value:["CometStoryDefaultCallToActionStrategy"]}],concreteType:null,kind:"LinkedField",name:"call_to_action",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryCallToActionSection_story",fragmentName:"CometFeedStoryDefaultCallToActionStrategy_cta",fragmentPropName:"cta",kind:"ModuleImport"}],type:"CometStoryDefaultCallToActionStrategy",abstractKey:null}],storageKey:'call_to_action(supported:["CometStoryDefaultCallToActionStrategy"])'}],storageKey:null},pa,qa,{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[g,{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"associated_group",plural:!1,selections:h,storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"click_tracking_linkshim_cb",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"encrypted_click_tracking",storageKey:null},{kind:"ClientExtension",selections:[p,{alias:null,args:null,kind:"ScalarField",name:"optimistic_loading_type",storageKey:null},{alias:null,args:null,concreteType:"OptimisticMediaAttachmentData",kind:"LinkedField",name:"optimistic_media_attachments",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"entID",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"objectURL",storageKey:null},n,{alias:null,args:null,kind:"ScalarField",name:"useCDNPreview",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creation_session_id",storageKey:null}]},{kind:"InlineFragment",selections:[{kind:"InlineFragment",selections:[ra],type:"Story",abstractKey:null},sa,ta,ua,{kind:"InlineFragment",selections:[va],type:"QuickPromotionNativeTemplateFeedUnit",abstractKey:null},wa,xa,ya,za,Aa,Ba,Ca,Da,Ea],type:"FeedUnit",abstractKey:"__isFeedUnit"},{condition:"isGroupViewerContent",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"to",plural:!1,selections:q,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_feedback",plural:!1,selections:[i,la],storageKey:null}]},{condition:"isSocialLearning",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"SocialLearningInfoUnitModule",kind:"LinkedField",name:"social_learning_info_unit_module",plural:!1,selections:[{alias:null,args:null,concreteType:"LearningCourseInfo",kind:"LinkedField",name:"info",plural:!1,selections:[{alias:"completedRequiredUnits",args:null,kind:"ScalarField",name:"completed_required_units_count",storageKey:null},{alias:"totalRequiredUnits",args:null,kind:"ScalarField",name:"required_units_count",storageKey:null},{alias:"unitProgressText",args:[{kind:"Literal",name:"string_enum",value:"UNIT_PROGRESS"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"UNIT_PROGRESS")'},g],storageKey:null},ma,{alias:null,args:null,concreteType:"LearningCourseUnit",kind:"LinkedField",name:"unit",plural:!1,selections:[g,{alias:null,args:null,kind:"ScalarField",name:"is_synchronizing",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_optional",storageKey:null},{alias:"makeUnitOptionalText",args:[{kind:"Literal",name:"string_enum",value:"MAKE_UNIT_OPTIONAL"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"MAKE_UNIT_OPTIONAL")'},{alias:"makeUnitOptionalToastText",args:[{kind:"Literal",name:"string_enum",value:"MAKE_UNIT_OPTIONAL_TOAST"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"MAKE_UNIT_OPTIONAL_TOAST")'},{alias:null,args:null,concreteType:"LearningCourseInfo",kind:"LinkedField",name:"learning_course_info",plural:!1,selections:[{alias:"reorderPostsDialogTitleText",args:[{kind:"Literal",name:"string_enum",value:"REORDER_POSTS_DIALOG_TITLE"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"REORDER_POSTS_DIALOG_TITLE")'},{alias:"reorderPostsDialogMenuItemText",args:[{kind:"Literal",name:"string_enum",value:"REORDER_POSTS_MENU_ITEM"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"REORDER_POSTS_MENU_ITEM")'},g,k,{alias:"editUnitMenuItemText",args:[{kind:"Literal",name:"string_enum",value:"EDIT_UNIT_MENU_ITEM"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"EDIT_UNIT_MENU_ITEM")'},{alias:"unitHeaderExpandedTitleText",args:[{kind:"Literal",name:"string_enum",value:"UNIT_HEADER_EXPANDED_TITLE"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"UNIT_HEADER_EXPANDED_TITLE")'},{alias:"unitHeaderExpandedDescriptionText",args:[{kind:"Literal",name:"string_enum",value:"UNIT_HEADER_EXPANDED_DESCRIPTION"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"UNIT_HEADER_EXPANDED_DESCRIPTION")'}],storageKey:null},{alias:"modules",args:null,concreteType:"LearningCourseUnitModulesConnection",kind:"LinkedField",name:"learning_course_unit_modules",plural:!1,selections:[r,{alias:null,args:null,concreteType:"LearningCourseUnitModulesEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"LearningCourseModule",kind:"LinkedField",name:"node",plural:!1,selections:[g,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"name_with_sync_source_attribution",plural:!1,selections:t,storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"story",plural:!1,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"attached_story",plural:!1,selections:[u,g],storageKey:null},g,{kind:"InlineFragment",selections:[i,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"debug_info",storageKey:null},{alias:null,args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ad_id",storageKey:null},i],storageKey:null},{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"associated_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"context_actor_hovercard",storageKey:null},g],storageKey:null},g],storageKey:null},ra],type:"Story",abstractKey:null},sa,ta,ua,{kind:"InlineFragment",selections:[Fa,va],type:"QuickPromotionNativeTemplateFeedUnit",abstractKey:null},wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,{kind:"InlineFragment",selections:[Fa],type:"QuickPromotionFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"TrackingData",kind:"LinkedField",name:"trackingdata",plural:!1,selections:h,storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"viewability_config",storageKey:null},{alias:null,args:null,concreteType:"CometClientViewConfig",kind:"LinkedField",name:"client_view_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_delay_log_impression",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"use_banzai_signal_imp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"use_banzai_vital_imp",storageKey:null}],storageKey:null}],type:"Story",abstractKey:null}],type:"TrackableFeedUnit",abstractKey:"__isTrackableFeedUnit"}],type:"FeedUnit",abstractKey:"__isFeedUnit"}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:"learningCourseInfo",args:null,concreteType:"LearningCourseInfo",kind:"LinkedField",name:"learning_course_info",plural:!1,selections:[{alias:"deleteUnitHeaderText",args:[{kind:"Literal",name:"string_enum",value:"DELETE_UNIT_HEADER"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"DELETE_UNIT_HEADER")'},{alias:"deleteUnitBodyText",args:[{kind:"Literal",name:"string_enum",value:"DELETE_UNIT_BODY"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"DELETE_UNIT_BODY")'},{alias:"deleteUnitButtonText",args:[{kind:"Literal",name:"string_enum",value:"DELETE_UNIT_BUTTON"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"DELETE_UNIT_BUTTON")'},g],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"delete_synced_headline",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"delete_synced_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},v,{alias:"unitSavedToastText",args:[{kind:"Literal",name:"string_enum",value:"UNIT_SAVED_TOAST"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"UNIT_SAVED_TOAST")'},{alias:"unitTitleText",args:[{kind:"Literal",name:"string_enum",value:"UNIT_TITLE"}],kind:"ScalarField",name:"social_learning_string",storageKey:'social_learning_string(string_enum:"UNIT_TITLE")'},{alias:"modulePreviews",args:[{kind:"Literal",name:"first",value:3}],concreteType:"LearningCourseUnitModulesConnection",kind:"LinkedField",name:"learning_course_unit_modules",plural:!1,selections:[r,Ga],storageKey:"learning_course_unit_modules(first:3)"},{alias:"learningCourseUnitModules",args:null,concreteType:"LearningCourseUnitModulesConnection",kind:"LinkedField",name:"learning_course_unit_modules",plural:!1,selections:[Ga],storageKey:null},{alias:null,args:null,concreteType:"LearningCourseUnitModulesConnection",kind:"LinkedField",name:"learning_course_unit_modules",plural:!1,selections:w,storageKey:null},{alias:"completedRequiredPostsCount",args:null,kind:"ScalarField",name:"completed_required_modules_count",storageKey:null},{alias:"requiredPostsCount",args:null,kind:"ScalarField",name:"required_modules_count",storageKey:null},{alias:"showCompletion",args:null,kind:"ScalarField",name:"show_completion",storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"story",plural:!1,selections:[{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[Ja,g,{alias:null,args:Ka,kind:"ScalarField",name:"is_eligible_for_real_time_updates",storageKey:null},x,{alias:null,args:Ka,kind:"ScalarField",name:"is_eligible_for_enhanced_comment_updates",storageKey:null},La,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"associated_video",plural:!1,selections:[Ma,g,Na,Oa],storageKey:null},Pa,Qa,Ra,Sa,Ta,Ua,Va,{alias:null,args:Xa,concreteType:"DisplayCommentsConnection",kind:"LinkedField",name:"display_comments",plural:!1,selections:[Ya,Za,$a,ab,bb,cb,db,eb,r,{alias:null,args:null,concreteType:"DisplayCommentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"node",plural:!1,selections:[g,fb,z,B,C,E,gb,hb,ib,jb,{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[g,kb,Ja,lb,mb,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"associated_video",plural:!1,selections:[g,Ma,Na,Oa],storageKey:null},S,nb,x,ob,Pa,pb,qb,Qa,Ra,Sa,Ta,Ua,Va,La,{alias:null,args:F,concreteType:"DisplayCommentsConnection",kind:"LinkedField",name:"display_comments",plural:!1,selections:[{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"highlighted_comments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"author",plural:!1,selections:[i,v,{alias:"profilePictureForReplyExpander",args:Ha,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:l,storageKey:null},g,Ia],storageKey:null},C,g],storageKey:null},Ya,Za,$a,ab,bb,cb,db,eb,r,{alias:null,args:null,concreteType:"DisplayCommentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"node",plural:!1,selections:[g,fb,z,B,C,E,gb,hb,ib,jb,{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[g,kb,{alias:null,args:y,concreteType:null,kind:"LinkedField",name:"viewer_actor",plural:!1,selections:q,storageKey:null},lb,mb,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"associated_video",plural:!1,selections:h,storageKey:null},S,nb,x,ob,Pa,pb,qb,{alias:"sub_replies_count",args:[{kind:"Literal",name:"orderby",value:"sub_replies"}],concreteType:"TopLevelCommentsConnection",kind:"LinkedField",name:"top_level_comments",plural:!1,selections:w,storageKey:'top_level_comments(orderby:"sub_replies")'}],storageKey:null},G,H,I,J,K,L,M,P,D,W,O,N,u,Y,rb,T,sb,tb,ub,$,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Q,Eb,R,Fb,A,m,o,Gb,s,X,{alias:null,args:null,kind:"ScalarField",name:"is_subreply_parent_deleted",storageKey:null},Z,U,i,V],storageKey:null},Hb],storageKey:null},Ib,Jb],storageKey:null},{alias:null,args:F,filters:Kb,handle:"ufi2_comments",key:"UFI2CommentsProvider_feedback_display_comments",kind:"LinkedHandle",name:"display_comments",dynamicKey:Lb},Mb],storageKey:null},G,H,I,J,K,L,M,P,D,W,O,N,u,Y,rb,T,sb,tb,ub,$,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Q,Eb,R,Fb,A,m,o,Gb,s,X,Z,U,i,V],storageKey:null},Hb],storageKey:null},Ib,Jb],storageKey:null},{alias:null,args:Xa,filters:Kb,handle:"ufi2_comments",key:"UFI2CommentsProvider_feedback_display_comments",kind:"LinkedHandle",name:"display_comments",dynamicKey:Lb},Mb,{alias:null,args:[Wa],concreteType:null,kind:"LinkedField",name:"top_level_comment_list_renderer",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometUFITopLevelCommentListRenderer_feedback",fragmentName:"CometMediaViewerUFITopLevelCommentList_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"MediaViewerTopLevelCommentListRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFITopLevelCommentListRenderer_feedback",fragmentName:"CometFeedUFITopLevelCommentList_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"FeedTopLevelCommentListRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFITopLevelCommentListRenderer_feedback",fragmentName:"CometWatchUFITopLevelCommentList_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"WatchTopLevelCommentListRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFITopLevelCommentListRenderer_feedback",fragmentName:"LiveProducerTopLevelCommentList_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"LiveProducerTopLevelCommentListRenderer",abstractKey:null}],storageKey:null},{alias:null,args:[{kind:"Literal",name:"supported",value:["DefaultCometUFISummaryAndActionsRenderer","LiveVideoCometUFISummaryAndActionsRenderer","UnauthenticatedUCometUFISummaryAndActionsRenderer"]}],concreteType:null,kind:"LinkedField",name:"comet_ufi_summary_and_actions_renderer",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{documentName:"CometUFISummaryAndActions_feedback",fragmentName:"CometUFIDefaultSummaryAndActionsRenderer_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"DefaultCometUFISummaryAndActionsRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFISummaryAndActions_feedback",fragmentName:"CometUFILiveVideoSummaryAndActionsRenderer_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"LiveVideoCometUFISummaryAndActionsRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometUFISummaryAndActions_feedback",fragmentName:"CometUnauthenticatedUFISummaryAndActionsRenderer_feedback",fragmentPropName:"feedback",kind:"ModuleImport"}],type:"UnauthenticatedUCometUFISummaryAndActionsRenderer",abstractKey:null}],storageKey:'comet_ufi_summary_and_actions_renderer(supported:["DefaultCometUFISummaryAndActionsRenderer","LiveVideoCometUFISummaryAndActionsRenderer","UnauthenticatedUCometUFISummaryAndActionsRenderer"])'}],storageKey:null},g],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_recommended_posts",storageKey:null}],storageKey:null}],storageKey:null}]}],storageKey:null}],storageKey:null}]},params:{id:"5080757408608651",metadata:{},name:"ComposerStoryEditMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("isGroupStoryRenderLocation",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=new Set(["group_activity_log","group_admin_to_member_feedback","group_alerted_queue","group_bio","group_flagged_queue","group_grid_island","group_hoisted","group_immersive","group_mall","group_pending_queue","group_permalink","group_report_queue","group_units","group","groups_gsym_see_more","groups_landing","groups_my_posts","groups_saved_posts","groups_tab","snaptu_groups_feed"]);function a(a){return g.has(a)}}),null);
__d("ComposerStoryCreateMutation",["CometRelay","OptimisticLoadingTypeEnum","WebPixelRatio","cometComposerLogger","cometUniqueID","gkx","isGroupStoryRenderLocation","qex","recoverableViolation","requireCond","cr:1607069","ComposerStoryCreateMutation.graphql"],(function(a,b,c,d,e,f){"use strict";f.commit=a;f.commitOptimistic=c;var g,h=b("qex")._("1221850")===!0,i=b("gkx")("1000924"),j=g!==void 0?g:g=b("ComposerStoryCreateMutation.graphql");function k(a,c){a=a==null?void 0:a.variables;var d=a==null?void 0:a.renderLocation;return{UFI2CommentsProvider_commentsKey:a==null?void 0:a.UFI2CommentsProvider_commentsKey,displayCommentsContextEnableComment:a==null?void 0:a.displayCommentsContextEnableComment,displayCommentsContextIsAdPreview:a==null?void 0:a.displayCommentsContextIsAdPreview,displayCommentsContextIsAggregatedShare:a==null?void 0:a.displayCommentsContextIsAggregatedShare,displayCommentsContextIsStorySet:a==null?void 0:a.displayCommentsContextIsStorySet,feedLocation:a==null?void 0:a.feedLocation,feedbackSource:a==null?void 0:a.feedbackSource,gridMediaWidth:a==null?void 0:a.gridMediaWidth,input:c,isDraftGeminiPost:b("gkx")("1224637")&&((a=c.unpublished_content_data)==null?void 0:a.unpublished_content_type)==="DRAFT",isFeed:d==="homepage_stream",isFunFactPost:c.fun_fact_prompt_id!=null,isFundraiser:d==="fundraiser_page",isGroup:d!=null&&b("isGroupStoryRenderLocation")(d),isLivingRoom:c.living_room_attachment!=null,isPageNewsFeed:d==="pages_feed",isSocialLearning:d==="group_units",isTimeline:d==="timeline",privacySelectorRenderLocation:"COMET_STREAM",renderLocation:d,scale:b("WebPixelRatio").get()}}function a(a,c,d,e){var f,g=(f=d==null?void 0:(f=d.variables)==null?void 0:f.creationSessionID)!=null?f:"";g===""&&b("recoverableViolation")("Expected to provide a creationSessionID here","comet_composer");var l=k(d,c);if(h)b("cometComposerLogger")({fields:{destination:"feed"},type:"COMPOSER_POST_MUTATION_START"},g);else{f={composerEntryPointName:c.composer_entry_point,composerSourceSurface:c.composer_source_surface,composerType:c.composer_type,isNewsFeedSelected:!0,payload:e==null?void 0:e.payload};b("cometComposerLogger")({fields:f,type:"COMPOSER_POST"},g)}var m=b("cometUniqueID")(),n=b("CometRelay").commitMutation(a,{mutation:j,onCompleted:function(e){var f;b("cometComposerLogger")({fields:{composerType:c.composer_type,loggingIds:(f=e.story_create)==null?void 0:f.logging_token},type:"COMPOSER_POST_SUCCESS"},g);if(e.story_create!=null&&b("cr:1607069")!=null){var h=(f=e.story_create.story)==null?void 0:f.id;if(h!=null){var i=(f=b("qex")._("1607071"))!=null?f:"do_nothing";i!=="do_nothing"&&a.commitUpdate(function(a){b("cr:1607069")(h,a,i==="dock_expanded"?"EXPANDED":"MINIMIZED")})}}d&&d.onCompleted&&d.onCompleted(e,l);b("cometComposerLogger")({fields:{destination:"feed"},type:"COMPOSER_POST_SERVER_CONTENT_RENDERED"},g)},onError:function(a){var e;b("cometComposerLogger")({fields:{composerType:c.composer_type,errorDescription:typeof a.description==="string"?a.description:(e=a.description)==null?void 0:e.toString(),errorInfo:a.message},type:"COMPOSER_POST_FAILURE"},g);d&&d.onError&&d.onError(a)},optimisticResponse:(e=d&&d.optimisticResponse)!=null?e:void 0,optimisticUpdater:function(a){d&&d.optimisticUpdater&&d.optimisticUpdater(a,m)},updater:function(a){i&&b("cometComposerLogger")({fields:{composerType:c.composer_type,publishFlowOptimisticStep:"TRIGGER_REPLACE_OPTIMISTIC_POST"},type:"COMPOSER_PUBLISH_FLOW_OPTIMISTIC_PROCESS"},g);var e=a.getRootField("story_create");e=e&&e.getLinkedRecord("feed_story_edge");e=e&&e.getLinkedRecord("node");e&&(e.setValue(b("OptimisticLoadingTypeEnum").SHOW_ANIMATION,"optimistic_loading_type"),e.setValue(g,"creation_session_id"));d&&d.updater&&d.updater(a,m)},variables:babelHelpers["extends"]({input:c},l)});return{dispose:function(){n&&n.dispose(),n=null}}}function c(a,c,d,e){var f;f=(f=d==null?void 0:(f=d.variables)==null?void 0:f.creationSessionID)!=null?f:"";var g=k(d,c);f===""&&b("recoverableViolation")("Expected to provide a creationSessionID here","comet_composer");e={composerEntryPointName:c.composer_entry_point,composerSourceSurface:c.composer_source_surface,composerType:c.composer_type,isNewsFeedSelected:!0,payload:e==null?void 0:e.payload};b("cometComposerLogger")({fields:e,type:"COMPOSER_POST"},f);var h=b("cometUniqueID")(),i=b("CometRelay").applyOptimisticMutation(a,{mutation:j,optimisticResponse:d&&d.optimisticResponse,optimisticUpdater:function(a){d&&d.optimisticUpdater&&d.optimisticUpdater(a,h)},variables:babelHelpers["extends"]({input:c},g)});return{dispose:function(){i&&i.dispose(),i=null}}}}),null);
__d("ComposerStoryEditMutation",["CometRelay","WebPixelRatio","ComposerStoryEditMutation.graphql"],(function(a,b,c,d,e,f){"use strict";f.commit=a;var g,h=g!==void 0?g:g=b("ComposerStoryEditMutation.graphql");function a(a,c,d){var e,f,g=d==null?void 0:d.variables;e=g!=null?{feedLocation:(e=g==null?void 0:g.feedLocation)!=null?e:"NEWSFEED",renderLocation:(e=g==null?void 0:g.renderLocation)!=null?e:"homepage_stream"}:null;f=(d==null?void 0:(f=d.variables)==null?void 0:f.isGroupViewerContent)||!1;f=babelHelpers["extends"]({displayCommentsContextEnableComment:null,displayCommentsContextIsAdPreview:null,displayCommentsContextIsAggregatedShare:null,displayCommentsContextIsStorySet:null,displayCommentsFeedbackContext:null,feedbackSource:1,isGroupViewerContent:f,isSocialLearning:(g==null?void 0:g.renderLocation)==="group_units",privacySelectorRenderLocation:"COMET_STREAM",scale:b("WebPixelRatio").get()},e);g=d==null?void 0:d.onCompleted;e=d==null?void 0:d.onError;d=d==null?void 0:d.updater;var i=b("CometRelay").commitMutation(a,{mutation:h,onCompleted:g,onError:e,updater:d,variables:babelHelpers["extends"]({input:babelHelpers["extends"]({},c,{editable_post_feature_capabilities:["CONTAINED_LINK","CONTAINED_MEDIA"]})},f)});return{dispose:function(){i&&i.dispose(),i=null}}}}),null);